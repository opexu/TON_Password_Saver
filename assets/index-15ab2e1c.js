var qe=Object.defineProperty;var He=(r,e,n)=>e in r?qe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var Ve=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var We=(r,e,n)=>(He(r,typeof e!="symbol"?e+"":e,n),n);var Ke=Ve((exports,module)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const main="";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var n=function s(){if(this instanceof s){var a=[null];a.push.apply(a,arguments);var o=Function.bind.apply(e,a);return new o}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),n}var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=r.indexOf("=");n===-1&&(n=e);var s=n===e?0:4-n%4;return[n,s]}function byteLength(r){var e=getLens(r),n=e[0],s=e[1];return(n+s)*3/4-s}function _byteLength(r,e,n){return(e+n)*3/4-n}function toByteArray(r){var e,n=getLens(r),s=n[0],a=n[1],o=new Arr(_byteLength(r,s,a)),g=0,b=a>0?s-4:s,B;for(B=0;B<b;B+=4)e=revLookup[r.charCodeAt(B)]<<18|revLookup[r.charCodeAt(B+1)]<<12|revLookup[r.charCodeAt(B+2)]<<6|revLookup[r.charCodeAt(B+3)],o[g++]=e>>16&255,o[g++]=e>>8&255,o[g++]=e&255;return a===2&&(e=revLookup[r.charCodeAt(B)]<<2|revLookup[r.charCodeAt(B+1)]>>4,o[g++]=e&255),a===1&&(e=revLookup[r.charCodeAt(B)]<<10|revLookup[r.charCodeAt(B+1)]<<4|revLookup[r.charCodeAt(B+2)]>>2,o[g++]=e>>8&255,o[g++]=e&255),o}function tripletToBase64(r){return lookup[r>>18&63]+lookup[r>>12&63]+lookup[r>>6&63]+lookup[r&63]}function encodeChunk(r,e,n){for(var s,a=[],o=e;o<n;o+=3)s=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),a.push(tripletToBase64(s));return a.join("")}function fromByteArray(r){for(var e,n=r.length,s=n%3,a=[],o=16383,g=0,b=n-s;g<b;g+=o)a.push(encodeChunk(r,g,g+o>b?b:g+o));return s===1?(e=r[n-1],a.push(lookup[e>>2]+lookup[e<<4&63]+"==")):s===2&&(e=(r[n-2]<<8)+r[n-1],a.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),a.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(r,e,n,s,a){var o,g,b=a*8-s-1,B=(1<<b)-1,N=B>>1,I=-7,U=n?a-1:0,H=n?-1:1,Q=r[e+U];for(U+=H,o=Q&(1<<-I)-1,Q>>=-I,I+=b;I>0;o=o*256+r[e+U],U+=H,I-=8);for(g=o&(1<<-I)-1,o>>=-I,I+=s;I>0;g=g*256+r[e+U],U+=H,I-=8);if(o===0)o=1-N;else{if(o===B)return g?NaN:(Q?-1:1)*(1/0);g=g+Math.pow(2,s),o=o-N}return(Q?-1:1)*g*Math.pow(2,o-s)};ieee754.write=function(r,e,n,s,a,o){var g,b,B,N=o*8-a-1,I=(1<<N)-1,U=I>>1,H=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=s?0:o-1,$t=s?1:-1,Dt=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,g=I):(g=Math.floor(Math.log(e)/Math.LN2),e*(B=Math.pow(2,-g))<1&&(g--,B*=2),g+U>=1?e+=H/B:e+=H*Math.pow(2,1-U),e*B>=2&&(g++,B/=2),g+U>=I?(b=0,g=I):g+U>=1?(b=(e*B-1)*Math.pow(2,a),g=g+U):(b=e*Math.pow(2,U-1)*Math.pow(2,a),g=0));a>=8;r[n+Q]=b&255,Q+=$t,b/=256,a-=8);for(g=g<<a|b,N+=a;N>0;r[n+Q]=g&255,Q+=$t,g/=256,N-=8);r[n+Q-$t]|=Dt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=base64Js,n=ieee754,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=b,r.SlowBuffer=we,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,b.TYPED_ARRAY_SUPPORT=o(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const M=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(M,x),M.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function g(M){if(M>a)throw new RangeError('The value "'+M+'" is invalid for option "size"');const x=new Uint8Array(M);return Object.setPrototypeOf(x,b.prototype),x}function b(M,x,_){if(typeof M=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return U(M)}return B(M,x,_)}b.poolSize=8192;function B(M,x,_){if(typeof M=="string")return H(M,x);if(ArrayBuffer.isView(M))return $t(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(Et(M,ArrayBuffer)||M&&Et(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Et(M,SharedArrayBuffer)||M&&Et(M.buffer,SharedArrayBuffer)))return Dt(M,x,_);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=M.valueOf&&M.valueOf();if(O!=null&&O!==M)return b.from(O,x,_);const k=xt(M);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return b.from(M[Symbol.toPrimitive]("string"),x,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}b.from=function(M,x,_){return B(M,x,_)},Object.setPrototypeOf(b.prototype,Uint8Array.prototype),Object.setPrototypeOf(b,Uint8Array);function N(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function I(M,x,_){return N(M),M<=0?g(M):x!==void 0?typeof _=="string"?g(M).fill(x,_):g(M).fill(x):g(M)}b.alloc=function(M,x,_){return I(M,x,_)};function U(M){return N(M),g(M<0?0:Ut(M)|0)}b.allocUnsafe=function(M){return U(M)},b.allocUnsafeSlow=function(M){return U(M)};function H(M,x){if((typeof x!="string"||x==="")&&(x="utf8"),!b.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const _=Mt(M,x)|0;let O=g(_);const k=O.write(M,x);return k!==_&&(O=O.slice(0,k)),O}function Q(M){const x=M.length<0?0:Ut(M.length)|0,_=g(x);for(let O=0;O<x;O+=1)_[O]=M[O]&255;return _}function $t(M){if(Et(M,Uint8Array)){const x=new Uint8Array(M);return Dt(x.buffer,x.byteOffset,x.byteLength)}return Q(M)}function Dt(M,x,_){if(x<0||M.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<x+(_||0))throw new RangeError('"length" is outside of buffer bounds');let O;return x===void 0&&_===void 0?O=new Uint8Array(M):_===void 0?O=new Uint8Array(M,x):O=new Uint8Array(M,x,_),Object.setPrototypeOf(O,b.prototype),O}function xt(M){if(b.isBuffer(M)){const x=Ut(M.length)|0,_=g(x);return _.length===0||M.copy(_,0,0,x),_}if(M.length!==void 0)return typeof M.length!="number"||ot(M.length)?g(0):Q(M);if(M.type==="Buffer"&&Array.isArray(M.data))return Q(M.data)}function Ut(M){if(M>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return M|0}function we(M){return+M!=M&&(M=0),b.alloc(+M)}b.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==b.prototype},b.compare=function(x,_){if(Et(x,Uint8Array)&&(x=b.from(x,x.offset,x.byteLength)),Et(_,Uint8Array)&&(_=b.from(_,_.offset,_.byteLength)),!b.isBuffer(x)||!b.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===_)return 0;let O=x.length,k=_.length;for(let q=0,Y=Math.min(O,k);q<Y;++q)if(x[q]!==_[q]){O=x[q],k=_[q];break}return O<k?-1:k<O?1:0},b.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(x,_){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return b.alloc(0);let O;if(_===void 0)for(_=0,O=0;O<x.length;++O)_+=x[O].length;const k=b.allocUnsafe(_);let q=0;for(O=0;O<x.length;++O){let Y=x[O];if(Et(Y,Uint8Array))q+Y.length>k.length?(b.isBuffer(Y)||(Y=b.from(Y)),Y.copy(k,q)):Uint8Array.prototype.set.call(k,Y,q);else if(b.isBuffer(Y))Y.copy(k,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=Y.length}return k};function Mt(M,x){if(b.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||Et(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const _=M.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&_===0)return 0;let k=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return Z(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return rt(M).length;default:if(k)return O?-1:Z(M).length;x=(""+x).toLowerCase(),k=!0}}b.byteLength=Mt;function ae(M,x,_){let O=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,x>>>=0,_<=x))return"";for(M||(M="utf8");;)switch(M){case"hex":return f(this,x,_);case"utf8":case"utf-8":return h(this,x,_);case"ascii":return C(this,x,_);case"latin1":case"binary":return m(this,x,_);case"base64":return l(this,x,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,x,_);default:if(O)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),O=!0}}b.prototype._isBuffer=!0;function Yt(M,x,_){const O=M[x];M[x]=M[_],M[_]=O}b.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<x;_+=2)Yt(this,_,_+1);return this},b.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<x;_+=4)Yt(this,_,_+3),Yt(this,_+1,_+2);return this},b.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<x;_+=8)Yt(this,_,_+7),Yt(this,_+1,_+6),Yt(this,_+2,_+5),Yt(this,_+3,_+4);return this},b.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?h(this,0,x):ae.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(x){if(!b.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:b.compare(this,x)===0},b.prototype.inspect=function(){let x="";const _=r.INSPECT_MAX_BYTES;return x=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(x+=" ... "),"<Buffer "+x+">"},s&&(b.prototype[s]=b.prototype.inspect),b.prototype.compare=function(x,_,O,k,q){if(Et(x,Uint8Array)&&(x=b.from(x,x.offset,x.byteLength)),!b.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(_===void 0&&(_=0),O===void 0&&(O=x?x.length:0),k===void 0&&(k=0),q===void 0&&(q=this.length),_<0||O>x.length||k<0||q>this.length)throw new RangeError("out of range index");if(k>=q&&_>=O)return 0;if(k>=q)return-1;if(_>=O)return 1;if(_>>>=0,O>>>=0,k>>>=0,q>>>=0,this===x)return 0;let Y=q-k,Lt=O-_;const vt=Math.min(Y,Lt),St=this.slice(k,q),te=x.slice(_,O);for(let bt=0;bt<vt;++bt)if(St[bt]!==te[bt]){Y=St[bt],Lt=te[bt];break}return Y<Lt?-1:Lt<Y?1:0};function ve(M,x,_,O,k){if(M.length===0)return-1;if(typeof _=="string"?(O=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,ot(_)&&(_=k?0:M.length-1),_<0&&(_=M.length+_),_>=M.length){if(k)return-1;_=M.length-1}else if(_<0)if(k)_=0;else return-1;if(typeof x=="string"&&(x=b.from(x,O)),b.isBuffer(x))return x.length===0?-1:ne(M,x,_,O,k);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(M,x,_):Uint8Array.prototype.lastIndexOf.call(M,x,_):ne(M,[x],_,O,k);throw new TypeError("val must be string, number or Buffer")}function ne(M,x,_,O,k){let q=1,Y=M.length,Lt=x.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(M.length<2||x.length<2)return-1;q=2,Y/=2,Lt/=2,_/=2}function vt(te,bt){return q===1?te[bt]:te.readUInt16BE(bt*q)}let St;if(k){let te=-1;for(St=_;St<Y;St++)if(vt(M,St)===vt(x,te===-1?0:St-te)){if(te===-1&&(te=St),St-te+1===Lt)return te*q}else te!==-1&&(St-=St-te),te=-1}else for(_+Lt>Y&&(_=Y-Lt),St=_;St>=0;St--){let te=!0;for(let bt=0;bt<Lt;bt++)if(vt(M,St+bt)!==vt(x,bt)){te=!1;break}if(te)return St}return-1}b.prototype.includes=function(x,_,O){return this.indexOf(x,_,O)!==-1},b.prototype.indexOf=function(x,_,O){return ve(this,x,_,O,!0)},b.prototype.lastIndexOf=function(x,_,O){return ve(this,x,_,O,!1)};function At(M,x,_,O){_=Number(_)||0;const k=M.length-_;O?(O=Number(O),O>k&&(O=k)):O=k;const q=x.length;O>q/2&&(O=q/2);let Y;for(Y=0;Y<O;++Y){const Lt=parseInt(x.substr(Y*2,2),16);if(ot(Lt))return Y;M[_+Y]=Lt}return Y}function me(M,x,_,O){return nt(Z(x,M.length-_),M,_,O)}function A(M,x,_,O){return nt(ct(x),M,_,O)}function c(M,x,_,O){return nt(rt(x),M,_,O)}function u(M,x,_,O){return nt(at(x,M.length-_),M,_,O)}b.prototype.write=function(x,_,O,k){if(_===void 0)k="utf8",O=this.length,_=0;else if(O===void 0&&typeof _=="string")k=_,O=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(O)?(O=O>>>0,k===void 0&&(k="utf8")):(k=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-_;if((O===void 0||O>q)&&(O=q),x.length>0&&(O<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let Y=!1;for(;;)switch(k){case"hex":return At(this,x,_,O);case"utf8":case"utf-8":return me(this,x,_,O);case"ascii":case"latin1":case"binary":return A(this,x,_,O);case"base64":return c(this,x,_,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,x,_,O);default:if(Y)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),Y=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function l(M,x,_){return x===0&&_===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(x,_))}function h(M,x,_){_=Math.min(M.length,_);const O=[];let k=x;for(;k<_;){const q=M[k];let Y=null,Lt=q>239?4:q>223?3:q>191?2:1;if(k+Lt<=_){let vt,St,te,bt;switch(Lt){case 1:q<128&&(Y=q);break;case 2:vt=M[k+1],(vt&192)===128&&(bt=(q&31)<<6|vt&63,bt>127&&(Y=bt));break;case 3:vt=M[k+1],St=M[k+2],(vt&192)===128&&(St&192)===128&&(bt=(q&15)<<12|(vt&63)<<6|St&63,bt>2047&&(bt<55296||bt>57343)&&(Y=bt));break;case 4:vt=M[k+1],St=M[k+2],te=M[k+3],(vt&192)===128&&(St&192)===128&&(te&192)===128&&(bt=(q&15)<<18|(vt&63)<<12|(St&63)<<6|te&63,bt>65535&&bt<1114112&&(Y=bt))}}Y===null?(Y=65533,Lt=1):Y>65535&&(Y-=65536,O.push(Y>>>10&1023|55296),Y=56320|Y&1023),O.push(Y),k+=Lt}return y(O)}const d=4096;function y(M){const x=M.length;if(x<=d)return String.fromCharCode.apply(String,M);let _="",O=0;for(;O<x;)_+=String.fromCharCode.apply(String,M.slice(O,O+=d));return _}function C(M,x,_){let O="";_=Math.min(M.length,_);for(let k=x;k<_;++k)O+=String.fromCharCode(M[k]&127);return O}function m(M,x,_){let O="";_=Math.min(M.length,_);for(let k=x;k<_;++k)O+=String.fromCharCode(M[k]);return O}function f(M,x,_){const O=M.length;(!x||x<0)&&(x=0),(!_||_<0||_>O)&&(_=O);let k="";for(let q=x;q<_;++q)k+=yt[M[q]];return k}function v(M,x,_){const O=M.slice(x,_);let k="";for(let q=0;q<O.length-1;q+=2)k+=String.fromCharCode(O[q]+O[q+1]*256);return k}b.prototype.slice=function(x,_){const O=this.length;x=~~x,_=_===void 0?O:~~_,x<0?(x+=O,x<0&&(x=0)):x>O&&(x=O),_<0?(_+=O,_<0&&(_=0)):_>O&&(_=O),_<x&&(_=x);const k=this.subarray(x,_);return Object.setPrototypeOf(k,b.prototype),k};function E(M,x,_){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+x>_)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(x,_,O){x=x>>>0,_=_>>>0,O||E(x,_,this.length);let k=this[x],q=1,Y=0;for(;++Y<_&&(q*=256);)k+=this[x+Y]*q;return k},b.prototype.readUintBE=b.prototype.readUIntBE=function(x,_,O){x=x>>>0,_=_>>>0,O||E(x,_,this.length);let k=this[x+--_],q=1;for(;_>0&&(q*=256);)k+=this[x+--_]*q;return k},b.prototype.readUint8=b.prototype.readUInt8=function(x,_){return x=x>>>0,_||E(x,1,this.length),this[x]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(x,_){return x=x>>>0,_||E(x,2,this.length),this[x]|this[x+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(x,_){return x=x>>>0,_||E(x,2,this.length),this[x]<<8|this[x+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(x,_){return x=x>>>0,_||E(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(x,_){return x=x>>>0,_||E(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},b.prototype.readBigUInt64LE=Tt(function(x){x=x>>>0,j(x,"offset");const _=this[x],O=this[x+7];(_===void 0||O===void 0)&&G(x,this.length-8);const k=_+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,q=this[++x]+this[++x]*2**8+this[++x]*2**16+O*2**24;return BigInt(k)+(BigInt(q)<<BigInt(32))}),b.prototype.readBigUInt64BE=Tt(function(x){x=x>>>0,j(x,"offset");const _=this[x],O=this[x+7];(_===void 0||O===void 0)&&G(x,this.length-8);const k=_*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],q=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+O;return(BigInt(k)<<BigInt(32))+BigInt(q)}),b.prototype.readIntLE=function(x,_,O){x=x>>>0,_=_>>>0,O||E(x,_,this.length);let k=this[x],q=1,Y=0;for(;++Y<_&&(q*=256);)k+=this[x+Y]*q;return q*=128,k>=q&&(k-=Math.pow(2,8*_)),k},b.prototype.readIntBE=function(x,_,O){x=x>>>0,_=_>>>0,O||E(x,_,this.length);let k=_,q=1,Y=this[x+--k];for(;k>0&&(q*=256);)Y+=this[x+--k]*q;return q*=128,Y>=q&&(Y-=Math.pow(2,8*_)),Y},b.prototype.readInt8=function(x,_){return x=x>>>0,_||E(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},b.prototype.readInt16LE=function(x,_){x=x>>>0,_||E(x,2,this.length);const O=this[x]|this[x+1]<<8;return O&32768?O|4294901760:O},b.prototype.readInt16BE=function(x,_){x=x>>>0,_||E(x,2,this.length);const O=this[x+1]|this[x]<<8;return O&32768?O|4294901760:O},b.prototype.readInt32LE=function(x,_){return x=x>>>0,_||E(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},b.prototype.readInt32BE=function(x,_){return x=x>>>0,_||E(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},b.prototype.readBigInt64LE=Tt(function(x){x=x>>>0,j(x,"offset");const _=this[x],O=this[x+7];(_===void 0||O===void 0)&&G(x,this.length-8);const k=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(O<<24);return(BigInt(k)<<BigInt(32))+BigInt(_+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),b.prototype.readBigInt64BE=Tt(function(x){x=x>>>0,j(x,"offset");const _=this[x],O=this[x+7];(_===void 0||O===void 0)&&G(x,this.length-8);const k=(_<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(k)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+O)}),b.prototype.readFloatLE=function(x,_){return x=x>>>0,_||E(x,4,this.length),n.read(this,x,!0,23,4)},b.prototype.readFloatBE=function(x,_){return x=x>>>0,_||E(x,4,this.length),n.read(this,x,!1,23,4)},b.prototype.readDoubleLE=function(x,_){return x=x>>>0,_||E(x,8,this.length),n.read(this,x,!0,52,8)},b.prototype.readDoubleBE=function(x,_){return x=x>>>0,_||E(x,8,this.length),n.read(this,x,!1,52,8)};function F(M,x,_,O,k,q){if(!b.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>k||x<q)throw new RangeError('"value" argument is out of bounds');if(_+O>M.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(x,_,O,k){if(x=+x,_=_>>>0,O=O>>>0,!k){const Lt=Math.pow(2,8*O)-1;F(this,x,_,O,Lt,0)}let q=1,Y=0;for(this[_]=x&255;++Y<O&&(q*=256);)this[_+Y]=x/q&255;return _+O},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(x,_,O,k){if(x=+x,_=_>>>0,O=O>>>0,!k){const Lt=Math.pow(2,8*O)-1;F(this,x,_,O,Lt,0)}let q=O-1,Y=1;for(this[_+q]=x&255;--q>=0&&(Y*=256);)this[_+q]=x/Y&255;return _+O},b.prototype.writeUint8=b.prototype.writeUInt8=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,1,255,0),this[_]=x&255,_+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,2,65535,0),this[_]=x&255,this[_+1]=x>>>8,_+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,2,65535,0),this[_]=x>>>8,this[_+1]=x&255,_+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,4,4294967295,0),this[_+3]=x>>>24,this[_+2]=x>>>16,this[_+1]=x>>>8,this[_]=x&255,_+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,4,4294967295,0),this[_]=x>>>24,this[_+1]=x>>>16,this[_+2]=x>>>8,this[_+3]=x&255,_+4};function K(M,x,_,O,k){P(x,O,k,M,_,7);let q=Number(x&BigInt(4294967295));M[_++]=q,q=q>>8,M[_++]=q,q=q>>8,M[_++]=q,q=q>>8,M[_++]=q;let Y=Number(x>>BigInt(32)&BigInt(4294967295));return M[_++]=Y,Y=Y>>8,M[_++]=Y,Y=Y>>8,M[_++]=Y,Y=Y>>8,M[_++]=Y,_}function X(M,x,_,O,k){P(x,O,k,M,_,7);let q=Number(x&BigInt(4294967295));M[_+7]=q,q=q>>8,M[_+6]=q,q=q>>8,M[_+5]=q,q=q>>8,M[_+4]=q;let Y=Number(x>>BigInt(32)&BigInt(4294967295));return M[_+3]=Y,Y=Y>>8,M[_+2]=Y,Y=Y>>8,M[_+1]=Y,Y=Y>>8,M[_]=Y,_+8}b.prototype.writeBigUInt64LE=Tt(function(x,_=0){return K(this,x,_,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=Tt(function(x,_=0){return X(this,x,_,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(x,_,O,k){if(x=+x,_=_>>>0,!k){const vt=Math.pow(2,8*O-1);F(this,x,_,O,vt-1,-vt)}let q=0,Y=1,Lt=0;for(this[_]=x&255;++q<O&&(Y*=256);)x<0&&Lt===0&&this[_+q-1]!==0&&(Lt=1),this[_+q]=(x/Y>>0)-Lt&255;return _+O},b.prototype.writeIntBE=function(x,_,O,k){if(x=+x,_=_>>>0,!k){const vt=Math.pow(2,8*O-1);F(this,x,_,O,vt-1,-vt)}let q=O-1,Y=1,Lt=0;for(this[_+q]=x&255;--q>=0&&(Y*=256);)x<0&&Lt===0&&this[_+q+1]!==0&&(Lt=1),this[_+q]=(x/Y>>0)-Lt&255;return _+O},b.prototype.writeInt8=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,1,127,-128),x<0&&(x=255+x+1),this[_]=x&255,_+1},b.prototype.writeInt16LE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,2,32767,-32768),this[_]=x&255,this[_+1]=x>>>8,_+2},b.prototype.writeInt16BE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,2,32767,-32768),this[_]=x>>>8,this[_+1]=x&255,_+2},b.prototype.writeInt32LE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,4,2147483647,-2147483648),this[_]=x&255,this[_+1]=x>>>8,this[_+2]=x>>>16,this[_+3]=x>>>24,_+4},b.prototype.writeInt32BE=function(x,_,O){return x=+x,_=_>>>0,O||F(this,x,_,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[_]=x>>>24,this[_+1]=x>>>16,this[_+2]=x>>>8,this[_+3]=x&255,_+4},b.prototype.writeBigInt64LE=Tt(function(x,_=0){return K(this,x,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=Tt(function(x,_=0){return X(this,x,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function tt(M,x,_,O,k,q){if(_+O>M.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function wt(M,x,_,O,k){return x=+x,_=_>>>0,k||tt(M,x,_,4),n.write(M,x,_,O,23,4),_+4}b.prototype.writeFloatLE=function(x,_,O){return wt(this,x,_,!0,O)},b.prototype.writeFloatBE=function(x,_,O){return wt(this,x,_,!1,O)};function se(M,x,_,O,k){return x=+x,_=_>>>0,k||tt(M,x,_,8),n.write(M,x,_,O,52,8),_+8}b.prototype.writeDoubleLE=function(x,_,O){return se(this,x,_,!0,O)},b.prototype.writeDoubleBE=function(x,_,O){return se(this,x,_,!1,O)},b.prototype.copy=function(x,_,O,k){if(!b.isBuffer(x))throw new TypeError("argument should be a Buffer");if(O||(O=0),!k&&k!==0&&(k=this.length),_>=x.length&&(_=x.length),_||(_=0),k>0&&k<O&&(k=O),k===O||x.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),x.length-_<k-O&&(k=x.length-_+O);const q=k-O;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,O,k):Uint8Array.prototype.set.call(x,this.subarray(O,k),_),q},b.prototype.fill=function(x,_,O,k){if(typeof x=="string"){if(typeof _=="string"?(k=_,_=0,O=this.length):typeof O=="string"&&(k=O,O=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!b.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(x.length===1){const Y=x.charCodeAt(0);(k==="utf8"&&Y<128||k==="latin1")&&(x=Y)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(_<0||this.length<_||this.length<O)throw new RangeError("Out of range index");if(O<=_)return this;_=_>>>0,O=O===void 0?this.length:O>>>0,x||(x=0);let q;if(typeof x=="number")for(q=_;q<O;++q)this[q]=x;else{const Y=b.isBuffer(x)?x:b.from(x,k),Lt=Y.length;if(Lt===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(q=0;q<O-_;++q)this[q+_]=Y[q%Lt]}return this};const _t={};function Ht(M,x,_){_t[M]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}Ht("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ht("ERR_INVALID_ARG_TYPE",function(M,x){return`The "${M}" argument must be of type number. Received type ${typeof x}`},TypeError),Ht("ERR_OUT_OF_RANGE",function(M,x,_){let O=`The value of "${M}" is out of range.`,k=_;return Number.isInteger(_)&&Math.abs(_)>2**32?k=Ce(String(_)):typeof _=="bigint"&&(k=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(k=Ce(k)),k+="n"),O+=` It must be ${x}. Received ${k}`,O},RangeError);function Ce(M){let x="",_=M.length;const O=M[0]==="-"?1:0;for(;_>=O+4;_-=3)x=`_${M.slice(_-3,_)}${x}`;return`${M.slice(0,_)}${x}`}function jt(M,x,_){j(x,"offset"),(M[x]===void 0||M[x+_]===void 0)&&G(x,M.length-(_+1))}function P(M,x,_,O,k,q){if(M>_||M<x){const Y=typeof x=="bigint"?"n":"";let Lt;throw q>3?x===0||x===BigInt(0)?Lt=`>= 0${Y} and < 2${Y} ** ${(q+1)*8}${Y}`:Lt=`>= -(2${Y} ** ${(q+1)*8-1}${Y}) and < 2 ** ${(q+1)*8-1}${Y}`:Lt=`>= ${x}${Y} and <= ${_}${Y}`,new _t.ERR_OUT_OF_RANGE("value",Lt,M)}jt(O,k,q)}function j(M,x){if(typeof M!="number")throw new _t.ERR_INVALID_ARG_TYPE(x,"number",M)}function G(M,x,_){throw Math.floor(M)!==M?(j(M,_),new _t.ERR_OUT_OF_RANGE(_||"offset","an integer",M)):x<0?new _t.ERR_BUFFER_OUT_OF_BOUNDS:new _t.ERR_OUT_OF_RANGE(_||"offset",`>= ${_?1:0} and <= ${x}`,M)}const et=/[^+/0-9A-Za-z-_]/g;function st(M){if(M=M.split("=")[0],M=M.trim().replace(et,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function Z(M,x){x=x||1/0;let _;const O=M.length;let k=null;const q=[];for(let Y=0;Y<O;++Y){if(_=M.charCodeAt(Y),_>55295&&_<57344){if(!k){if(_>56319){(x-=3)>-1&&q.push(239,191,189);continue}else if(Y+1===O){(x-=3)>-1&&q.push(239,191,189);continue}k=_;continue}if(_<56320){(x-=3)>-1&&q.push(239,191,189),k=_;continue}_=(k-55296<<10|_-56320)+65536}else k&&(x-=3)>-1&&q.push(239,191,189);if(k=null,_<128){if((x-=1)<0)break;q.push(_)}else if(_<2048){if((x-=2)<0)break;q.push(_>>6|192,_&63|128)}else if(_<65536){if((x-=3)<0)break;q.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((x-=4)<0)break;q.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return q}function ct(M){const x=[];for(let _=0;_<M.length;++_)x.push(M.charCodeAt(_)&255);return x}function at(M,x){let _,O,k;const q=[];for(let Y=0;Y<M.length&&!((x-=2)<0);++Y)_=M.charCodeAt(Y),O=_>>8,k=_%256,q.push(k),q.push(O);return q}function rt(M){return e.toByteArray(st(M))}function nt(M,x,_,O){let k;for(k=0;k<O&&!(k+_>=x.length||k>=M.length);++k)x[k+_]=M[k];return k}function Et(M,x){return M instanceof x||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===x.name}function ot(M){return M!==M}const yt=function(){const M="0123456789abcdef",x=new Array(256);for(let _=0;_<16;++_){const O=_*16;for(let k=0;k<16;++k)x[O+k]=M[_]+M[k]}return x}();function Tt(M){return typeof BigInt>"u"?pt:M}function pt(){throw new Error("BigInt not supported")}})(buffer);window.Buffer=buffer.Buffer;globalThis.Buffer=buffer.Buffer;function makeMap(r,e){const n=Object.create(null),s=r.split(",");for(let a=0;a<s.length;a++)n[s[a]]=!0;return e?a=>!!n[a.toLowerCase()]:a=>!!n[a]}function normalizeStyle(r){if(isArray$1(r)){const e={};for(let n=0;n<r.length;n++){const s=r[n],a=isString(s)?parseStringStyle(s):normalizeStyle(s);if(a)for(const o in a)e[o]=a[o]}return e}else{if(isString(r))return r;if(isObject$1(r))return r}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(r){const e={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const s=n.split(propertyDelimiterRE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function normalizeClass(r){let e="";if(isString(r))e=r;else if(isArray$1(r))for(let n=0;n<r.length;n++){const s=normalizeClass(r[n]);s&&(e+=s+" ")}else if(isObject$1(r))for(const n in r)r[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}function looseCompareArrays(r,e){if(r.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<r.length;s++)n=looseEqual(r[s],e[s]);return n}function looseEqual(r,e){if(r===e)return!0;let n=isDate(r),s=isDate(e);if(n||s)return n&&s?r.getTime()===e.getTime():!1;if(n=isSymbol(r),s=isSymbol(e),n||s)return r===e;if(n=isArray$1(r),s=isArray$1(e),n||s)return n&&s?looseCompareArrays(r,e):!1;if(n=isObject$1(r),s=isObject$1(e),n||s){if(!n||!s)return!1;const a=Object.keys(r).length,o=Object.keys(e).length;if(a!==o)return!1;for(const g in r){const b=r.hasOwnProperty(g),B=e.hasOwnProperty(g);if(b&&!B||!b&&B||!looseEqual(r[g],e[g]))return!1}}return String(r)===String(e)}function looseIndexOf(r,e){return r.findIndex(n=>looseEqual(n,e))}const toDisplayString=r=>isString(r)?r:r==null?"":isArray$1(r)||isObject$1(r)&&(r.toString===objectToString||!isFunction$1(r.toString))?JSON.stringify(r,replacer,2):String(r),replacer=(r,e)=>e&&e.__v_isRef?replacer(r,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,a])=>(n[`${s} =>`]=a,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$1(e)&&!isArray$1(e)&&!isPlainObject$1(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=r=>onRE.test(r),isModelListener=r=>r.startsWith("onUpdate:"),extend=Object.assign,remove=(r,e)=>{const n=r.indexOf(e);n>-1&&r.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(r,e)=>hasOwnProperty$1.call(r,e),isArray$1=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isDate=r=>toTypeString(r)==="[object Date]",isFunction$1=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol=r=>typeof r=="symbol",isObject$1=r=>r!==null&&typeof r=="object",isPromise$1=r=>isObject$1(r)&&isFunction$1(r.then)&&isFunction$1(r.catch),objectToString=Object.prototype.toString,toTypeString=r=>objectToString.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject$1=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const e=Object.create(null);return n=>e[n]||(e[n]=r(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,e)=>!Object.is(r,e),invokeArrayFns=(r,e)=>{for(let n=0;n<r.length;n++)r[n](e)},def=(r,e,n)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:n})},looseToNumber=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(r){return new EffectScope(r)}function recordEffectScope(r,e=activeEffectScope){e&&e.active&&e.effects.push(r)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(r){activeEffectScope&&activeEffectScope.cleanups.push(r)}const createDep=r=>{const e=new Set(r);return e.w=0,e.n=0,e},wasTracked=r=>(r.w&trackOpBit)>0,newTracked=r=>(r.n&trackOpBit)>0,initDepMarkers=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=trackOpBit},finalizeDepMarkers=r=>{const{deps:e}=r;if(e.length){let n=0;for(let s=0;s<e.length;s++){const a=e[s];wasTracked(a)&&!newTracked(a)?a.delete(r):e[n++]=a,a.w&=~trackOpBit,a.n&=~trackOpBit}e.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let e=activeEffect,n=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(r){const{deps:e}=r;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(r);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function track(r,e,n){if(shouldTrack&&activeEffect){let s=targetMap.get(r);s||targetMap.set(r,s=new Map);let a=s.get(n);a||s.set(n,a=createDep()),trackEffects(a)}}function trackEffects(r,e){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(r)||(r.n|=trackOpBit,n=!wasTracked(r)):n=!r.has(activeEffect),n&&(r.add(activeEffect),activeEffect.deps.push(r))}function trigger(r,e,n,s,a,o){const g=targetMap.get(r);if(!g)return;let b=[];if(e==="clear")b=[...g.values()];else if(n==="length"&&isArray$1(r)){const B=Number(s);g.forEach((N,I)=>{(I==="length"||I>=B)&&b.push(N)})}else switch(n!==void 0&&b.push(g.get(n)),e){case"add":isArray$1(r)?isIntegerKey(n)&&b.push(g.get("length")):(b.push(g.get(ITERATE_KEY)),isMap(r)&&b.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(r)||(b.push(g.get(ITERATE_KEY)),isMap(r)&&b.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&b.push(g.get(ITERATE_KEY));break}if(b.length===1)b[0]&&triggerEffects(b[0]);else{const B=[];for(const N of b)N&&B.push(...N);triggerEffects(createDep(B))}}function triggerEffects(r,e){const n=isArray$1(r)?r:[...r];for(const s of n)s.computed&&triggerEffect(s);for(const s of n)s.computed||triggerEffect(s)}function triggerEffect(r,e){(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function getDepFromReactive(r,e){var n;return(n=targetMap.get(r))===null||n===void 0?void 0:n.get(e)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...n){const s=toRaw(this);for(let o=0,g=this.length;o<g;o++)track(s,"get",o+"");const a=s[e](...n);return a===-1||a===!1?s[e](...n.map(toRaw)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...n){pauseTracking();const s=toRaw(this)[e].apply(this,n);return resetTracking(),s}}),r}function hasOwnProperty(r){const e=toRaw(this);return track(e,"has",r),e.hasOwnProperty(r)}function createGetter(r=!1,e=!1){return function(s,a,o){if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return e;if(a==="__v_raw"&&o===(r?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(s))return s;const g=isArray$1(s);if(!r){if(g&&hasOwn(arrayInstrumentations,a))return Reflect.get(arrayInstrumentations,a,o);if(a==="hasOwnProperty")return hasOwnProperty}const b=Reflect.get(s,a,o);return(isSymbol(a)?builtInSymbols.has(a):isNonTrackableKeys(a))||(r||track(s,"get",a),e)?b:isRef(b)?g&&isIntegerKey(a)?b:b.value:isObject$1(b)?r?readonly(b):reactive(b):b}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(r=!1){return function(n,s,a,o){let g=n[s];if(isReadonly(g)&&isRef(g)&&!isRef(a))return!1;if(!r&&(!isShallow(a)&&!isReadonly(a)&&(g=toRaw(g),a=toRaw(a)),!isArray$1(n)&&isRef(g)&&!isRef(a)))return g.value=a,!0;const b=isArray$1(n)&&isIntegerKey(s)?Number(s)<n.length:hasOwn(n,s),B=Reflect.set(n,s,a,o);return n===toRaw(o)&&(b?hasChanged(a,g)&&trigger(n,"set",s,a):trigger(n,"add",s,a)),B}}function deleteProperty(r,e){const n=hasOwn(r,e);r[e];const s=Reflect.deleteProperty(r,e);return s&&n&&trigger(r,"delete",e,void 0),s}function has$1(r,e){const n=Reflect.has(r,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(r,"has",e),n}function ownKeys(r){return track(r,"iterate",isArray$1(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(r,e){return!0},deleteProperty(r,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function get$2(r,e,n=!1,s=!1){r=r.__v_raw;const a=toRaw(r),o=toRaw(e);n||(e!==o&&track(a,"get",e),track(a,"get",o));const{has:g}=getProto(a),b=s?toShallow:n?toReadonly:toReactive;if(g.call(a,e))return b(r.get(e));if(g.call(a,o))return b(r.get(o));r!==a&&r.get(e)}function has(r,e=!1){const n=this.__v_raw,s=toRaw(n),a=toRaw(r);return e||(r!==a&&track(s,"has",r),track(s,"has",a)),r===a?n.has(r):n.has(r)||n.has(a)}function size(r,e=!1){return r=r.__v_raw,!e&&track(toRaw(r),"iterate",ITERATE_KEY),Reflect.get(r,"size",r)}function add(r){r=toRaw(r);const e=toRaw(this);return getProto(e).has.call(e,r)||(e.add(r),trigger(e,"add",r,r)),this}function set(r,e){e=toRaw(e);const n=toRaw(this),{has:s,get:a}=getProto(n);let o=s.call(n,r);o||(r=toRaw(r),o=s.call(n,r));const g=a.call(n,r);return n.set(r,e),o?hasChanged(e,g)&&trigger(n,"set",r,e):trigger(n,"add",r,e),this}function deleteEntry(r){const e=toRaw(this),{has:n,get:s}=getProto(e);let a=n.call(e,r);a||(r=toRaw(r),a=n.call(e,r)),s&&s.call(e,r);const o=e.delete(r);return a&&trigger(e,"delete",r,void 0),o}function clear(){const r=toRaw(this),e=r.size!==0,n=r.clear();return e&&trigger(r,"clear",void 0,void 0),n}function createForEach(r,e){return function(s,a){const o=this,g=o.__v_raw,b=toRaw(g),B=e?toShallow:r?toReadonly:toReactive;return!r&&track(b,"iterate",ITERATE_KEY),g.forEach((N,I)=>s.call(a,B(N),B(I),o))}}function createIterableMethod(r,e,n){return function(...s){const a=this.__v_raw,o=toRaw(a),g=isMap(o),b=r==="entries"||r===Symbol.iterator&&g,B=r==="keys"&&g,N=a[r](...s),I=n?toShallow:e?toReadonly:toReactive;return!e&&track(o,"iterate",B?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:U,done:H}=N.next();return H?{value:U,done:H}:{value:b?[I(U[0]),I(U[1])]:I(U),done:H}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...e){return r==="delete"?!1:this}}function createInstrumentations(){const r={get(o){return get$2(this,o)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(o){return get$2(this,o,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(o){return get$2(this,o,!0)},get size(){return size(this,!0)},has(o){return has.call(this,o,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},s={get(o){return get$2(this,o,!0,!0)},get size(){return size(this,!0)},has(o){return has.call(this,o,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=createIterableMethod(o,!1,!1),n[o]=createIterableMethod(o,!0,!1),e[o]=createIterableMethod(o,!1,!0),s[o]=createIterableMethod(o,!0,!0)}),[r,n,e,s]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(r,e){const n=e?r?shallowReadonlyInstrumentations:shallowInstrumentations:r?readonlyInstrumentations:mutableInstrumentations;return(s,a,o)=>a==="__v_isReactive"?!r:a==="__v_isReadonly"?r:a==="__v_raw"?s:Reflect.get(hasOwn(n,a)&&a in s?n:s,a,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(r,e,n,s,a){if(!isObject$1(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=a.get(r);if(o)return o;const g=getTargetType(r);if(g===0)return r;const b=new Proxy(r,g===2?s:n);return a.set(r,b),b}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return isReactive(r)||isReadonly(r)}function toRaw(r){const e=r&&r.__v_raw;return e?toRaw(e):r}function markRaw(r){return def(r,"__v_skip",!0),r}const toReactive=r=>isObject$1(r)?reactive(r):r,toReadonly=r=>isObject$1(r)?readonly(r):r;function trackRefValue(r){shouldTrack&&activeEffect&&(r=toRaw(r),trackEffects(r.dep||(r.dep=createDep())))}function triggerRefValue(r,e){r=toRaw(r);const n=r.dep;n&&triggerEffects(n)}function isRef(r){return!!(r&&r.__v_isRef===!0)}function ref(r){return createRef(r,!1)}function createRef(r,e){return isRef(r)?r:new RefImpl(r,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this))}}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,e,n)=>unref(Reflect.get(r,e,n)),set:(r,e,n,s)=>{const a=r[e];return isRef(a)&&!isRef(n)?(a.value=n,!0):Reflect.set(r,e,n,s)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}function toRefs(r){const e=isArray$1(r)?new Array(r.length):{};for(const n in r)e[n]=toRef(r,n);return e}class ObjectRefImpl{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function toRef(r,e,n){const s=r[e];return isRef(s)?s:new ObjectRefImpl(r,e,n)}var _a$1;class ComputedRefImpl{constructor(e,n,s,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=s}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(r,e,n=!1){let s,a;const o=isFunction$1(r);return o?(s=r,a=NOOP):(s=r.get,a=r.set),new ComputedRefImpl(s,a,o||!a,n)}function warn(r,...e){}function callWithErrorHandling(r,e,n,s){let a;try{a=s?r(...s):r()}catch(o){handleError(o,e,n)}return a}function callWithAsyncErrorHandling(r,e,n,s){if(isFunction$1(r)){const o=callWithErrorHandling(r,e,n,s);return o&&isPromise$1(o)&&o.catch(g=>{handleError(g,e,n)}),o}const a=[];for(let o=0;o<r.length;o++)a.push(callWithAsyncErrorHandling(r[o],e,n,s));return a}function handleError(r,e,n,s=!0){const a=e?e.vnode:null;if(e){let o=e.parent;const g=e.proxy,b=n;for(;o;){const N=o.ec;if(N){for(let I=0;I<N.length;I++)if(N[I](r,g,b)===!1)return}o=o.parent}const B=e.appContext.config.errorHandler;if(B){callWithErrorHandling(B,null,10,[r,g,b]);return}}logError(r,n,a,s)}function logError(r,e,n,s=!0){console.error(r)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const e=currentFlushPromise||resolvedPromise;return r?e.then(this?r.bind(this):r):e}function findInsertionIndex(r){let e=flushIndex+1,n=queue$1.length;for(;e<n;){const s=e+n>>>1;getId(queue$1[s])<r?e=s+1:n=s}return e}function queueJob(r){(!queue$1.length||!queue$1.includes(r,isFlushing&&r.allowRecurse?flushIndex+1:flushIndex))&&(r.id==null?queue$1.push(r):queue$1.splice(findInsertionIndex(r.id),0,r),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(r){const e=queue$1.indexOf(r);e>flushIndex&&queue$1.splice(e,1)}function queuePostFlushCb(r){isArray$1(r)?pendingPostFlushCbs.push(...r):(!activePostFlushCbs||!activePostFlushCbs.includes(r,r.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(r),queueFlush()}function flushPreFlushCbs(r,e=isFlushing?flushIndex+1:0){for(;e<queue$1.length;e++){const n=queue$1[e];n&&n.pre&&(queue$1.splice(e,1),e--,n())}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((n,s)=>getId(n)-getId(s)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?1/0:r.id,comparator$1=(r,e)=>{const n=getId(r)-getId(e);if(n===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return n};function flushJobs(r){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator$1);const e=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const n=queue$1[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(r,e,...n){if(r.isUnmounted)return;const s=r.vnode.props||EMPTY_OBJ;let a=n;const o=e.startsWith("update:"),g=o&&e.slice(7);if(g&&g in s){const I=`${g==="modelValue"?"model":g}Modifiers`,{number:U,trim:H}=s[I]||EMPTY_OBJ;H&&(a=n.map(Q=>isString(Q)?Q.trim():Q)),U&&(a=n.map(looseToNumber))}let b,B=s[b=toHandlerKey(e)]||s[b=toHandlerKey(camelize(e))];!B&&o&&(B=s[b=toHandlerKey(hyphenate(e))]),B&&callWithAsyncErrorHandling(B,r,6,a);const N=s[b+"Once"];if(N){if(!r.emitted)r.emitted={};else if(r.emitted[b])return;r.emitted[b]=!0,callWithAsyncErrorHandling(N,r,6,a)}}function normalizeEmitsOptions(r,e,n=!1){const s=e.emitsCache,a=s.get(r);if(a!==void 0)return a;const o=r.emits;let g={},b=!1;if(!isFunction$1(r)){const B=N=>{const I=normalizeEmitsOptions(N,e,!0);I&&(b=!0,extend(g,I))};!n&&e.mixins.length&&e.mixins.forEach(B),r.extends&&B(r.extends),r.mixins&&r.mixins.forEach(B)}return!o&&!b?(isObject$1(r)&&s.set(r,null),null):(isArray$1(o)?o.forEach(B=>g[B]=null):extend(g,o),isObject$1(r)&&s.set(r,g),g)}function isEmitListener(r,e){return!r||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(r,e[0].toLowerCase()+e.slice(1))||hasOwn(r,hyphenate(e))||hasOwn(r,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const e=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,e}function withCtx(r,e=currentRenderingInstance,n){if(!e||r._n)return r;const s=(...a)=>{s._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(e);let g;try{g=r(...a)}finally{setCurrentRenderingInstance(o),s._d&&setBlockTracking(1)}return g};return s._n=!0,s._c=!0,s._d=!0,s}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:e,vnode:n,proxy:s,withProxy:a,props:o,propsOptions:[g],slots:b,attrs:B,emit:N,render:I,renderCache:U,data:H,setupState:Q,ctx:$t,inheritAttrs:Dt}=r;let xt,Ut;const we=setCurrentRenderingInstance(r);try{if(n.shapeFlag&4){const ae=a||s;xt=normalizeVNode(I.call(ae,ae,U,o,Q,H,$t)),Ut=B}else{const ae=e;xt=normalizeVNode(ae.length>1?ae(o,{attrs:B,slots:b,emit:N}):ae(o,null)),Ut=e.props?B:getFunctionalFallthrough(B)}}catch(ae){blockStack.length=0,handleError(ae,r,1),xt=createVNode(Comment)}let Mt=xt;if(Ut&&Dt!==!1){const ae=Object.keys(Ut),{shapeFlag:Yt}=Mt;ae.length&&Yt&7&&(g&&ae.some(isModelListener)&&(Ut=filterModelListeners(Ut,g)),Mt=cloneVNode(Mt,Ut))}return n.dirs&&(Mt=cloneVNode(Mt),Mt.dirs=Mt.dirs?Mt.dirs.concat(n.dirs):n.dirs),n.transition&&(Mt.transition=n.transition),xt=Mt,setCurrentRenderingInstance(we),xt}const getFunctionalFallthrough=r=>{let e;for(const n in r)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=r[n]);return e},filterModelListeners=(r,e)=>{const n={};for(const s in r)(!isModelListener(s)||!(s.slice(9)in e))&&(n[s]=r[s]);return n};function shouldUpdateComponent(r,e,n){const{props:s,children:a,component:o}=r,{props:g,children:b,patchFlag:B}=e,N=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&B>=0){if(B&1024)return!0;if(B&16)return s?hasPropsChanged(s,g,N):!!g;if(B&8){const I=e.dynamicProps;for(let U=0;U<I.length;U++){const H=I[U];if(g[H]!==s[H]&&!isEmitListener(N,H))return!0}}}else return(a||b)&&(!b||!b.$stable)?!0:s===g?!1:s?g?hasPropsChanged(s,g,N):!0:!!g;return!1}function hasPropsChanged(r,e,n){const s=Object.keys(e);if(s.length!==Object.keys(r).length)return!0;for(let a=0;a<s.length;a++){const o=s[a];if(e[o]!==r[o]&&!isEmitListener(n,o))return!0}return!1}function updateHOCHostEl({vnode:r,parent:e},n){for(;e&&e.subTree===r;)(r=e.vnode).el=n,e=e.parent}const isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,e){e&&e.pendingBranch?isArray$1(r)?e.effects.push(...r):e.effects.push(r):queuePostFlushCb(r)}function provide(r,e){if(currentInstance){let n=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===n&&(n=currentInstance.provides=Object.create(s)),n[r]=e}}function inject(r,e,n=!1){const s=currentInstance||currentRenderingInstance;if(s){const a=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(a&&r in a)return a[r];if(arguments.length>1)return n&&isFunction$1(e)?e.call(s.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(r,e,n){return doWatch(r,e,n)}function doWatch(r,e,{immediate:n,deep:s,flush:a,onTrack:o,onTrigger:g}=EMPTY_OBJ){const b=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let B,N=!1,I=!1;if(isRef(r)?(B=()=>r.value,N=isShallow(r)):isReactive(r)?(B=()=>r,s=!0):isArray$1(r)?(I=!0,N=r.some(Mt=>isReactive(Mt)||isShallow(Mt)),B=()=>r.map(Mt=>{if(isRef(Mt))return Mt.value;if(isReactive(Mt))return traverse(Mt);if(isFunction$1(Mt))return callWithErrorHandling(Mt,b,2)})):isFunction$1(r)?e?B=()=>callWithErrorHandling(r,b,2):B=()=>{if(!(b&&b.isUnmounted))return U&&U(),callWithAsyncErrorHandling(r,b,3,[H])}:B=NOOP,e&&s){const Mt=B;B=()=>traverse(Mt())}let U,H=Mt=>{U=Ut.onStop=()=>{callWithErrorHandling(Mt,b,4)}},Q;if(isInSSRComponentSetup)if(H=NOOP,e?n&&callWithAsyncErrorHandling(e,b,3,[B(),I?[]:void 0,H]):B(),a==="sync"){const Mt=useSSRContext();Q=Mt.__watcherHandles||(Mt.__watcherHandles=[])}else return NOOP;let $t=I?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Dt=()=>{if(Ut.active)if(e){const Mt=Ut.run();(s||N||(I?Mt.some((ae,Yt)=>hasChanged(ae,$t[Yt])):hasChanged(Mt,$t)))&&(U&&U(),callWithAsyncErrorHandling(e,b,3,[Mt,$t===INITIAL_WATCHER_VALUE?void 0:I&&$t[0]===INITIAL_WATCHER_VALUE?[]:$t,H]),$t=Mt)}else Ut.run()};Dt.allowRecurse=!!e;let xt;a==="sync"?xt=Dt:a==="post"?xt=()=>queuePostRenderEffect(Dt,b&&b.suspense):(Dt.pre=!0,b&&(Dt.id=b.uid),xt=()=>queueJob(Dt));const Ut=new ReactiveEffect(B,xt);e?n?Dt():$t=Ut.run():a==="post"?queuePostRenderEffect(Ut.run.bind(Ut),b&&b.suspense):Ut.run();const we=()=>{Ut.stop(),b&&b.scope&&remove(b.scope.effects,Ut)};return Q&&Q.push(we),we}function instanceWatch(r,e,n){const s=this.proxy,a=isString(r)?r.includes(".")?createPathGetter(s,r):()=>s[r]:r.bind(s,s);let o;isFunction$1(e)?o=e:(o=e.handler,n=e);const g=currentInstance;setCurrentInstance(this);const b=doWatch(a,o.bind(s),n);return g?setCurrentInstance(g):unsetCurrentInstance(),b}function createPathGetter(r,e){const n=e.split(".");return()=>{let s=r;for(let a=0;a<n.length&&s;a++)s=s[n[a]];return s}}function traverse(r,e){if(!isObject$1(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),isRef(r))traverse(r.value,e);else if(isArray$1(r))for(let n=0;n<r.length;n++)traverse(r[n],e);else if(isSet(r)||isMap(r))r.forEach(n=>{traverse(n,e)});else if(isPlainObject$1(r))for(const n in r)traverse(r[n],e);return r}function defineComponent(r){return isFunction$1(r)?{setup:r,name:r.name}:r}const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,e){registerKeepAliveHook(r,"a",e)}function onDeactivated(r,e){registerKeepAliveHook(r,"da",e)}function registerKeepAliveHook(r,e,n=currentInstance){const s=r.__wdc||(r.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return r()});if(injectHook(e,s,n),n){let a=n.parent;for(;a&&a.parent;)isKeepAlive(a.parent.vnode)&&injectToKeepAliveRoot(s,e,n,a),a=a.parent}}function injectToKeepAliveRoot(r,e,n,s){const a=injectHook(e,r,s,!0);onUnmounted(()=>{remove(s[e],a)},n)}function injectHook(r,e,n=currentInstance,s=!1){if(n){const a=n[r]||(n[r]=[]),o=e.__weh||(e.__weh=(...g)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const b=callWithAsyncErrorHandling(e,n,r,g);return unsetCurrentInstance(),resetTracking(),b});return s?a.unshift(o):a.push(o),o}}const createHook=r=>(e,n=currentInstance)=>(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...s)=>e(...s),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,e=currentInstance){injectHook("ec",r,e)}function withDirectives(r,e){const n=currentRenderingInstance;if(n===null)return r;const s=getExposeProxy(n)||n.proxy,a=r.dirs||(r.dirs=[]);for(let o=0;o<e.length;o++){let[g,b,B,N=EMPTY_OBJ]=e[o];g&&(isFunction$1(g)&&(g={mounted:g,updated:g}),g.deep&&traverse(b),a.push({dir:g,instance:s,value:b,oldValue:void 0,arg:B,modifiers:N}))}return r}function invokeDirectiveHook(r,e,n,s){const a=r.dirs,o=e&&e.dirs;for(let g=0;g<a.length;g++){const b=a[g];o&&(b.oldValue=o[g].value);let B=b.dir[s];B&&(pauseTracking(),callWithAsyncErrorHandling(B,n,8,[r.el,b,r,e]),resetTracking())}}const COMPONENTS="components";function resolveComponent(r,e){return resolveAsset(COMPONENTS,r,!0,e)||r}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(r,e,n=!0,s=!1){const a=currentRenderingInstance||currentInstance;if(a){const o=a.type;if(r===COMPONENTS){const b=getComponentName(o,!1);if(b&&(b===e||b===camelize(e)||b===capitalize(camelize(e))))return o}const g=resolve(a[r]||o[r],e)||resolve(a.appContext[r],e);return!g&&s?o:g}}function resolve(r,e){return r&&(r[e]||r[camelize(e)]||r[capitalize(camelize(e))])}const getPublicInstance=r=>r?isStatefulComponent(r)?getExposeProxy(r)||r.proxy:getPublicInstance(r.parent):null,publicPropertiesMap=extend(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>queueJob(r.update)),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,e)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn(r,e),PublicInstanceProxyHandlers={get({_:r},e){const{ctx:n,setupState:s,data:a,props:o,accessCache:g,type:b,appContext:B}=r;let N;if(e[0]!=="$"){const Q=g[e];if(Q!==void 0)switch(Q){case 1:return s[e];case 2:return a[e];case 4:return n[e];case 3:return o[e]}else{if(hasSetupBinding(s,e))return g[e]=1,s[e];if(a!==EMPTY_OBJ&&hasOwn(a,e))return g[e]=2,a[e];if((N=r.propsOptions[0])&&hasOwn(N,e))return g[e]=3,o[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return g[e]=4,n[e];shouldCacheAccess&&(g[e]=0)}}const I=publicPropertiesMap[e];let U,H;if(I)return e==="$attrs"&&track(r,"get",e),I(r);if((U=b.__cssModules)&&(U=U[e]))return U;if(n!==EMPTY_OBJ&&hasOwn(n,e))return g[e]=4,n[e];if(H=B.config.globalProperties,hasOwn(H,e))return H[e]},set({_:r},e,n){const{data:s,setupState:a,ctx:o}=r;return hasSetupBinding(a,e)?(a[e]=n,!0):s!==EMPTY_OBJ&&hasOwn(s,e)?(s[e]=n,!0):hasOwn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=n,!0)},has({_:{data:r,setupState:e,accessCache:n,ctx:s,appContext:a,propsOptions:o}},g){let b;return!!n[g]||r!==EMPTY_OBJ&&hasOwn(r,g)||hasSetupBinding(e,g)||(b=o[0])&&hasOwn(b,g)||hasOwn(s,g)||hasOwn(publicPropertiesMap,g)||hasOwn(a.config.globalProperties,g)},defineProperty(r,e,n){return n.get!=null?r._.accessCache[e]=0:hasOwn(n,"value")&&this.set(r,e,n.value,null),Reflect.defineProperty(r,e,n)}};let shouldCacheAccess=!0;function applyOptions(r){const e=resolveMergedOptions(r),n=r.proxy,s=r.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,r,"bc");const{data:a,computed:o,methods:g,watch:b,provide:B,inject:N,created:I,beforeMount:U,mounted:H,beforeUpdate:Q,updated:$t,activated:Dt,deactivated:xt,beforeDestroy:Ut,beforeUnmount:we,destroyed:Mt,unmounted:ae,render:Yt,renderTracked:ve,renderTriggered:ne,errorCaptured:At,serverPrefetch:me,expose:A,inheritAttrs:c,components:u,directives:l,filters:h}=e;if(N&&resolveInjections(N,s,null,r.appContext.config.unwrapInjectedRef),g)for(const C in g){const m=g[C];isFunction$1(m)&&(s[C]=m.bind(n))}if(a){const C=a.call(n,n);isObject$1(C)&&(r.data=reactive(C))}if(shouldCacheAccess=!0,o)for(const C in o){const m=o[C],f=isFunction$1(m)?m.bind(n,n):isFunction$1(m.get)?m.get.bind(n,n):NOOP,v=!isFunction$1(m)&&isFunction$1(m.set)?m.set.bind(n):NOOP,E=computed({get:f,set:v});Object.defineProperty(s,C,{enumerable:!0,configurable:!0,get:()=>E.value,set:F=>E.value=F})}if(b)for(const C in b)createWatcher(b[C],s,n,C);if(B){const C=isFunction$1(B)?B.call(n):B;Reflect.ownKeys(C).forEach(m=>{provide(m,C[m])})}I&&callHook(I,r,"c");function y(C,m){isArray$1(m)?m.forEach(f=>C(f.bind(n))):m&&C(m.bind(n))}if(y(onBeforeMount,U),y(onMounted,H),y(onBeforeUpdate,Q),y(onUpdated,$t),y(onActivated,Dt),y(onDeactivated,xt),y(onErrorCaptured,At),y(onRenderTracked,ve),y(onRenderTriggered,ne),y(onBeforeUnmount,we),y(onUnmounted,ae),y(onServerPrefetch,me),isArray$1(A))if(A.length){const C=r.exposed||(r.exposed={});A.forEach(m=>{Object.defineProperty(C,m,{get:()=>n[m],set:f=>n[m]=f})})}else r.exposed||(r.exposed={});Yt&&r.render===NOOP&&(r.render=Yt),c!=null&&(r.inheritAttrs=c),u&&(r.components=u),l&&(r.directives=l)}function resolveInjections(r,e,n=NOOP,s=!1){isArray$1(r)&&(r=normalizeInject(r));for(const a in r){const o=r[a];let g;isObject$1(o)?"default"in o?g=inject(o.from||a,o.default,!0):g=inject(o.from||a):g=inject(o),isRef(g)&&s?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>g.value,set:b=>g.value=b}):e[a]=g}}function callHook(r,e,n){callWithAsyncErrorHandling(isArray$1(r)?r.map(s=>s.bind(e.proxy)):r.bind(e.proxy),e,n)}function createWatcher(r,e,n,s){const a=s.includes(".")?createPathGetter(n,s):()=>n[s];if(isString(r)){const o=e[r];isFunction$1(o)&&watch(a,o)}else if(isFunction$1(r))watch(a,r.bind(n));else if(isObject$1(r))if(isArray$1(r))r.forEach(o=>createWatcher(o,e,n,s));else{const o=isFunction$1(r.handler)?r.handler.bind(n):e[r.handler];isFunction$1(o)&&watch(a,o,r)}}function resolveMergedOptions(r){const e=r.type,{mixins:n,extends:s}=e,{mixins:a,optionsCache:o,config:{optionMergeStrategies:g}}=r.appContext,b=o.get(e);let B;return b?B=b:!a.length&&!n&&!s?B=e:(B={},a.length&&a.forEach(N=>mergeOptions(B,N,g,!0)),mergeOptions(B,e,g)),isObject$1(e)&&o.set(e,B),B}function mergeOptions(r,e,n,s=!1){const{mixins:a,extends:o}=e;o&&mergeOptions(r,o,n,!0),a&&a.forEach(g=>mergeOptions(r,g,n,!0));for(const g in e)if(!(s&&g==="expose")){const b=internalOptionMergeStrats[g]||n&&n[g];r[g]=b?b(r[g],e[g]):e[g]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,e){return e?r?function(){return extend(isFunction$1(r)?r.call(this,this):r,isFunction$1(e)?e.call(this,this):e)}:e:r}function mergeInject(r,e){return mergeObjectOptions(normalizeInject(r),normalizeInject(e))}function normalizeInject(r){if(isArray$1(r)){const e={};for(let n=0;n<r.length;n++)e[r[n]]=r[n];return e}return r}function mergeAsArray(r,e){return r?[...new Set([].concat(r,e))]:e}function mergeObjectOptions(r,e){return r?extend(extend(Object.create(null),r),e):e}function mergeWatchOptions(r,e){if(!r)return e;if(!e)return r;const n=extend(Object.create(null),r);for(const s in e)n[s]=mergeAsArray(r[s],e[s]);return n}function initProps(r,e,n,s=!1){const a={},o={};def(o,InternalObjectKey,1),r.propsDefaults=Object.create(null),setFullProps(r,e,a,o);for(const g in r.propsOptions[0])g in a||(a[g]=void 0);n?r.props=s?a:shallowReactive(a):r.type.props?r.props=a:r.props=o,r.attrs=o}function updateProps(r,e,n,s){const{props:a,attrs:o,vnode:{patchFlag:g}}=r,b=toRaw(a),[B]=r.propsOptions;let N=!1;if((s||g>0)&&!(g&16)){if(g&8){const I=r.vnode.dynamicProps;for(let U=0;U<I.length;U++){let H=I[U];if(isEmitListener(r.emitsOptions,H))continue;const Q=e[H];if(B)if(hasOwn(o,H))Q!==o[H]&&(o[H]=Q,N=!0);else{const $t=camelize(H);a[$t]=resolvePropValue(B,b,$t,Q,r,!1)}else Q!==o[H]&&(o[H]=Q,N=!0)}}}else{setFullProps(r,e,a,o)&&(N=!0);let I;for(const U in b)(!e||!hasOwn(e,U)&&((I=hyphenate(U))===U||!hasOwn(e,I)))&&(B?n&&(n[U]!==void 0||n[I]!==void 0)&&(a[U]=resolvePropValue(B,b,U,void 0,r,!0)):delete a[U]);if(o!==b)for(const U in o)(!e||!hasOwn(e,U))&&(delete o[U],N=!0)}N&&trigger(r,"set","$attrs")}function setFullProps(r,e,n,s){const[a,o]=r.propsOptions;let g=!1,b;if(e)for(let B in e){if(isReservedProp(B))continue;const N=e[B];let I;a&&hasOwn(a,I=camelize(B))?!o||!o.includes(I)?n[I]=N:(b||(b={}))[I]=N:isEmitListener(r.emitsOptions,B)||(!(B in s)||N!==s[B])&&(s[B]=N,g=!0)}if(o){const B=toRaw(n),N=b||EMPTY_OBJ;for(let I=0;I<o.length;I++){const U=o[I];n[U]=resolvePropValue(a,B,U,N[U],r,!hasOwn(N,U))}}return g}function resolvePropValue(r,e,n,s,a,o){const g=r[n];if(g!=null){const b=hasOwn(g,"default");if(b&&s===void 0){const B=g.default;if(g.type!==Function&&isFunction$1(B)){const{propsDefaults:N}=a;n in N?s=N[n]:(setCurrentInstance(a),s=N[n]=B.call(null,e),unsetCurrentInstance())}else s=B}g[0]&&(o&&!b?s=!1:g[1]&&(s===""||s===hyphenate(n))&&(s=!0))}return s}function normalizePropsOptions(r,e,n=!1){const s=e.propsCache,a=s.get(r);if(a)return a;const o=r.props,g={},b=[];let B=!1;if(!isFunction$1(r)){const I=U=>{B=!0;const[H,Q]=normalizePropsOptions(U,e,!0);extend(g,H),Q&&b.push(...Q)};!n&&e.mixins.length&&e.mixins.forEach(I),r.extends&&I(r.extends),r.mixins&&r.mixins.forEach(I)}if(!o&&!B)return isObject$1(r)&&s.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray$1(o))for(let I=0;I<o.length;I++){const U=camelize(o[I]);validatePropName(U)&&(g[U]=EMPTY_OBJ)}else if(o)for(const I in o){const U=camelize(I);if(validatePropName(U)){const H=o[I],Q=g[U]=isArray$1(H)||isFunction$1(H)?{type:H}:Object.assign({},H);if(Q){const $t=getTypeIndex(Boolean,Q.type),Dt=getTypeIndex(String,Q.type);Q[0]=$t>-1,Q[1]=Dt<0||$t<Dt,($t>-1||hasOwn(Q,"default"))&&b.push(U)}}}const N=[g,b];return isObject$1(r)&&s.set(r,N),N}function validatePropName(r){return r[0]!=="$"}function getType(r){const e=r&&r.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:r===null?"null":""}function isSameType(r,e){return getType(r)===getType(e)}function getTypeIndex(r,e){return isArray$1(e)?e.findIndex(n=>isSameType(n,r)):isFunction$1(e)&&isSameType(e,r)?0:-1}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray$1(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot=(r,e,n)=>{if(e._n)return e;const s=withCtx((...a)=>normalizeSlotValue(e(...a)),n);return s._c=!1,s},normalizeObjectSlots=(r,e,n)=>{const s=r._ctx;for(const a in r){if(isInternalKey(a))continue;const o=r[a];if(isFunction$1(o))e[a]=normalizeSlot(a,o,s);else if(o!=null){const g=normalizeSlotValue(o);e[a]=()=>g}}},normalizeVNodeSlots=(r,e)=>{const n=normalizeSlotValue(e);r.slots.default=()=>n},initSlots=(r,e)=>{if(r.vnode.shapeFlag&32){const n=e._;n?(r.slots=toRaw(e),def(e,"_",n)):normalizeObjectSlots(e,r.slots={})}else r.slots={},e&&normalizeVNodeSlots(r,e);def(r.slots,InternalObjectKey,1)},updateSlots=(r,e,n)=>{const{vnode:s,slots:a}=r;let o=!0,g=EMPTY_OBJ;if(s.shapeFlag&32){const b=e._;b?n&&b===1?o=!1:(extend(a,e),!n&&b===1&&delete a._):(o=!e.$stable,normalizeObjectSlots(e,a)),g=e}else e&&(normalizeVNodeSlots(r,e),g={default:1});if(o)for(const b in a)!isInternalKey(b)&&!(b in g)&&delete a[b]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,e){return function(s,a=null){isFunction$1(s)||(s=Object.assign({},s)),a!=null&&!isObject$1(a)&&(a=null);const o=createAppContext(),g=new Set;let b=!1;const B=o.app={_uid:uid$1++,_component:s,_props:a,_container:null,_context:o,_instance:null,version:version$1,get config(){return o.config},set config(N){},use(N,...I){return g.has(N)||(N&&isFunction$1(N.install)?(g.add(N),N.install(B,...I)):isFunction$1(N)&&(g.add(N),N(B,...I))),B},mixin(N){return o.mixins.includes(N)||o.mixins.push(N),B},component(N,I){return I?(o.components[N]=I,B):o.components[N]},directive(N,I){return I?(o.directives[N]=I,B):o.directives[N]},mount(N,I,U){if(!b){const H=createVNode(s,a);return H.appContext=o,I&&e?e(H,N):r(H,N,U),b=!0,B._container=N,N.__vue_app__=B,getExposeProxy(H.component)||H.component.proxy}},unmount(){b&&(r(null,B._container),delete B._container.__vue_app__)},provide(N,I){return o.provides[N]=I,B}};return B}}function setRef(r,e,n,s,a=!1){if(isArray$1(r)){r.forEach((H,Q)=>setRef(H,e&&(isArray$1(e)?e[Q]:e),n,s,a));return}if(isAsyncWrapper(s)&&!a)return;const o=s.shapeFlag&4?getExposeProxy(s.component)||s.component.proxy:s.el,g=a?null:o,{i:b,r:B}=r,N=e&&e.r,I=b.refs===EMPTY_OBJ?b.refs={}:b.refs,U=b.setupState;if(N!=null&&N!==B&&(isString(N)?(I[N]=null,hasOwn(U,N)&&(U[N]=null)):isRef(N)&&(N.value=null)),isFunction$1(B))callWithErrorHandling(B,b,12,[g,I]);else{const H=isString(B),Q=isRef(B);if(H||Q){const $t=()=>{if(r.f){const Dt=H?hasOwn(U,B)?U[B]:I[B]:B.value;a?isArray$1(Dt)&&remove(Dt,o):isArray$1(Dt)?Dt.includes(o)||Dt.push(o):H?(I[B]=[o],hasOwn(U,B)&&(U[B]=I[B])):(B.value=[o],r.k&&(I[r.k]=B.value))}else H?(I[B]=g,hasOwn(U,B)&&(U[B]=g)):Q&&(B.value=g,r.k&&(I[r.k]=g))};g?($t.id=-1,queuePostRenderEffect($t,n)):$t()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:s,remove:a,patchProp:o,createElement:g,createText:b,createComment:B,setText:N,setElementText:I,parentNode:U,nextSibling:H,setScopeId:Q=NOOP,insertStaticContent:$t}=r,Dt=(P,j,G,et=null,st=null,Z=null,ct=!1,at=null,rt=!!j.dynamicChildren)=>{if(P===j)return;P&&!isSameVNodeType(P,j)&&(et=se(P),F(P,st,Z,!0),P=null),j.patchFlag===-2&&(rt=!1,j.dynamicChildren=null);const{type:nt,ref:Et,shapeFlag:ot}=j;switch(nt){case Text:xt(P,j,G,et);break;case Comment:Ut(P,j,G,et);break;case Static:P==null&&we(j,G,et,ct);break;case Fragment:u(P,j,G,et,st,Z,ct,at,rt);break;default:ot&1?Yt(P,j,G,et,st,Z,ct,at,rt):ot&6?l(P,j,G,et,st,Z,ct,at,rt):(ot&64||ot&128)&&nt.process(P,j,G,et,st,Z,ct,at,rt,Ht)}Et!=null&&st&&setRef(Et,P&&P.ref,Z,j||P,!j)},xt=(P,j,G,et)=>{if(P==null)s(j.el=b(j.children),G,et);else{const st=j.el=P.el;j.children!==P.children&&N(st,j.children)}},Ut=(P,j,G,et)=>{P==null?s(j.el=B(j.children||""),G,et):j.el=P.el},we=(P,j,G,et)=>{[P.el,P.anchor]=$t(P.children,j,G,et,P.el,P.anchor)},Mt=({el:P,anchor:j},G,et)=>{let st;for(;P&&P!==j;)st=H(P),s(P,G,et),P=st;s(j,G,et)},ae=({el:P,anchor:j})=>{let G;for(;P&&P!==j;)G=H(P),a(P),P=G;a(j)},Yt=(P,j,G,et,st,Z,ct,at,rt)=>{ct=ct||j.type==="svg",P==null?ve(j,G,et,st,Z,ct,at,rt):me(P,j,st,Z,ct,at,rt)},ve=(P,j,G,et,st,Z,ct,at)=>{let rt,nt;const{type:Et,props:ot,shapeFlag:yt,transition:Tt,dirs:pt}=P;if(rt=P.el=g(P.type,Z,ot&&ot.is,ot),yt&8?I(rt,P.children):yt&16&&At(P.children,rt,null,et,st,Z&&Et!=="foreignObject",ct,at),pt&&invokeDirectiveHook(P,null,et,"created"),ne(rt,P,P.scopeId,ct,et),ot){for(const x in ot)x!=="value"&&!isReservedProp(x)&&o(rt,x,null,ot[x],Z,P.children,et,st,wt);"value"in ot&&o(rt,"value",null,ot.value),(nt=ot.onVnodeBeforeMount)&&invokeVNodeHook(nt,et,P)}pt&&invokeDirectiveHook(P,null,et,"beforeMount");const M=(!st||st&&!st.pendingBranch)&&Tt&&!Tt.persisted;M&&Tt.beforeEnter(rt),s(rt,j,G),((nt=ot&&ot.onVnodeMounted)||M||pt)&&queuePostRenderEffect(()=>{nt&&invokeVNodeHook(nt,et,P),M&&Tt.enter(rt),pt&&invokeDirectiveHook(P,null,et,"mounted")},st)},ne=(P,j,G,et,st)=>{if(G&&Q(P,G),et)for(let Z=0;Z<et.length;Z++)Q(P,et[Z]);if(st){let Z=st.subTree;if(j===Z){const ct=st.vnode;ne(P,ct,ct.scopeId,ct.slotScopeIds,st.parent)}}},At=(P,j,G,et,st,Z,ct,at,rt=0)=>{for(let nt=rt;nt<P.length;nt++){const Et=P[nt]=at?cloneIfMounted(P[nt]):normalizeVNode(P[nt]);Dt(null,Et,j,G,et,st,Z,ct,at)}},me=(P,j,G,et,st,Z,ct)=>{const at=j.el=P.el;let{patchFlag:rt,dynamicChildren:nt,dirs:Et}=j;rt|=P.patchFlag&16;const ot=P.props||EMPTY_OBJ,yt=j.props||EMPTY_OBJ;let Tt;G&&toggleRecurse(G,!1),(Tt=yt.onVnodeBeforeUpdate)&&invokeVNodeHook(Tt,G,j,P),Et&&invokeDirectiveHook(j,P,G,"beforeUpdate"),G&&toggleRecurse(G,!0);const pt=st&&j.type!=="foreignObject";if(nt?A(P.dynamicChildren,nt,at,G,et,pt,Z):ct||m(P,j,at,null,G,et,pt,Z,!1),rt>0){if(rt&16)c(at,j,ot,yt,G,et,st);else if(rt&2&&ot.class!==yt.class&&o(at,"class",null,yt.class,st),rt&4&&o(at,"style",ot.style,yt.style,st),rt&8){const M=j.dynamicProps;for(let x=0;x<M.length;x++){const _=M[x],O=ot[_],k=yt[_];(k!==O||_==="value")&&o(at,_,O,k,st,P.children,G,et,wt)}}rt&1&&P.children!==j.children&&I(at,j.children)}else!ct&&nt==null&&c(at,j,ot,yt,G,et,st);((Tt=yt.onVnodeUpdated)||Et)&&queuePostRenderEffect(()=>{Tt&&invokeVNodeHook(Tt,G,j,P),Et&&invokeDirectiveHook(j,P,G,"updated")},et)},A=(P,j,G,et,st,Z,ct)=>{for(let at=0;at<j.length;at++){const rt=P[at],nt=j[at],Et=rt.el&&(rt.type===Fragment||!isSameVNodeType(rt,nt)||rt.shapeFlag&70)?U(rt.el):G;Dt(rt,nt,Et,null,et,st,Z,ct,!0)}},c=(P,j,G,et,st,Z,ct)=>{if(G!==et){if(G!==EMPTY_OBJ)for(const at in G)!isReservedProp(at)&&!(at in et)&&o(P,at,G[at],null,ct,j.children,st,Z,wt);for(const at in et){if(isReservedProp(at))continue;const rt=et[at],nt=G[at];rt!==nt&&at!=="value"&&o(P,at,nt,rt,ct,j.children,st,Z,wt)}"value"in et&&o(P,"value",G.value,et.value)}},u=(P,j,G,et,st,Z,ct,at,rt)=>{const nt=j.el=P?P.el:b(""),Et=j.anchor=P?P.anchor:b("");let{patchFlag:ot,dynamicChildren:yt,slotScopeIds:Tt}=j;Tt&&(at=at?at.concat(Tt):Tt),P==null?(s(nt,G,et),s(Et,G,et),At(j.children,G,Et,st,Z,ct,at,rt)):ot>0&&ot&64&&yt&&P.dynamicChildren?(A(P.dynamicChildren,yt,G,st,Z,ct,at),(j.key!=null||st&&j===st.subTree)&&traverseStaticChildren(P,j,!0)):m(P,j,G,Et,st,Z,ct,at,rt)},l=(P,j,G,et,st,Z,ct,at,rt)=>{j.slotScopeIds=at,P==null?j.shapeFlag&512?st.ctx.activate(j,G,et,ct,rt):h(j,G,et,st,Z,ct,rt):d(P,j,rt)},h=(P,j,G,et,st,Z,ct)=>{const at=P.component=createComponentInstance(P,et,st);if(isKeepAlive(P)&&(at.ctx.renderer=Ht),setupComponent(at),at.asyncDep){if(st&&st.registerDep(at,y),!P.el){const rt=at.subTree=createVNode(Comment);Ut(null,rt,j,G)}return}y(at,P,j,G,st,Z,ct)},d=(P,j,G)=>{const et=j.component=P.component;if(shouldUpdateComponent(P,j,G))if(et.asyncDep&&!et.asyncResolved){C(et,j,G);return}else et.next=j,invalidateJob(et.update),et.update();else j.el=P.el,et.vnode=j},y=(P,j,G,et,st,Z,ct)=>{const at=()=>{if(P.isMounted){let{next:Et,bu:ot,u:yt,parent:Tt,vnode:pt}=P,M=Et,x;toggleRecurse(P,!1),Et?(Et.el=pt.el,C(P,Et,ct)):Et=pt,ot&&invokeArrayFns(ot),(x=Et.props&&Et.props.onVnodeBeforeUpdate)&&invokeVNodeHook(x,Tt,Et,pt),toggleRecurse(P,!0);const _=renderComponentRoot(P),O=P.subTree;P.subTree=_,Dt(O,_,U(O.el),se(O),P,st,Z),Et.el=_.el,M===null&&updateHOCHostEl(P,_.el),yt&&queuePostRenderEffect(yt,st),(x=Et.props&&Et.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(x,Tt,Et,pt),st)}else{let Et;const{el:ot,props:yt}=j,{bm:Tt,m:pt,parent:M}=P,x=isAsyncWrapper(j);if(toggleRecurse(P,!1),Tt&&invokeArrayFns(Tt),!x&&(Et=yt&&yt.onVnodeBeforeMount)&&invokeVNodeHook(Et,M,j),toggleRecurse(P,!0),ot&&jt){const _=()=>{P.subTree=renderComponentRoot(P),jt(ot,P.subTree,P,st,null)};x?j.type.__asyncLoader().then(()=>!P.isUnmounted&&_()):_()}else{const _=P.subTree=renderComponentRoot(P);Dt(null,_,G,et,P,st,Z),j.el=_.el}if(pt&&queuePostRenderEffect(pt,st),!x&&(Et=yt&&yt.onVnodeMounted)){const _=j;queuePostRenderEffect(()=>invokeVNodeHook(Et,M,_),st)}(j.shapeFlag&256||M&&isAsyncWrapper(M.vnode)&&M.vnode.shapeFlag&256)&&P.a&&queuePostRenderEffect(P.a,st),P.isMounted=!0,j=G=et=null}},rt=P.effect=new ReactiveEffect(at,()=>queueJob(nt),P.scope),nt=P.update=()=>rt.run();nt.id=P.uid,toggleRecurse(P,!0),nt()},C=(P,j,G)=>{j.component=P;const et=P.vnode.props;P.vnode=j,P.next=null,updateProps(P,j.props,et,G),updateSlots(P,j.children,G),pauseTracking(),flushPreFlushCbs(),resetTracking()},m=(P,j,G,et,st,Z,ct,at,rt=!1)=>{const nt=P&&P.children,Et=P?P.shapeFlag:0,ot=j.children,{patchFlag:yt,shapeFlag:Tt}=j;if(yt>0){if(yt&128){v(nt,ot,G,et,st,Z,ct,at,rt);return}else if(yt&256){f(nt,ot,G,et,st,Z,ct,at,rt);return}}Tt&8?(Et&16&&wt(nt,st,Z),ot!==nt&&I(G,ot)):Et&16?Tt&16?v(nt,ot,G,et,st,Z,ct,at,rt):wt(nt,st,Z,!0):(Et&8&&I(G,""),Tt&16&&At(ot,G,et,st,Z,ct,at,rt))},f=(P,j,G,et,st,Z,ct,at,rt)=>{P=P||EMPTY_ARR,j=j||EMPTY_ARR;const nt=P.length,Et=j.length,ot=Math.min(nt,Et);let yt;for(yt=0;yt<ot;yt++){const Tt=j[yt]=rt?cloneIfMounted(j[yt]):normalizeVNode(j[yt]);Dt(P[yt],Tt,G,null,st,Z,ct,at,rt)}nt>Et?wt(P,st,Z,!0,!1,ot):At(j,G,et,st,Z,ct,at,rt,ot)},v=(P,j,G,et,st,Z,ct,at,rt)=>{let nt=0;const Et=j.length;let ot=P.length-1,yt=Et-1;for(;nt<=ot&&nt<=yt;){const Tt=P[nt],pt=j[nt]=rt?cloneIfMounted(j[nt]):normalizeVNode(j[nt]);if(isSameVNodeType(Tt,pt))Dt(Tt,pt,G,null,st,Z,ct,at,rt);else break;nt++}for(;nt<=ot&&nt<=yt;){const Tt=P[ot],pt=j[yt]=rt?cloneIfMounted(j[yt]):normalizeVNode(j[yt]);if(isSameVNodeType(Tt,pt))Dt(Tt,pt,G,null,st,Z,ct,at,rt);else break;ot--,yt--}if(nt>ot){if(nt<=yt){const Tt=yt+1,pt=Tt<Et?j[Tt].el:et;for(;nt<=yt;)Dt(null,j[nt]=rt?cloneIfMounted(j[nt]):normalizeVNode(j[nt]),G,pt,st,Z,ct,at,rt),nt++}}else if(nt>yt)for(;nt<=ot;)F(P[nt],st,Z,!0),nt++;else{const Tt=nt,pt=nt,M=new Map;for(nt=pt;nt<=yt;nt++){const vt=j[nt]=rt?cloneIfMounted(j[nt]):normalizeVNode(j[nt]);vt.key!=null&&M.set(vt.key,nt)}let x,_=0;const O=yt-pt+1;let k=!1,q=0;const Y=new Array(O);for(nt=0;nt<O;nt++)Y[nt]=0;for(nt=Tt;nt<=ot;nt++){const vt=P[nt];if(_>=O){F(vt,st,Z,!0);continue}let St;if(vt.key!=null)St=M.get(vt.key);else for(x=pt;x<=yt;x++)if(Y[x-pt]===0&&isSameVNodeType(vt,j[x])){St=x;break}St===void 0?F(vt,st,Z,!0):(Y[St-pt]=nt+1,St>=q?q=St:k=!0,Dt(vt,j[St],G,null,st,Z,ct,at,rt),_++)}const Lt=k?getSequence(Y):EMPTY_ARR;for(x=Lt.length-1,nt=O-1;nt>=0;nt--){const vt=pt+nt,St=j[vt],te=vt+1<Et?j[vt+1].el:et;Y[nt]===0?Dt(null,St,G,te,st,Z,ct,at,rt):k&&(x<0||nt!==Lt[x]?E(St,G,te,2):x--)}}},E=(P,j,G,et,st=null)=>{const{el:Z,type:ct,transition:at,children:rt,shapeFlag:nt}=P;if(nt&6){E(P.component.subTree,j,G,et);return}if(nt&128){P.suspense.move(j,G,et);return}if(nt&64){ct.move(P,j,G,Ht);return}if(ct===Fragment){s(Z,j,G);for(let ot=0;ot<rt.length;ot++)E(rt[ot],j,G,et);s(P.anchor,j,G);return}if(ct===Static){Mt(P,j,G);return}if(et!==2&&nt&1&&at)if(et===0)at.beforeEnter(Z),s(Z,j,G),queuePostRenderEffect(()=>at.enter(Z),st);else{const{leave:ot,delayLeave:yt,afterLeave:Tt}=at,pt=()=>s(Z,j,G),M=()=>{ot(Z,()=>{pt(),Tt&&Tt()})};yt?yt(Z,pt,M):M()}else s(Z,j,G)},F=(P,j,G,et=!1,st=!1)=>{const{type:Z,props:ct,ref:at,children:rt,dynamicChildren:nt,shapeFlag:Et,patchFlag:ot,dirs:yt}=P;if(at!=null&&setRef(at,null,G,P,!0),Et&256){j.ctx.deactivate(P);return}const Tt=Et&1&&yt,pt=!isAsyncWrapper(P);let M;if(pt&&(M=ct&&ct.onVnodeBeforeUnmount)&&invokeVNodeHook(M,j,P),Et&6)tt(P.component,G,et);else{if(Et&128){P.suspense.unmount(G,et);return}Tt&&invokeDirectiveHook(P,null,j,"beforeUnmount"),Et&64?P.type.remove(P,j,G,st,Ht,et):nt&&(Z!==Fragment||ot>0&&ot&64)?wt(nt,j,G,!1,!0):(Z===Fragment&&ot&384||!st&&Et&16)&&wt(rt,j,G),et&&K(P)}(pt&&(M=ct&&ct.onVnodeUnmounted)||Tt)&&queuePostRenderEffect(()=>{M&&invokeVNodeHook(M,j,P),Tt&&invokeDirectiveHook(P,null,j,"unmounted")},G)},K=P=>{const{type:j,el:G,anchor:et,transition:st}=P;if(j===Fragment){X(G,et);return}if(j===Static){ae(P);return}const Z=()=>{a(G),st&&!st.persisted&&st.afterLeave&&st.afterLeave()};if(P.shapeFlag&1&&st&&!st.persisted){const{leave:ct,delayLeave:at}=st,rt=()=>ct(G,Z);at?at(P.el,Z,rt):rt()}else Z()},X=(P,j)=>{let G;for(;P!==j;)G=H(P),a(P),P=G;a(j)},tt=(P,j,G)=>{const{bum:et,scope:st,update:Z,subTree:ct,um:at}=P;et&&invokeArrayFns(et),st.stop(),Z&&(Z.active=!1,F(ct,P,j,G)),at&&queuePostRenderEffect(at,j),queuePostRenderEffect(()=>{P.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},wt=(P,j,G,et=!1,st=!1,Z=0)=>{for(let ct=Z;ct<P.length;ct++)F(P[ct],j,G,et,st)},se=P=>P.shapeFlag&6?se(P.component.subTree):P.shapeFlag&128?P.suspense.next():H(P.anchor||P.el),_t=(P,j,G)=>{P==null?j._vnode&&F(j._vnode,null,null,!0):Dt(j._vnode||null,P,j,null,null,null,G),flushPreFlushCbs(),flushPostFlushCbs(),j._vnode=P},Ht={p:Dt,um:F,m:E,r:K,mt:h,mc:At,pc:m,pbc:A,n:se,o:r};let Ce,jt;return e&&([Ce,jt]=e(Ht)),{render:_t,hydrate:Ce,createApp:createAppAPI(_t,Ce)}}function toggleRecurse({effect:r,update:e},n){r.allowRecurse=e.allowRecurse=n}function traverseStaticChildren(r,e,n=!1){const s=r.children,a=e.children;if(isArray$1(s)&&isArray$1(a))for(let o=0;o<s.length;o++){const g=s[o];let b=a[o];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=a[o]=cloneIfMounted(a[o]),b.el=g.el),n||traverseStaticChildren(g,b)),b.type===Text&&(b.el=g.el)}}function getSequence(r){const e=r.slice(),n=[0];let s,a,o,g,b;const B=r.length;for(s=0;s<B;s++){const N=r[s];if(N!==0){if(a=n[n.length-1],r[a]<N){e[s]=a,n.push(s);continue}for(o=0,g=n.length-1;o<g;)b=o+g>>1,r[n[b]]<N?o=b+1:g=b;N<r[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}for(o=n.length,g=n[o-1];o-- >0;)n[o]=g,g=e[g];return n}const isTeleport=r=>r.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r){isBlockTreeEnabled+=r}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,e,n,s,a,o){return setupBlock(createBaseVNode(r,e,n,s,a,o,!0))}function createBlock(r,e,n,s,a){return setupBlock(createVNode(r,e,n,s,a,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,e){return r.type===e.type&&r.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:e,ref_for:n})=>r!=null?isString(r)||isRef(r)||isFunction$1(r)?{i:currentRenderingInstance,r,k:e,f:!!n}:r:null;function createBaseVNode(r,e=null,n=null,s=0,a=null,o=r===Fragment?0:1,g=!1,b=!1){const B={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return b?(normalizeChildren(B,n),o&128&&r.normalize(B)):n&&(B.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!g&&currentBlock&&(B.patchFlag>0||o&6)&&B.patchFlag!==32&&currentBlock.push(B),B}const createVNode=_createVNode;function _createVNode(r,e=null,n=null,s=0,a=null,o=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const b=cloneVNode(r,e,!0);return n&&normalizeChildren(b,n),isBlockTreeEnabled>0&&!o&&currentBlock&&(b.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=b:currentBlock.push(b)),b.patchFlag|=-2,b}if(isClassComponent(r)&&(r=r.__vccOpts),e){e=guardReactiveProps(e);let{class:b,style:B}=e;b&&!isString(b)&&(e.class=normalizeClass(b)),isObject$1(B)&&(isProxy(B)&&!isArray$1(B)&&(B=extend({},B)),e.style=normalizeStyle(B))}const g=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject$1(r)?4:isFunction$1(r)?2:0;return createBaseVNode(r,e,n,s,a,g,o,!0)}function guardReactiveProps(r){return r?isProxy(r)||InternalObjectKey in r?extend({},r):r:null}function cloneVNode(r,e,n=!1){const{props:s,ref:a,patchFlag:o,children:g}=r,b=e?mergeProps(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:b,key:b&&normalizeKey(b),ref:e&&e.ref?n&&a?isArray$1(a)?a.concat(normalizeRef(e)):[a,normalizeRef(e)]:normalizeRef(e):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:g,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fragment?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function createTextVNode(r=" ",e=0){return createVNode(Text,null,r,e)}function createCommentVNode(r="",e=!1){return e?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray$1(r)?createVNode(Fragment,null,r.slice()):typeof r=="object"?cloneIfMounted(r):createVNode(Text,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,e){let n=0;const{shapeFlag:s}=r;if(e==null)e=null;else if(isArray$1(e))n=16;else if(typeof e=="object")if(s&65){const a=e.default;a&&(a._c&&(a._d=!1),normalizeChildren(r,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:a===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),s&64?(n=16,e=[createTextVNode(e)]):n=8);r.children=e,r.shapeFlag|=n}function mergeProps(...r){const e={};for(let n=0;n<r.length;n++){const s=r[n];for(const a in s)if(a==="class")e.class!==s.class&&(e.class=normalizeClass([e.class,s.class]));else if(a==="style")e.style=normalizeStyle([e.style,s.style]);else if(isOn(a)){const o=e[a],g=s[a];g&&o!==g&&!(isArray$1(o)&&o.includes(g))&&(e[a]=o?[].concat(o,g):g)}else a!==""&&(e[a]=s[a])}return e}function invokeVNodeHook(r,e,n,s=null){callWithAsyncErrorHandling(r,e,7,[n,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,e,n){const s=r.type,a=(e?e.appContext:r.appContext)||emptyAppContext,o={uid:uid++,vnode:r,type:s,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,a),emitsOptions:normalizeEmitsOptions(s,a),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=emit.bind(null,o),r.ce&&r.ce(o),o}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=r=>{currentInstance=r,r.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,e=!1){isInSSRComponentSetup=e;const{props:n,children:s}=r.vnode,a=isStatefulComponent(r);initProps(r,n,a,e),initSlots(r,s);const o=a?setupStatefulComponent(r,e):void 0;return isInSSRComponentSetup=!1,o}function setupStatefulComponent(r,e){const n=r.type;r.accessCache=Object.create(null),r.proxy=markRaw(new Proxy(r.ctx,PublicInstanceProxyHandlers));const{setup:s}=n;if(s){const a=r.setupContext=s.length>1?createSetupContext(r):null;setCurrentInstance(r),pauseTracking();const o=callWithErrorHandling(s,r,0,[r.props,a]);if(resetTracking(),unsetCurrentInstance(),isPromise$1(o)){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(g=>{handleSetupResult(r,g,e)}).catch(g=>{handleError(g,r,0)});r.asyncDep=o}else handleSetupResult(r,o,e)}else finishComponentSetup(r,e)}function handleSetupResult(r,e,n){isFunction$1(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:isObject$1(e)&&(r.setupState=proxyRefs(e)),finishComponentSetup(r,n)}let compile;function finishComponentSetup(r,e,n){const s=r.type;if(!r.render){if(!e&&compile&&!s.render){const a=s.template||resolveMergedOptions(r).template;if(a){const{isCustomElement:o,compilerOptions:g}=r.appContext.config,{delimiters:b,compilerOptions:B}=s,N=extend(extend({isCustomElement:o,delimiters:b},g),B);s.render=compile(a,N)}}r.render=s.render||NOOP}setCurrentInstance(r),pauseTracking(),applyOptions(r),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(r){return new Proxy(r.attrs,{get(e,n){return track(r,"get","$attrs"),e[n]}})}function createSetupContext(r){const e=s=>{r.exposed=s||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(r))},slots:r.slots,emit:r.emit,expose:e}}function getExposeProxy(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](r)},has(e,n){return n in e||n in publicPropertiesMap}}))}function getComponentName(r,e=!0){return isFunction$1(r)?r.displayName||r.name:r.name||e&&r.__name}function isClassComponent(r){return isFunction$1(r)&&"__vccOpts"in r}const computed=(r,e)=>computed$1(r,e,isInSSRComponentSetup),ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version$1="3.2.47",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,e,n)=>{e.insertBefore(r,n||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,n,s)=>{const a=e?doc.createElementNS(svgNS,r):doc.createElement(r,n?{is:n}:void 0);return r==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,n,s,a,o){const g=n?n.previousSibling:e.lastChild;if(a&&(a===o||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===o||!(a=a.nextSibling)););else{templateContainer.innerHTML=s?`<svg>${r}</svg>`:r;const b=templateContainer.content;if(s){const B=b.firstChild;for(;B.firstChild;)b.appendChild(B.firstChild);b.removeChild(B)}e.insertBefore(b,n)}return[g?g.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function patchClass(r,e,n){const s=r._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?r.removeAttribute("class"):n?r.setAttribute("class",e):r.className=e}function patchStyle(r,e,n){const s=r.style,a=isString(n);if(n&&!a){if(e&&!isString(e))for(const o in e)n[o]==null&&setStyle(s,o,"");for(const o in n)setStyle(s,o,n[o])}else{const o=s.display;a?e!==n&&(s.cssText=n):e&&r.removeAttribute("style"),"_vod"in r&&(s.display=o)}}const importantRE=/\s*!important$/;function setStyle(r,e,n){if(isArray$1(n))n.forEach(s=>setStyle(r,e,s));else if(n==null&&(n=""),e.startsWith("--"))r.setProperty(e,n);else{const s=autoPrefix(r,e);importantRE.test(n)?r.setProperty(hyphenate(s),n.replace(importantRE,""),"important"):r[s]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,e){const n=prefixCache[e];if(n)return n;let s=camelize(e);if(s!=="filter"&&s in r)return prefixCache[e]=s;s=capitalize(s);for(let a=0;a<prefixes.length;a++){const o=prefixes[a]+s;if(o in r)return prefixCache[e]=o}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,e,n,s,a){if(s&&e.startsWith("xlink:"))n==null?r.removeAttributeNS(xlinkNS,e.slice(6,e.length)):r.setAttributeNS(xlinkNS,e,n);else{const o=isSpecialBooleanAttr(e);n==null||o&&!includeBooleanAttr(n)?r.removeAttribute(e):r.setAttribute(e,o?"":n)}}function patchDOMProp(r,e,n,s,a,o,g){if(e==="innerHTML"||e==="textContent"){s&&g(s,a,o),r[e]=n??"";return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=n;const B=n??"";(r.value!==B||r.tagName==="OPTION")&&(r.value=B),n==null&&r.removeAttribute(e);return}let b=!1;if(n===""||n==null){const B=typeof r[e];B==="boolean"?n=includeBooleanAttr(n):n==null&&B==="string"?(n="",b=!0):B==="number"&&(n=0,b=!0)}try{r[e]=n}catch{}b&&r.removeAttribute(e)}function addEventListener(r,e,n,s){r.addEventListener(e,n,s)}function removeEventListener(r,e,n,s){r.removeEventListener(e,n,s)}function patchEvent(r,e,n,s,a=null){const o=r._vei||(r._vei={}),g=o[e];if(s&&g)g.value=s;else{const[b,B]=parseName(e);if(s){const N=o[e]=createInvoker(s,a);addEventListener(r,b,N,B)}else g&&(removeEventListener(r,b,g,B),o[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let e;if(optionsModifierRE.test(r)){e={};let s;for(;s=r.match(optionsModifierRE);)r=r.slice(0,r.length-s[0].length),e[s[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,n.value),e,5,[s])};return n.value=r,n.attached=getNow(),n}function patchStopImmediatePropagation(r,e){if(isArray$1(e)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},e.map(s=>a=>!a._stopped&&s&&s(a))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(r,e,n,s,a=!1,o,g,b,B)=>{e==="class"?patchClass(r,s,a):e==="style"?patchStyle(r,n,s):isOn(e)?isModelListener(e)||patchEvent(r,e,n,s,g):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(r,e,s,a))?patchDOMProp(r,e,s,o,g,b,B):(e==="true-value"?r._trueValue=s:e==="false-value"&&(r._falseValue=s),patchAttr(r,e,s,a))};function shouldSetAsProp(r,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in r&&nativeOnRE.test(e)&&isFunction$1(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(n)?!1:e in r}const getModelAssigner=r=>{const e=r.props["onUpdate:modelValue"]||!1;return isArray$1(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(r){r.target.composing=!0}function onCompositionEnd(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vModelText={created(r,{modifiers:{lazy:e,trim:n,number:s}},a){r._assign=getModelAssigner(a);const o=s||a.props&&a.props.type==="number";addEventListener(r,e?"change":"input",g=>{if(g.target.composing)return;let b=r.value;n&&(b=b.trim()),o&&(b=looseToNumber(b)),r._assign(b)}),n&&addEventListener(r,"change",()=>{r.value=r.value.trim()}),e||(addEventListener(r,"compositionstart",onCompositionStart),addEventListener(r,"compositionend",onCompositionEnd),addEventListener(r,"change",onCompositionEnd))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,modifiers:{lazy:n,trim:s,number:a}},o){if(r._assign=getModelAssigner(o),r.composing||document.activeElement===r&&r.type!=="range"&&(n||s&&r.value.trim()===e||(a||r.type==="number")&&looseToNumber(r.value)===e))return;const g=e??"";r.value!==g&&(r.value=g)}},vModelCheckbox={deep:!0,created(r,e,n){r._assign=getModelAssigner(n),addEventListener(r,"change",()=>{const s=r._modelValue,a=getValue(r),o=r.checked,g=r._assign;if(isArray$1(s)){const b=looseIndexOf(s,a),B=b!==-1;if(o&&!B)g(s.concat(a));else if(!o&&B){const N=[...s];N.splice(b,1),g(N)}}else if(isSet(s)){const b=new Set(s);o?b.add(a):b.delete(a),g(b)}else g(getCheckboxValue(r,o))})},mounted:setChecked,beforeUpdate(r,e,n){r._assign=getModelAssigner(n),setChecked(r,e,n)}};function setChecked(r,{value:e,oldValue:n},s){r._modelValue=e,isArray$1(e)?r.checked=looseIndexOf(e,s.props.value)>-1:isSet(e)?r.checked=e.has(s.props.value):e!==n&&(r.checked=looseEqual(e,getCheckboxValue(r,!0)))}const vModelRadio={created(r,{value:e},n){r.checked=looseEqual(e,n.props.value),r._assign=getModelAssigner(n),addEventListener(r,"change",()=>{r._assign(getValue(r))})},beforeUpdate(r,{value:e,oldValue:n},s){r._assign=getModelAssigner(s),e!==n&&(r.checked=looseEqual(e,s.props.value))}},vModelSelect={deep:!0,created(r,{value:e,modifiers:{number:n}},s){const a=isSet(e);addEventListener(r,"change",()=>{const o=Array.prototype.filter.call(r.options,g=>g.selected).map(g=>n?looseToNumber(getValue(g)):getValue(g));r._assign(r.multiple?a?new Set(o):o:o[0])}),r._assign=getModelAssigner(s)},mounted(r,{value:e}){setSelected(r,e)},beforeUpdate(r,e,n){r._assign=getModelAssigner(n)},updated(r,{value:e}){setSelected(r,e)}};function setSelected(r,e){const n=r.multiple;if(!(n&&!isArray$1(e)&&!isSet(e))){for(let s=0,a=r.options.length;s<a;s++){const o=r.options[s],g=getValue(o);if(n)isArray$1(e)?o.selected=looseIndexOf(e,g)>-1:o.selected=e.has(g);else if(looseEqual(getValue(o),e)){r.selectedIndex!==s&&(r.selectedIndex=s);return}}!n&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function getValue(r){return"_value"in r?r._value:r.value}function getCheckboxValue(r,e){const n=e?"_trueValue":"_falseValue";return n in r?r[n]:e}const vModelDynamic={created(r,e,n){callModelHook(r,e,n,null,"created")},mounted(r,e,n){callModelHook(r,e,n,null,"mounted")},beforeUpdate(r,e,n,s){callModelHook(r,e,n,s,"beforeUpdate")},updated(r,e,n,s){callModelHook(r,e,n,s,"updated")}};function resolveDynamicModel(r,e){switch(r){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(r,e,n,s,a){const g=resolveDynamicModel(r.tagName,n.props&&n.props.type)[a];g&&g(r,e,n,s)}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const e=ensureRenderer().createApp(...r),{mount:n}=e;return e.mount=s=>{const a=normalizeContainer(s);if(!a)return;const o=e._component;!isFunction$1(o)&&!o.render&&!o.template&&(o.template=a.innerHTML),a.innerHTML="";const g=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),g},e};function normalizeContainer(r){return isString(r)?document.querySelector(r):r}var isVue2=!1;/*!
  * pinia v2.0.30
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=r=>activePinia=r,piniaSymbol=Symbol();function isPlainObject(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var MutationType;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const r=effectScope(!0),e=r.run(()=>ref({}));let n=[],s=[];const a=markRaw({install(o){setActivePinia(a),a._a=o,o.provide(piniaSymbol,a),o.config.globalProperties.$pinia=a,s.forEach(g=>n.push(g)),s=[]},use(o){return!this._a&&!isVue2?s.push(o):n.push(o),this},_p:n,_a:null,_e:r,_s:new Map,state:e});return a}const noop$1=()=>{};function addSubscription(r,e,n,s=noop$1){r.push(e);const a=()=>{const o=r.indexOf(e);o>-1&&(r.splice(o,1),s())};return!n&&getCurrentScope()&&onScopeDispose(a),a}function triggerSubscriptions(r,...e){r.slice().forEach(n=>{n(...e)})}function mergeReactiveObjects(r,e){r instanceof Map&&e instanceof Map&&e.forEach((n,s)=>r.set(s,n)),r instanceof Set&&e instanceof Set&&e.forEach(r.add,r);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],a=r[n];isPlainObject(a)&&isPlainObject(s)&&r.hasOwnProperty(n)&&!isRef(s)&&!isReactive(s)?r[n]=mergeReactiveObjects(a,s):r[n]=s}return r}const skipHydrateSymbol=Symbol();function shouldHydrate(r){return!isPlainObject(r)||!r.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(r){return!!(isRef(r)&&r.effect)}function createOptionsStore(r,e,n,s){const{state:a,actions:o,getters:g}=e,b=n.state.value[r];let B;function N(){b||(n.state.value[r]=a?a():{});const I=toRefs(n.state.value[r]);return assign(I,o,Object.keys(g||{}).reduce((U,H)=>(U[H]=markRaw(computed(()=>{setActivePinia(n);const Q=n._s.get(r);return g[H].call(Q,Q)})),U),{}))}return B=createSetupStore(r,N,e,n,s,!0),B.$reset=function(){const U=a?a():{};this.$patch(H=>{assign(H,U)})},B}function createSetupStore(r,e,n={},s,a,o){let g;const b=assign({actions:{}},n),B={deep:!0};let N,I,U=markRaw([]),H=markRaw([]),Q;const $t=s.state.value[r];!o&&!$t&&(s.state.value[r]={}),ref({});let Dt;function xt(ne){let At;N=I=!1,typeof ne=="function"?(ne(s.state.value[r]),At={type:MutationType.patchFunction,storeId:r,events:Q}):(mergeReactiveObjects(s.state.value[r],ne),At={type:MutationType.patchObject,payload:ne,storeId:r,events:Q});const me=Dt=Symbol();nextTick().then(()=>{Dt===me&&(N=!0)}),I=!0,triggerSubscriptions(U,At,s.state.value[r])}const Ut=noop$1;function we(){g.stop(),U=[],H=[],s._s.delete(r)}function Mt(ne,At){return function(){setActivePinia(s);const me=Array.from(arguments),A=[],c=[];function u(d){A.push(d)}function l(d){c.push(d)}triggerSubscriptions(H,{args:me,name:ne,store:Yt,after:u,onError:l});let h;try{h=At.apply(this&&this.$id===r?this:Yt,me)}catch(d){throw triggerSubscriptions(c,d),d}return h instanceof Promise?h.then(d=>(triggerSubscriptions(A,d),d)).catch(d=>(triggerSubscriptions(c,d),Promise.reject(d))):(triggerSubscriptions(A,h),h)}}const ae={_p:s,$id:r,$onAction:addSubscription.bind(null,H),$patch:xt,$reset:Ut,$subscribe(ne,At={}){const me=addSubscription(U,ne,At.detached,()=>A()),A=g.run(()=>watch(()=>s.state.value[r],c=>{(At.flush==="sync"?I:N)&&ne({storeId:r,type:MutationType.direct,events:Q},c)},assign({},B,At)));return me},$dispose:we},Yt=reactive(ae);s._s.set(r,Yt);const ve=s._e.run(()=>(g=effectScope(),g.run(()=>e())));for(const ne in ve){const At=ve[ne];if(isRef(At)&&!isComputed(At)||isReactive(At))o||($t&&shouldHydrate(At)&&(isRef(At)?At.value=$t[ne]:mergeReactiveObjects(At,$t[ne])),s.state.value[r][ne]=At);else if(typeof At=="function"){const me=Mt(ne,At);ve[ne]=me,b.actions[ne]=At}}return assign(Yt,ve),assign(toRaw(Yt),ve),Object.defineProperty(Yt,"$state",{get:()=>s.state.value[r],set:ne=>{xt(At=>{assign(At,ne)})}}),s._p.forEach(ne=>{assign(Yt,g.run(()=>ne({store:Yt,app:s._a,pinia:s,options:b})))}),$t&&o&&n.hydrate&&n.hydrate(Yt.$state,$t),N=!0,I=!0,Yt}function defineStore(r,e,n){let s,a;const o=typeof e=="function";typeof r=="string"?(s=r,a=o?n:e):(a=r,s=r.id);function g(b,B){const N=getCurrentInstance();return b=b||N&&inject(piniaSymbol,null),b&&setActivePinia(b),b=activePinia,b._s.has(s)||(o?createSetupStore(s,e,a,b):createOptionsStore(s,a,b)),b._s.get(s)}return g.$id=s,g}function mapState(r,e){return Array.isArray(e)?e.reduce((n,s)=>(n[s]=function(){return r(this.$pinia)[s]},n),{}):Object.keys(e).reduce((n,s)=>(n[s]=function(){const a=r(this.$pinia),o=e[s];return typeof o=="function"?o.call(this,a):a[o]},n),{})}function mapActions(r,e){return Array.isArray(e)?e.reduce((n,s)=>(n[s]=function(...a){return r(this.$pinia)[s](...a)},n),{}):Object.keys(e).reduce((n,s)=>(n[s]=function(...a){return r(this.$pinia)[e[s]](...a)},n),{})}var CONNECT_EVENT_ERROR_CODES;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",r[r.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(CONNECT_EVENT_ERROR_CODES||(CONNECT_EVENT_ERROR_CODES={}));var CONNECT_ITEM_ERROR_CODES;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(CONNECT_ITEM_ERROR_CODES||(CONNECT_ITEM_ERROR_CODES={}));var SEND_TRANSACTION_ERROR_CODES;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(SEND_TRANSACTION_ERROR_CODES||(SEND_TRANSACTION_ERROR_CODES={}));var SIGN_DATA_ERROR_CODES;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(SIGN_DATA_ERROR_CODES||(SIGN_DATA_ERROR_CODES={}));var DISCONNECT_ERROR_CODES;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(DISCONNECT_ERROR_CODES||(DISCONNECT_ERROR_CODES={}));var CHAIN;(function(r){r.MAINNET="-239",r.TESTNET="-3"})(CHAIN||(CHAIN={}));var naclUtilExports={},naclUtil={get exports(){return naclUtilExports},set exports(r){naclUtilExports=r}};(function(r){(function(e,n){r.exports?r.exports=n():(e.nacl||(e.nacl={}),e.nacl.util=n())})(commonjsGlobal,function(){var e={};function n(s){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(s))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(s){if(typeof s!="string")throw new TypeError("expected string");var a,o=unescape(encodeURIComponent(s)),g=new Uint8Array(o.length);for(a=0;a<o.length;a++)g[a]=o.charCodeAt(a);return g},e.encodeUTF8=function(s){var a,o=[];for(a=0;a<s.length;a++)o.push(String.fromCharCode(s[a]));return decodeURIComponent(escape(o.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(s){return Buffer.from(s).toString("base64")},e.decodeBase64=function(s){return n(s),new Uint8Array(Array.prototype.slice.call(Buffer.from(s,"base64"),0))}):(e.encodeBase64=function(s){return new Buffer(s).toString("base64")},e.decodeBase64=function(s){return n(s),new Uint8Array(Array.prototype.slice.call(new Buffer(s,"base64"),0))}):(e.encodeBase64=function(s){var a,o=[],g=s.length;for(a=0;a<g;a++)o.push(String.fromCharCode(s[a]));return btoa(o.join(""))},e.decodeBase64=function(s){n(s);var a,o=atob(s),g=new Uint8Array(o.length);for(a=0;a<o.length;a++)g[a]=o.charCodeAt(a);return g}),e})})(naclUtil);const nacl$6=naclUtilExports;function encodeUint8Array(r,e){const n=nacl$6.encodeBase64(r);return e?encodeURIComponent(n):n}function decodeToUint8Array(r,e){return e&&(r=decodeURIComponent(r)),nacl$6.decodeBase64(r)}function encode(r,e=!1){let n;return r instanceof Uint8Array?n=r:(typeof r!="string"&&(r=JSON.stringify(r)),n=nacl$6.decodeUTF8(r)),encodeUint8Array(n,e)}function decode(r,e=!1){const n=decodeToUint8Array(r,e);return{toString(){return nacl$6.encodeUTF8(n)},toObject(){try{return JSON.parse(nacl$6.encodeUTF8(n))}catch{return null}},toUint8Array(){return n}}}const Base64={encode,decode};function concatUint8Arrays(r,e){const n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}function splitToUint8Arrays(r,e){if(e>=r.length)throw new Error("Index is out of buffer");const n=r.slice(0,e),s=r.slice(e);return[n,s]}function toHexString(r){let e="";return r.forEach(n=>{e+=("0"+(n&255).toString(16)).slice(-2)}),e}function hexToByteArray(r){if(r.length%2!==0)throw new Error(`Cannot convert ${r} to bytesArray`);const e=new Uint8Array(r.length/2);for(let n=0;n<r.length;n+=2)e[n/2]=parseInt(r.slice(n,n+2),16);return e}function isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFastExports={},naclFast={get exports(){return naclFastExports},set exports(r){naclFastExports=r}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3$1=getAugmentedNamespace(__viteBrowserExternal$1);(function(r){(function(e){var n=function(S){var $,T=new Float64Array(16);if(S)for($=0;$<S.length;$++)T[$]=S[$];return T},s=function(){throw new Error("no PRNG")},a=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var g=n(),b=n([1]),B=n([56129,1]),N=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),I=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),U=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),H=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Q=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $t(S,$,T,w){S[$]=T>>24&255,S[$+1]=T>>16&255,S[$+2]=T>>8&255,S[$+3]=T&255,S[$+4]=w>>24&255,S[$+5]=w>>16&255,S[$+6]=w>>8&255,S[$+7]=w&255}function Dt(S,$,T,w,D){var V,W=0;for(V=0;V<D;V++)W|=S[$+V]^T[w+V];return(1&W-1>>>8)-1}function xt(S,$,T,w){return Dt(S,$,T,w,16)}function Ut(S,$,T,w){return Dt(S,$,T,w,32)}function we(S,$,T,w){for(var D=w[0]&255|(w[1]&255)<<8|(w[2]&255)<<16|(w[3]&255)<<24,V=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,W=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,z=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,ut=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,Bt=w[4]&255|(w[5]&255)<<8|(w[6]&255)<<16|(w[7]&255)<<24,It=$[0]&255|($[1]&255)<<8|($[2]&255)<<16|($[3]&255)<<24,de=$[4]&255|($[5]&255)<<8|($[6]&255)<<16|($[7]&255)<<24,Nt=$[8]&255|($[9]&255)<<8|($[10]&255)<<16|($[11]&255)<<24,zt=$[12]&255|($[13]&255)<<8|($[14]&255)<<16|($[15]&255)<<24,Zt=w[8]&255|(w[9]&255)<<8|(w[10]&255)<<16|(w[11]&255)<<24,oe=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,ie=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,Jt=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,ee=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Qt=w[12]&255|(w[13]&255)<<8|(w[14]&255)<<16|(w[15]&255)<<24,Ot=D,qt=V,Rt=W,Pt=z,kt=ut,Ft=Bt,J=It,it=de,mt=Nt,ht=zt,dt=Zt,Ct=oe,ce=ie,pe=Jt,ye=ee,ge=Qt,L,Ee=0;Ee<20;Ee+=2)L=Ot+ce|0,kt^=L<<7|L>>>32-7,L=kt+Ot|0,mt^=L<<9|L>>>32-9,L=mt+kt|0,ce^=L<<13|L>>>32-13,L=ce+mt|0,Ot^=L<<18|L>>>32-18,L=Ft+qt|0,ht^=L<<7|L>>>32-7,L=ht+Ft|0,pe^=L<<9|L>>>32-9,L=pe+ht|0,qt^=L<<13|L>>>32-13,L=qt+pe|0,Ft^=L<<18|L>>>32-18,L=dt+J|0,ye^=L<<7|L>>>32-7,L=ye+dt|0,Rt^=L<<9|L>>>32-9,L=Rt+ye|0,J^=L<<13|L>>>32-13,L=J+Rt|0,dt^=L<<18|L>>>32-18,L=ge+Ct|0,Pt^=L<<7|L>>>32-7,L=Pt+ge|0,it^=L<<9|L>>>32-9,L=it+Pt|0,Ct^=L<<13|L>>>32-13,L=Ct+it|0,ge^=L<<18|L>>>32-18,L=Ot+Pt|0,qt^=L<<7|L>>>32-7,L=qt+Ot|0,Rt^=L<<9|L>>>32-9,L=Rt+qt|0,Pt^=L<<13|L>>>32-13,L=Pt+Rt|0,Ot^=L<<18|L>>>32-18,L=Ft+kt|0,J^=L<<7|L>>>32-7,L=J+Ft|0,it^=L<<9|L>>>32-9,L=it+J|0,kt^=L<<13|L>>>32-13,L=kt+it|0,Ft^=L<<18|L>>>32-18,L=dt+ht|0,Ct^=L<<7|L>>>32-7,L=Ct+dt|0,mt^=L<<9|L>>>32-9,L=mt+Ct|0,ht^=L<<13|L>>>32-13,L=ht+mt|0,dt^=L<<18|L>>>32-18,L=ge+ye|0,ce^=L<<7|L>>>32-7,L=ce+ge|0,pe^=L<<9|L>>>32-9,L=pe+ce|0,ye^=L<<13|L>>>32-13,L=ye+pe|0,ge^=L<<18|L>>>32-18;Ot=Ot+D|0,qt=qt+V|0,Rt=Rt+W|0,Pt=Pt+z|0,kt=kt+ut|0,Ft=Ft+Bt|0,J=J+It|0,it=it+de|0,mt=mt+Nt|0,ht=ht+zt|0,dt=dt+Zt|0,Ct=Ct+oe|0,ce=ce+ie|0,pe=pe+Jt|0,ye=ye+ee|0,ge=ge+Qt|0,S[0]=Ot>>>0&255,S[1]=Ot>>>8&255,S[2]=Ot>>>16&255,S[3]=Ot>>>24&255,S[4]=qt>>>0&255,S[5]=qt>>>8&255,S[6]=qt>>>16&255,S[7]=qt>>>24&255,S[8]=Rt>>>0&255,S[9]=Rt>>>8&255,S[10]=Rt>>>16&255,S[11]=Rt>>>24&255,S[12]=Pt>>>0&255,S[13]=Pt>>>8&255,S[14]=Pt>>>16&255,S[15]=Pt>>>24&255,S[16]=kt>>>0&255,S[17]=kt>>>8&255,S[18]=kt>>>16&255,S[19]=kt>>>24&255,S[20]=Ft>>>0&255,S[21]=Ft>>>8&255,S[22]=Ft>>>16&255,S[23]=Ft>>>24&255,S[24]=J>>>0&255,S[25]=J>>>8&255,S[26]=J>>>16&255,S[27]=J>>>24&255,S[28]=it>>>0&255,S[29]=it>>>8&255,S[30]=it>>>16&255,S[31]=it>>>24&255,S[32]=mt>>>0&255,S[33]=mt>>>8&255,S[34]=mt>>>16&255,S[35]=mt>>>24&255,S[36]=ht>>>0&255,S[37]=ht>>>8&255,S[38]=ht>>>16&255,S[39]=ht>>>24&255,S[40]=dt>>>0&255,S[41]=dt>>>8&255,S[42]=dt>>>16&255,S[43]=dt>>>24&255,S[44]=Ct>>>0&255,S[45]=Ct>>>8&255,S[46]=Ct>>>16&255,S[47]=Ct>>>24&255,S[48]=ce>>>0&255,S[49]=ce>>>8&255,S[50]=ce>>>16&255,S[51]=ce>>>24&255,S[52]=pe>>>0&255,S[53]=pe>>>8&255,S[54]=pe>>>16&255,S[55]=pe>>>24&255,S[56]=ye>>>0&255,S[57]=ye>>>8&255,S[58]=ye>>>16&255,S[59]=ye>>>24&255,S[60]=ge>>>0&255,S[61]=ge>>>8&255,S[62]=ge>>>16&255,S[63]=ge>>>24&255}function Mt(S,$,T,w){for(var D=w[0]&255|(w[1]&255)<<8|(w[2]&255)<<16|(w[3]&255)<<24,V=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,W=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,z=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,ut=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,Bt=w[4]&255|(w[5]&255)<<8|(w[6]&255)<<16|(w[7]&255)<<24,It=$[0]&255|($[1]&255)<<8|($[2]&255)<<16|($[3]&255)<<24,de=$[4]&255|($[5]&255)<<8|($[6]&255)<<16|($[7]&255)<<24,Nt=$[8]&255|($[9]&255)<<8|($[10]&255)<<16|($[11]&255)<<24,zt=$[12]&255|($[13]&255)<<8|($[14]&255)<<16|($[15]&255)<<24,Zt=w[8]&255|(w[9]&255)<<8|(w[10]&255)<<16|(w[11]&255)<<24,oe=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,ie=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,Jt=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,ee=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Qt=w[12]&255|(w[13]&255)<<8|(w[14]&255)<<16|(w[15]&255)<<24,Ot=D,qt=V,Rt=W,Pt=z,kt=ut,Ft=Bt,J=It,it=de,mt=Nt,ht=zt,dt=Zt,Ct=oe,ce=ie,pe=Jt,ye=ee,ge=Qt,L,Ee=0;Ee<20;Ee+=2)L=Ot+ce|0,kt^=L<<7|L>>>32-7,L=kt+Ot|0,mt^=L<<9|L>>>32-9,L=mt+kt|0,ce^=L<<13|L>>>32-13,L=ce+mt|0,Ot^=L<<18|L>>>32-18,L=Ft+qt|0,ht^=L<<7|L>>>32-7,L=ht+Ft|0,pe^=L<<9|L>>>32-9,L=pe+ht|0,qt^=L<<13|L>>>32-13,L=qt+pe|0,Ft^=L<<18|L>>>32-18,L=dt+J|0,ye^=L<<7|L>>>32-7,L=ye+dt|0,Rt^=L<<9|L>>>32-9,L=Rt+ye|0,J^=L<<13|L>>>32-13,L=J+Rt|0,dt^=L<<18|L>>>32-18,L=ge+Ct|0,Pt^=L<<7|L>>>32-7,L=Pt+ge|0,it^=L<<9|L>>>32-9,L=it+Pt|0,Ct^=L<<13|L>>>32-13,L=Ct+it|0,ge^=L<<18|L>>>32-18,L=Ot+Pt|0,qt^=L<<7|L>>>32-7,L=qt+Ot|0,Rt^=L<<9|L>>>32-9,L=Rt+qt|0,Pt^=L<<13|L>>>32-13,L=Pt+Rt|0,Ot^=L<<18|L>>>32-18,L=Ft+kt|0,J^=L<<7|L>>>32-7,L=J+Ft|0,it^=L<<9|L>>>32-9,L=it+J|0,kt^=L<<13|L>>>32-13,L=kt+it|0,Ft^=L<<18|L>>>32-18,L=dt+ht|0,Ct^=L<<7|L>>>32-7,L=Ct+dt|0,mt^=L<<9|L>>>32-9,L=mt+Ct|0,ht^=L<<13|L>>>32-13,L=ht+mt|0,dt^=L<<18|L>>>32-18,L=ge+ye|0,ce^=L<<7|L>>>32-7,L=ce+ge|0,pe^=L<<9|L>>>32-9,L=pe+ce|0,ye^=L<<13|L>>>32-13,L=ye+pe|0,ge^=L<<18|L>>>32-18;S[0]=Ot>>>0&255,S[1]=Ot>>>8&255,S[2]=Ot>>>16&255,S[3]=Ot>>>24&255,S[4]=Ft>>>0&255,S[5]=Ft>>>8&255,S[6]=Ft>>>16&255,S[7]=Ft>>>24&255,S[8]=dt>>>0&255,S[9]=dt>>>8&255,S[10]=dt>>>16&255,S[11]=dt>>>24&255,S[12]=ge>>>0&255,S[13]=ge>>>8&255,S[14]=ge>>>16&255,S[15]=ge>>>24&255,S[16]=J>>>0&255,S[17]=J>>>8&255,S[18]=J>>>16&255,S[19]=J>>>24&255,S[20]=it>>>0&255,S[21]=it>>>8&255,S[22]=it>>>16&255,S[23]=it>>>24&255,S[24]=mt>>>0&255,S[25]=mt>>>8&255,S[26]=mt>>>16&255,S[27]=mt>>>24&255,S[28]=ht>>>0&255,S[29]=ht>>>8&255,S[30]=ht>>>16&255,S[31]=ht>>>24&255}function ae(S,$,T,w){we(S,$,T,w)}function Yt(S,$,T,w){Mt(S,$,T,w)}var ve=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ne(S,$,T,w,D,V,W){var z=new Uint8Array(16),ut=new Uint8Array(64),Bt,It;for(It=0;It<16;It++)z[It]=0;for(It=0;It<8;It++)z[It]=V[It];for(;D>=64;){for(ae(ut,z,W,ve),It=0;It<64;It++)S[$+It]=T[w+It]^ut[It];for(Bt=1,It=8;It<16;It++)Bt=Bt+(z[It]&255)|0,z[It]=Bt&255,Bt>>>=8;D-=64,$+=64,w+=64}if(D>0)for(ae(ut,z,W,ve),It=0;It<D;It++)S[$+It]=T[w+It]^ut[It];return 0}function At(S,$,T,w,D){var V=new Uint8Array(16),W=new Uint8Array(64),z,ut;for(ut=0;ut<16;ut++)V[ut]=0;for(ut=0;ut<8;ut++)V[ut]=w[ut];for(;T>=64;){for(ae(W,V,D,ve),ut=0;ut<64;ut++)S[$+ut]=W[ut];for(z=1,ut=8;ut<16;ut++)z=z+(V[ut]&255)|0,V[ut]=z&255,z>>>=8;T-=64,$+=64}if(T>0)for(ae(W,V,D,ve),ut=0;ut<T;ut++)S[$+ut]=W[ut];return 0}function me(S,$,T,w,D){var V=new Uint8Array(32);Yt(V,w,D,ve);for(var W=new Uint8Array(8),z=0;z<8;z++)W[z]=w[z+16];return At(S,$,T,W,V)}function A(S,$,T,w,D,V,W){var z=new Uint8Array(32);Yt(z,V,W,ve);for(var ut=new Uint8Array(8),Bt=0;Bt<8;Bt++)ut[Bt]=V[Bt+16];return ne(S,$,T,w,D,ut,z)}var c=function(S){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var $,T,w,D,V,W,z,ut;$=S[0]&255|(S[1]&255)<<8,this.r[0]=$&8191,T=S[2]&255|(S[3]&255)<<8,this.r[1]=($>>>13|T<<3)&8191,w=S[4]&255|(S[5]&255)<<8,this.r[2]=(T>>>10|w<<6)&7939,D=S[6]&255|(S[7]&255)<<8,this.r[3]=(w>>>7|D<<9)&8191,V=S[8]&255|(S[9]&255)<<8,this.r[4]=(D>>>4|V<<12)&255,this.r[5]=V>>>1&8190,W=S[10]&255|(S[11]&255)<<8,this.r[6]=(V>>>14|W<<2)&8191,z=S[12]&255|(S[13]&255)<<8,this.r[7]=(W>>>11|z<<5)&8065,ut=S[14]&255|(S[15]&255)<<8,this.r[8]=(z>>>8|ut<<8)&8191,this.r[9]=ut>>>5&127,this.pad[0]=S[16]&255|(S[17]&255)<<8,this.pad[1]=S[18]&255|(S[19]&255)<<8,this.pad[2]=S[20]&255|(S[21]&255)<<8,this.pad[3]=S[22]&255|(S[23]&255)<<8,this.pad[4]=S[24]&255|(S[25]&255)<<8,this.pad[5]=S[26]&255|(S[27]&255)<<8,this.pad[6]=S[28]&255|(S[29]&255)<<8,this.pad[7]=S[30]&255|(S[31]&255)<<8};c.prototype.blocks=function(S,$,T){for(var w=this.fin?0:2048,D,V,W,z,ut,Bt,It,de,Nt,zt,Zt,oe,ie,Jt,ee,Qt,Ot,qt,Rt,Pt=this.h[0],kt=this.h[1],Ft=this.h[2],J=this.h[3],it=this.h[4],mt=this.h[5],ht=this.h[6],dt=this.h[7],Ct=this.h[8],ce=this.h[9],pe=this.r[0],ye=this.r[1],ge=this.r[2],L=this.r[3],Ee=this.r[4],Be=this.r[5],Se=this.r[6],be=this.r[7],xe=this.r[8],Ae=this.r[9];T>=16;)D=S[$+0]&255|(S[$+1]&255)<<8,Pt+=D&8191,V=S[$+2]&255|(S[$+3]&255)<<8,kt+=(D>>>13|V<<3)&8191,W=S[$+4]&255|(S[$+5]&255)<<8,Ft+=(V>>>10|W<<6)&8191,z=S[$+6]&255|(S[$+7]&255)<<8,J+=(W>>>7|z<<9)&8191,ut=S[$+8]&255|(S[$+9]&255)<<8,it+=(z>>>4|ut<<12)&8191,mt+=ut>>>1&8191,Bt=S[$+10]&255|(S[$+11]&255)<<8,ht+=(ut>>>14|Bt<<2)&8191,It=S[$+12]&255|(S[$+13]&255)<<8,dt+=(Bt>>>11|It<<5)&8191,de=S[$+14]&255|(S[$+15]&255)<<8,Ct+=(It>>>8|de<<8)&8191,ce+=de>>>5|w,Nt=0,zt=Nt,zt+=Pt*pe,zt+=kt*(5*Ae),zt+=Ft*(5*xe),zt+=J*(5*be),zt+=it*(5*Se),Nt=zt>>>13,zt&=8191,zt+=mt*(5*Be),zt+=ht*(5*Ee),zt+=dt*(5*L),zt+=Ct*(5*ge),zt+=ce*(5*ye),Nt+=zt>>>13,zt&=8191,Zt=Nt,Zt+=Pt*ye,Zt+=kt*pe,Zt+=Ft*(5*Ae),Zt+=J*(5*xe),Zt+=it*(5*be),Nt=Zt>>>13,Zt&=8191,Zt+=mt*(5*Se),Zt+=ht*(5*Be),Zt+=dt*(5*Ee),Zt+=Ct*(5*L),Zt+=ce*(5*ge),Nt+=Zt>>>13,Zt&=8191,oe=Nt,oe+=Pt*ge,oe+=kt*ye,oe+=Ft*pe,oe+=J*(5*Ae),oe+=it*(5*xe),Nt=oe>>>13,oe&=8191,oe+=mt*(5*be),oe+=ht*(5*Se),oe+=dt*(5*Be),oe+=Ct*(5*Ee),oe+=ce*(5*L),Nt+=oe>>>13,oe&=8191,ie=Nt,ie+=Pt*L,ie+=kt*ge,ie+=Ft*ye,ie+=J*pe,ie+=it*(5*Ae),Nt=ie>>>13,ie&=8191,ie+=mt*(5*xe),ie+=ht*(5*be),ie+=dt*(5*Se),ie+=Ct*(5*Be),ie+=ce*(5*Ee),Nt+=ie>>>13,ie&=8191,Jt=Nt,Jt+=Pt*Ee,Jt+=kt*L,Jt+=Ft*ge,Jt+=J*ye,Jt+=it*pe,Nt=Jt>>>13,Jt&=8191,Jt+=mt*(5*Ae),Jt+=ht*(5*xe),Jt+=dt*(5*be),Jt+=Ct*(5*Se),Jt+=ce*(5*Be),Nt+=Jt>>>13,Jt&=8191,ee=Nt,ee+=Pt*Be,ee+=kt*Ee,ee+=Ft*L,ee+=J*ge,ee+=it*ye,Nt=ee>>>13,ee&=8191,ee+=mt*pe,ee+=ht*(5*Ae),ee+=dt*(5*xe),ee+=Ct*(5*be),ee+=ce*(5*Se),Nt+=ee>>>13,ee&=8191,Qt=Nt,Qt+=Pt*Se,Qt+=kt*Be,Qt+=Ft*Ee,Qt+=J*L,Qt+=it*ge,Nt=Qt>>>13,Qt&=8191,Qt+=mt*ye,Qt+=ht*pe,Qt+=dt*(5*Ae),Qt+=Ct*(5*xe),Qt+=ce*(5*be),Nt+=Qt>>>13,Qt&=8191,Ot=Nt,Ot+=Pt*be,Ot+=kt*Se,Ot+=Ft*Be,Ot+=J*Ee,Ot+=it*L,Nt=Ot>>>13,Ot&=8191,Ot+=mt*ge,Ot+=ht*ye,Ot+=dt*pe,Ot+=Ct*(5*Ae),Ot+=ce*(5*xe),Nt+=Ot>>>13,Ot&=8191,qt=Nt,qt+=Pt*xe,qt+=kt*be,qt+=Ft*Se,qt+=J*Be,qt+=it*Ee,Nt=qt>>>13,qt&=8191,qt+=mt*L,qt+=ht*ge,qt+=dt*ye,qt+=Ct*pe,qt+=ce*(5*Ae),Nt+=qt>>>13,qt&=8191,Rt=Nt,Rt+=Pt*Ae,Rt+=kt*xe,Rt+=Ft*be,Rt+=J*Se,Rt+=it*Be,Nt=Rt>>>13,Rt&=8191,Rt+=mt*Ee,Rt+=ht*L,Rt+=dt*ge,Rt+=Ct*ye,Rt+=ce*pe,Nt+=Rt>>>13,Rt&=8191,Nt=(Nt<<2)+Nt|0,Nt=Nt+zt|0,zt=Nt&8191,Nt=Nt>>>13,Zt+=Nt,Pt=zt,kt=Zt,Ft=oe,J=ie,it=Jt,mt=ee,ht=Qt,dt=Ot,Ct=qt,ce=Rt,$+=16,T-=16;this.h[0]=Pt,this.h[1]=kt,this.h[2]=Ft,this.h[3]=J,this.h[4]=it,this.h[5]=mt,this.h[6]=ht,this.h[7]=dt,this.h[8]=Ct,this.h[9]=ce},c.prototype.finish=function(S,$){var T=new Uint16Array(10),w,D,V,W;if(this.leftover){for(W=this.leftover,this.buffer[W++]=1;W<16;W++)this.buffer[W]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(w=this.h[1]>>>13,this.h[1]&=8191,W=2;W<10;W++)this.h[W]+=w,w=this.h[W]>>>13,this.h[W]&=8191;for(this.h[0]+=w*5,w=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=w,w=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=w,T[0]=this.h[0]+5,w=T[0]>>>13,T[0]&=8191,W=1;W<10;W++)T[W]=this.h[W]+w,w=T[W]>>>13,T[W]&=8191;for(T[9]-=1<<13,D=(w^1)-1,W=0;W<10;W++)T[W]&=D;for(D=~D,W=0;W<10;W++)this.h[W]=this.h[W]&D|T[W];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,V=this.h[0]+this.pad[0],this.h[0]=V&65535,W=1;W<8;W++)V=(this.h[W]+this.pad[W]|0)+(V>>>16)|0,this.h[W]=V&65535;S[$+0]=this.h[0]>>>0&255,S[$+1]=this.h[0]>>>8&255,S[$+2]=this.h[1]>>>0&255,S[$+3]=this.h[1]>>>8&255,S[$+4]=this.h[2]>>>0&255,S[$+5]=this.h[2]>>>8&255,S[$+6]=this.h[3]>>>0&255,S[$+7]=this.h[3]>>>8&255,S[$+8]=this.h[4]>>>0&255,S[$+9]=this.h[4]>>>8&255,S[$+10]=this.h[5]>>>0&255,S[$+11]=this.h[5]>>>8&255,S[$+12]=this.h[6]>>>0&255,S[$+13]=this.h[6]>>>8&255,S[$+14]=this.h[7]>>>0&255,S[$+15]=this.h[7]>>>8&255},c.prototype.update=function(S,$,T){var w,D;if(this.leftover){for(D=16-this.leftover,D>T&&(D=T),w=0;w<D;w++)this.buffer[this.leftover+w]=S[$+w];if(T-=D,$+=D,this.leftover+=D,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(T>=16&&(D=T-T%16,this.blocks(S,$,D),$+=D,T-=D),T){for(w=0;w<T;w++)this.buffer[this.leftover+w]=S[$+w];this.leftover+=T}};function u(S,$,T,w,D,V){var W=new c(V);return W.update(T,w,D),W.finish(S,$),0}function l(S,$,T,w,D,V){var W=new Uint8Array(16);return u(W,0,T,w,D,V),xt(S,$,W,0)}function h(S,$,T,w,D){var V;if(T<32)return-1;for(A(S,0,$,0,T,w,D),u(S,16,S,32,T-32,S),V=0;V<16;V++)S[V]=0;return 0}function d(S,$,T,w,D){var V,W=new Uint8Array(32);if(T<32||(me(W,0,32,w,D),l($,16,$,32,T-32,W)!==0))return-1;for(A(S,0,$,0,T,w,D),V=0;V<32;V++)S[V]=0;return 0}function y(S,$){var T;for(T=0;T<16;T++)S[T]=$[T]|0}function C(S){var $,T,w=1;for($=0;$<16;$++)T=S[$]+w+65535,w=Math.floor(T/65536),S[$]=T-w*65536;S[0]+=w-1+37*(w-1)}function m(S,$,T){for(var w,D=~(T-1),V=0;V<16;V++)w=D&(S[V]^$[V]),S[V]^=w,$[V]^=w}function f(S,$){var T,w,D,V=n(),W=n();for(T=0;T<16;T++)W[T]=$[T];for(C(W),C(W),C(W),w=0;w<2;w++){for(V[0]=W[0]-65517,T=1;T<15;T++)V[T]=W[T]-65535-(V[T-1]>>16&1),V[T-1]&=65535;V[15]=W[15]-32767-(V[14]>>16&1),D=V[15]>>16&1,V[14]&=65535,m(W,V,1-D)}for(T=0;T<16;T++)S[2*T]=W[T]&255,S[2*T+1]=W[T]>>8}function v(S,$){var T=new Uint8Array(32),w=new Uint8Array(32);return f(T,S),f(w,$),Ut(T,0,w,0)}function E(S){var $=new Uint8Array(32);return f($,S),$[0]&1}function F(S,$){var T;for(T=0;T<16;T++)S[T]=$[2*T]+($[2*T+1]<<8);S[15]&=32767}function K(S,$,T){for(var w=0;w<16;w++)S[w]=$[w]+T[w]}function X(S,$,T){for(var w=0;w<16;w++)S[w]=$[w]-T[w]}function tt(S,$,T){var w,D,V=0,W=0,z=0,ut=0,Bt=0,It=0,de=0,Nt=0,zt=0,Zt=0,oe=0,ie=0,Jt=0,ee=0,Qt=0,Ot=0,qt=0,Rt=0,Pt=0,kt=0,Ft=0,J=0,it=0,mt=0,ht=0,dt=0,Ct=0,ce=0,pe=0,ye=0,ge=0,L=T[0],Ee=T[1],Be=T[2],Se=T[3],be=T[4],xe=T[5],Ae=T[6],Oe=T[7],Te=T[8],Re=T[9],De=T[10],Ne=T[11],Pe=T[12],Ue=T[13],Le=T[14],ke=T[15];w=$[0],V+=w*L,W+=w*Ee,z+=w*Be,ut+=w*Se,Bt+=w*be,It+=w*xe,de+=w*Ae,Nt+=w*Oe,zt+=w*Te,Zt+=w*Re,oe+=w*De,ie+=w*Ne,Jt+=w*Pe,ee+=w*Ue,Qt+=w*Le,Ot+=w*ke,w=$[1],W+=w*L,z+=w*Ee,ut+=w*Be,Bt+=w*Se,It+=w*be,de+=w*xe,Nt+=w*Ae,zt+=w*Oe,Zt+=w*Te,oe+=w*Re,ie+=w*De,Jt+=w*Ne,ee+=w*Pe,Qt+=w*Ue,Ot+=w*Le,qt+=w*ke,w=$[2],z+=w*L,ut+=w*Ee,Bt+=w*Be,It+=w*Se,de+=w*be,Nt+=w*xe,zt+=w*Ae,Zt+=w*Oe,oe+=w*Te,ie+=w*Re,Jt+=w*De,ee+=w*Ne,Qt+=w*Pe,Ot+=w*Ue,qt+=w*Le,Rt+=w*ke,w=$[3],ut+=w*L,Bt+=w*Ee,It+=w*Be,de+=w*Se,Nt+=w*be,zt+=w*xe,Zt+=w*Ae,oe+=w*Oe,ie+=w*Te,Jt+=w*Re,ee+=w*De,Qt+=w*Ne,Ot+=w*Pe,qt+=w*Ue,Rt+=w*Le,Pt+=w*ke,w=$[4],Bt+=w*L,It+=w*Ee,de+=w*Be,Nt+=w*Se,zt+=w*be,Zt+=w*xe,oe+=w*Ae,ie+=w*Oe,Jt+=w*Te,ee+=w*Re,Qt+=w*De,Ot+=w*Ne,qt+=w*Pe,Rt+=w*Ue,Pt+=w*Le,kt+=w*ke,w=$[5],It+=w*L,de+=w*Ee,Nt+=w*Be,zt+=w*Se,Zt+=w*be,oe+=w*xe,ie+=w*Ae,Jt+=w*Oe,ee+=w*Te,Qt+=w*Re,Ot+=w*De,qt+=w*Ne,Rt+=w*Pe,Pt+=w*Ue,kt+=w*Le,Ft+=w*ke,w=$[6],de+=w*L,Nt+=w*Ee,zt+=w*Be,Zt+=w*Se,oe+=w*be,ie+=w*xe,Jt+=w*Ae,ee+=w*Oe,Qt+=w*Te,Ot+=w*Re,qt+=w*De,Rt+=w*Ne,Pt+=w*Pe,kt+=w*Ue,Ft+=w*Le,J+=w*ke,w=$[7],Nt+=w*L,zt+=w*Ee,Zt+=w*Be,oe+=w*Se,ie+=w*be,Jt+=w*xe,ee+=w*Ae,Qt+=w*Oe,Ot+=w*Te,qt+=w*Re,Rt+=w*De,Pt+=w*Ne,kt+=w*Pe,Ft+=w*Ue,J+=w*Le,it+=w*ke,w=$[8],zt+=w*L,Zt+=w*Ee,oe+=w*Be,ie+=w*Se,Jt+=w*be,ee+=w*xe,Qt+=w*Ae,Ot+=w*Oe,qt+=w*Te,Rt+=w*Re,Pt+=w*De,kt+=w*Ne,Ft+=w*Pe,J+=w*Ue,it+=w*Le,mt+=w*ke,w=$[9],Zt+=w*L,oe+=w*Ee,ie+=w*Be,Jt+=w*Se,ee+=w*be,Qt+=w*xe,Ot+=w*Ae,qt+=w*Oe,Rt+=w*Te,Pt+=w*Re,kt+=w*De,Ft+=w*Ne,J+=w*Pe,it+=w*Ue,mt+=w*Le,ht+=w*ke,w=$[10],oe+=w*L,ie+=w*Ee,Jt+=w*Be,ee+=w*Se,Qt+=w*be,Ot+=w*xe,qt+=w*Ae,Rt+=w*Oe,Pt+=w*Te,kt+=w*Re,Ft+=w*De,J+=w*Ne,it+=w*Pe,mt+=w*Ue,ht+=w*Le,dt+=w*ke,w=$[11],ie+=w*L,Jt+=w*Ee,ee+=w*Be,Qt+=w*Se,Ot+=w*be,qt+=w*xe,Rt+=w*Ae,Pt+=w*Oe,kt+=w*Te,Ft+=w*Re,J+=w*De,it+=w*Ne,mt+=w*Pe,ht+=w*Ue,dt+=w*Le,Ct+=w*ke,w=$[12],Jt+=w*L,ee+=w*Ee,Qt+=w*Be,Ot+=w*Se,qt+=w*be,Rt+=w*xe,Pt+=w*Ae,kt+=w*Oe,Ft+=w*Te,J+=w*Re,it+=w*De,mt+=w*Ne,ht+=w*Pe,dt+=w*Ue,Ct+=w*Le,ce+=w*ke,w=$[13],ee+=w*L,Qt+=w*Ee,Ot+=w*Be,qt+=w*Se,Rt+=w*be,Pt+=w*xe,kt+=w*Ae,Ft+=w*Oe,J+=w*Te,it+=w*Re,mt+=w*De,ht+=w*Ne,dt+=w*Pe,Ct+=w*Ue,ce+=w*Le,pe+=w*ke,w=$[14],Qt+=w*L,Ot+=w*Ee,qt+=w*Be,Rt+=w*Se,Pt+=w*be,kt+=w*xe,Ft+=w*Ae,J+=w*Oe,it+=w*Te,mt+=w*Re,ht+=w*De,dt+=w*Ne,Ct+=w*Pe,ce+=w*Ue,pe+=w*Le,ye+=w*ke,w=$[15],Ot+=w*L,qt+=w*Ee,Rt+=w*Be,Pt+=w*Se,kt+=w*be,Ft+=w*xe,J+=w*Ae,it+=w*Oe,mt+=w*Te,ht+=w*Re,dt+=w*De,Ct+=w*Ne,ce+=w*Pe,pe+=w*Ue,ye+=w*Le,ge+=w*ke,V+=38*qt,W+=38*Rt,z+=38*Pt,ut+=38*kt,Bt+=38*Ft,It+=38*J,de+=38*it,Nt+=38*mt,zt+=38*ht,Zt+=38*dt,oe+=38*Ct,ie+=38*ce,Jt+=38*pe,ee+=38*ye,Qt+=38*ge,D=1,w=V+D+65535,D=Math.floor(w/65536),V=w-D*65536,w=W+D+65535,D=Math.floor(w/65536),W=w-D*65536,w=z+D+65535,D=Math.floor(w/65536),z=w-D*65536,w=ut+D+65535,D=Math.floor(w/65536),ut=w-D*65536,w=Bt+D+65535,D=Math.floor(w/65536),Bt=w-D*65536,w=It+D+65535,D=Math.floor(w/65536),It=w-D*65536,w=de+D+65535,D=Math.floor(w/65536),de=w-D*65536,w=Nt+D+65535,D=Math.floor(w/65536),Nt=w-D*65536,w=zt+D+65535,D=Math.floor(w/65536),zt=w-D*65536,w=Zt+D+65535,D=Math.floor(w/65536),Zt=w-D*65536,w=oe+D+65535,D=Math.floor(w/65536),oe=w-D*65536,w=ie+D+65535,D=Math.floor(w/65536),ie=w-D*65536,w=Jt+D+65535,D=Math.floor(w/65536),Jt=w-D*65536,w=ee+D+65535,D=Math.floor(w/65536),ee=w-D*65536,w=Qt+D+65535,D=Math.floor(w/65536),Qt=w-D*65536,w=Ot+D+65535,D=Math.floor(w/65536),Ot=w-D*65536,V+=D-1+37*(D-1),D=1,w=V+D+65535,D=Math.floor(w/65536),V=w-D*65536,w=W+D+65535,D=Math.floor(w/65536),W=w-D*65536,w=z+D+65535,D=Math.floor(w/65536),z=w-D*65536,w=ut+D+65535,D=Math.floor(w/65536),ut=w-D*65536,w=Bt+D+65535,D=Math.floor(w/65536),Bt=w-D*65536,w=It+D+65535,D=Math.floor(w/65536),It=w-D*65536,w=de+D+65535,D=Math.floor(w/65536),de=w-D*65536,w=Nt+D+65535,D=Math.floor(w/65536),Nt=w-D*65536,w=zt+D+65535,D=Math.floor(w/65536),zt=w-D*65536,w=Zt+D+65535,D=Math.floor(w/65536),Zt=w-D*65536,w=oe+D+65535,D=Math.floor(w/65536),oe=w-D*65536,w=ie+D+65535,D=Math.floor(w/65536),ie=w-D*65536,w=Jt+D+65535,D=Math.floor(w/65536),Jt=w-D*65536,w=ee+D+65535,D=Math.floor(w/65536),ee=w-D*65536,w=Qt+D+65535,D=Math.floor(w/65536),Qt=w-D*65536,w=Ot+D+65535,D=Math.floor(w/65536),Ot=w-D*65536,V+=D-1+37*(D-1),S[0]=V,S[1]=W,S[2]=z,S[3]=ut,S[4]=Bt,S[5]=It,S[6]=de,S[7]=Nt,S[8]=zt,S[9]=Zt,S[10]=oe,S[11]=ie,S[12]=Jt,S[13]=ee,S[14]=Qt,S[15]=Ot}function wt(S,$){tt(S,$,$)}function se(S,$){var T=n(),w;for(w=0;w<16;w++)T[w]=$[w];for(w=253;w>=0;w--)wt(T,T),w!==2&&w!==4&&tt(T,T,$);for(w=0;w<16;w++)S[w]=T[w]}function _t(S,$){var T=n(),w;for(w=0;w<16;w++)T[w]=$[w];for(w=250;w>=0;w--)wt(T,T),w!==1&&tt(T,T,$);for(w=0;w<16;w++)S[w]=T[w]}function Ht(S,$,T){var w=new Uint8Array(32),D=new Float64Array(80),V,W,z=n(),ut=n(),Bt=n(),It=n(),de=n(),Nt=n();for(W=0;W<31;W++)w[W]=$[W];for(w[31]=$[31]&127|64,w[0]&=248,F(D,T),W=0;W<16;W++)ut[W]=D[W],It[W]=z[W]=Bt[W]=0;for(z[0]=It[0]=1,W=254;W>=0;--W)V=w[W>>>3]>>>(W&7)&1,m(z,ut,V),m(Bt,It,V),K(de,z,Bt),X(z,z,Bt),K(Bt,ut,It),X(ut,ut,It),wt(It,de),wt(Nt,z),tt(z,Bt,z),tt(Bt,ut,de),K(de,z,Bt),X(z,z,Bt),wt(ut,z),X(Bt,It,Nt),tt(z,Bt,B),K(z,z,It),tt(Bt,Bt,z),tt(z,It,Nt),tt(It,ut,D),wt(ut,de),m(z,ut,V),m(Bt,It,V);for(W=0;W<16;W++)D[W+16]=z[W],D[W+32]=Bt[W],D[W+48]=ut[W],D[W+64]=It[W];var zt=D.subarray(32),Zt=D.subarray(16);return se(zt,zt),tt(Zt,Zt,zt),f(S,Zt),0}function Ce(S,$){return Ht(S,$,o)}function jt(S,$){return s($,32),Ce(S,$)}function P(S,$,T){var w=new Uint8Array(32);return Ht(w,T,$),Yt(S,a,w,ve)}var j=h,G=d;function et(S,$,T,w,D,V){var W=new Uint8Array(32);return P(W,D,V),j(S,$,T,w,W)}function st(S,$,T,w,D,V){var W=new Uint8Array(32);return P(W,D,V),G(S,$,T,w,W)}var Z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ct(S,$,T,w){for(var D=new Int32Array(16),V=new Int32Array(16),W,z,ut,Bt,It,de,Nt,zt,Zt,oe,ie,Jt,ee,Qt,Ot,qt,Rt,Pt,kt,Ft,J,it,mt,ht,dt,Ct,ce=S[0],pe=S[1],ye=S[2],ge=S[3],L=S[4],Ee=S[5],Be=S[6],Se=S[7],be=$[0],xe=$[1],Ae=$[2],Oe=$[3],Te=$[4],Re=$[5],De=$[6],Ne=$[7],Pe=0;w>=128;){for(kt=0;kt<16;kt++)Ft=8*kt+Pe,D[kt]=T[Ft+0]<<24|T[Ft+1]<<16|T[Ft+2]<<8|T[Ft+3],V[kt]=T[Ft+4]<<24|T[Ft+5]<<16|T[Ft+6]<<8|T[Ft+7];for(kt=0;kt<80;kt++)if(W=ce,z=pe,ut=ye,Bt=ge,It=L,de=Ee,Nt=Be,zt=Se,Zt=be,oe=xe,ie=Ae,Jt=Oe,ee=Te,Qt=Re,Ot=De,qt=Ne,J=Se,it=Ne,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=(L>>>14|Te<<32-14)^(L>>>18|Te<<32-18)^(Te>>>41-32|L<<32-(41-32)),it=(Te>>>14|L<<32-14)^(Te>>>18|L<<32-18)^(L>>>41-32|Te<<32-(41-32)),mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,J=L&Ee^~L&Be,it=Te&Re^~Te&De,mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,J=Z[kt*2],it=Z[kt*2+1],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,J=D[kt%16],it=V[kt%16],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,Rt=dt&65535|Ct<<16,Pt=mt&65535|ht<<16,J=Rt,it=Pt,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=(ce>>>28|be<<32-28)^(be>>>34-32|ce<<32-(34-32))^(be>>>39-32|ce<<32-(39-32)),it=(be>>>28|ce<<32-28)^(ce>>>34-32|be<<32-(34-32))^(ce>>>39-32|be<<32-(39-32)),mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,J=ce&pe^ce&ye^pe&ye,it=be&xe^be&Ae^xe&Ae,mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,zt=dt&65535|Ct<<16,qt=mt&65535|ht<<16,J=Bt,it=Jt,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=Rt,it=Pt,mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,Bt=dt&65535|Ct<<16,Jt=mt&65535|ht<<16,pe=W,ye=z,ge=ut,L=Bt,Ee=It,Be=de,Se=Nt,ce=zt,xe=Zt,Ae=oe,Oe=ie,Te=Jt,Re=ee,De=Qt,Ne=Ot,be=qt,kt%16===15)for(Ft=0;Ft<16;Ft++)J=D[Ft],it=V[Ft],mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=D[(Ft+9)%16],it=V[(Ft+9)%16],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,Rt=D[(Ft+1)%16],Pt=V[(Ft+1)%16],J=(Rt>>>1|Pt<<32-1)^(Rt>>>8|Pt<<32-8)^Rt>>>7,it=(Pt>>>1|Rt<<32-1)^(Pt>>>8|Rt<<32-8)^(Pt>>>7|Rt<<32-7),mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,Rt=D[(Ft+14)%16],Pt=V[(Ft+14)%16],J=(Rt>>>19|Pt<<32-19)^(Pt>>>61-32|Rt<<32-(61-32))^Rt>>>6,it=(Pt>>>19|Rt<<32-19)^(Rt>>>61-32|Pt<<32-(61-32))^(Pt>>>6|Rt<<32-6),mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,D[Ft]=dt&65535|Ct<<16,V[Ft]=mt&65535|ht<<16;J=ce,it=be,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[0],it=$[0],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[0]=ce=dt&65535|Ct<<16,$[0]=be=mt&65535|ht<<16,J=pe,it=xe,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[1],it=$[1],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[1]=pe=dt&65535|Ct<<16,$[1]=xe=mt&65535|ht<<16,J=ye,it=Ae,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[2],it=$[2],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[2]=ye=dt&65535|Ct<<16,$[2]=Ae=mt&65535|ht<<16,J=ge,it=Oe,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[3],it=$[3],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[3]=ge=dt&65535|Ct<<16,$[3]=Oe=mt&65535|ht<<16,J=L,it=Te,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[4],it=$[4],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[4]=L=dt&65535|Ct<<16,$[4]=Te=mt&65535|ht<<16,J=Ee,it=Re,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[5],it=$[5],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[5]=Ee=dt&65535|Ct<<16,$[5]=Re=mt&65535|ht<<16,J=Be,it=De,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[6],it=$[6],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[6]=Be=dt&65535|Ct<<16,$[6]=De=mt&65535|ht<<16,J=Se,it=Ne,mt=it&65535,ht=it>>>16,dt=J&65535,Ct=J>>>16,J=S[7],it=$[7],mt+=it&65535,ht+=it>>>16,dt+=J&65535,Ct+=J>>>16,ht+=mt>>>16,dt+=ht>>>16,Ct+=dt>>>16,S[7]=Se=dt&65535|Ct<<16,$[7]=Ne=mt&65535|ht<<16,Pe+=128,w-=128}return w}function at(S,$,T){var w=new Int32Array(8),D=new Int32Array(8),V=new Uint8Array(256),W,z=T;for(w[0]=1779033703,w[1]=3144134277,w[2]=1013904242,w[3]=2773480762,w[4]=1359893119,w[5]=2600822924,w[6]=528734635,w[7]=1541459225,D[0]=4089235720,D[1]=2227873595,D[2]=4271175723,D[3]=1595750129,D[4]=2917565137,D[5]=725511199,D[6]=4215389547,D[7]=327033209,ct(w,D,$,T),T%=128,W=0;W<T;W++)V[W]=$[z-T+W];for(V[T]=128,T=256-128*(T<112?1:0),V[T-9]=0,$t(V,T-8,z/536870912|0,z<<3),ct(w,D,V,T),W=0;W<8;W++)$t(S,8*W,w[W],D[W]);return 0}function rt(S,$){var T=n(),w=n(),D=n(),V=n(),W=n(),z=n(),ut=n(),Bt=n(),It=n();X(T,S[1],S[0]),X(It,$[1],$[0]),tt(T,T,It),K(w,S[0],S[1]),K(It,$[0],$[1]),tt(w,w,It),tt(D,S[3],$[3]),tt(D,D,I),tt(V,S[2],$[2]),K(V,V,V),X(W,w,T),X(z,V,D),K(ut,V,D),K(Bt,w,T),tt(S[0],W,z),tt(S[1],Bt,ut),tt(S[2],ut,z),tt(S[3],W,Bt)}function nt(S,$,T){var w;for(w=0;w<4;w++)m(S[w],$[w],T)}function Et(S,$){var T=n(),w=n(),D=n();se(D,$[2]),tt(T,$[0],D),tt(w,$[1],D),f(S,w),S[31]^=E(T)<<7}function ot(S,$,T){var w,D;for(y(S[0],g),y(S[1],b),y(S[2],b),y(S[3],g),D=255;D>=0;--D)w=T[D/8|0]>>(D&7)&1,nt(S,$,w),rt($,S),rt(S,S),nt(S,$,w)}function yt(S,$){var T=[n(),n(),n(),n()];y(T[0],U),y(T[1],H),y(T[2],b),tt(T[3],U,H),ot(S,T,$)}function Tt(S,$,T){var w=new Uint8Array(64),D=[n(),n(),n(),n()],V;for(T||s($,32),at(w,$,32),w[0]&=248,w[31]&=127,w[31]|=64,yt(D,w),Et(S,D),V=0;V<32;V++)$[V+32]=S[V];return 0}var pt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(S,$){var T,w,D,V;for(w=63;w>=32;--w){for(T=0,D=w-32,V=w-12;D<V;++D)$[D]+=T-16*$[w]*pt[D-(w-32)],T=Math.floor(($[D]+128)/256),$[D]-=T*256;$[D]+=T,$[w]=0}for(T=0,D=0;D<32;D++)$[D]+=T-($[31]>>4)*pt[D],T=$[D]>>8,$[D]&=255;for(D=0;D<32;D++)$[D]-=T*pt[D];for(w=0;w<32;w++)$[w+1]+=$[w]>>8,S[w]=$[w]&255}function x(S){var $=new Float64Array(64),T;for(T=0;T<64;T++)$[T]=S[T];for(T=0;T<64;T++)S[T]=0;M(S,$)}function _(S,$,T,w){var D=new Uint8Array(64),V=new Uint8Array(64),W=new Uint8Array(64),z,ut,Bt=new Float64Array(64),It=[n(),n(),n(),n()];at(D,w,32),D[0]&=248,D[31]&=127,D[31]|=64;var de=T+64;for(z=0;z<T;z++)S[64+z]=$[z];for(z=0;z<32;z++)S[32+z]=D[32+z];for(at(W,S.subarray(32),T+32),x(W),yt(It,W),Et(S,It),z=32;z<64;z++)S[z]=w[z];for(at(V,S,T+64),x(V),z=0;z<64;z++)Bt[z]=0;for(z=0;z<32;z++)Bt[z]=W[z];for(z=0;z<32;z++)for(ut=0;ut<32;ut++)Bt[z+ut]+=V[z]*D[ut];return M(S.subarray(32),Bt),de}function O(S,$){var T=n(),w=n(),D=n(),V=n(),W=n(),z=n(),ut=n();return y(S[2],b),F(S[1],$),wt(D,S[1]),tt(V,D,N),X(D,D,S[2]),K(V,S[2],V),wt(W,V),wt(z,W),tt(ut,z,W),tt(T,ut,D),tt(T,T,V),_t(T,T),tt(T,T,D),tt(T,T,V),tt(T,T,V),tt(S[0],T,V),wt(w,S[0]),tt(w,w,V),v(w,D)&&tt(S[0],S[0],Q),wt(w,S[0]),tt(w,w,V),v(w,D)?-1:(E(S[0])===$[31]>>7&&X(S[0],g,S[0]),tt(S[3],S[0],S[1]),0)}function k(S,$,T,w){var D,V=new Uint8Array(32),W=new Uint8Array(64),z=[n(),n(),n(),n()],ut=[n(),n(),n(),n()];if(T<64||O(ut,w))return-1;for(D=0;D<T;D++)S[D]=$[D];for(D=0;D<32;D++)S[D+32]=w[D];if(at(W,S,T),x(W),ot(z,ut,W),yt(ut,$.subarray(32)),rt(z,ut),Et(V,z),T-=64,Ut($,0,V,0)){for(D=0;D<T;D++)S[D]=0;return-1}for(D=0;D<T;D++)S[D]=$[D+64];return T}var q=32,Y=24,Lt=32,vt=16,St=32,te=32,bt=32,fe=32,Me=32,Kt=Y,he=Lt,Ie=vt,Wt=64,le=32,_e=64,Vt=32,ue=64;e.lowlevel={crypto_core_hsalsa20:Yt,crypto_stream_xor:A,crypto_stream:me,crypto_stream_salsa20_xor:ne,crypto_stream_salsa20:At,crypto_onetimeauth:u,crypto_onetimeauth_verify:l,crypto_verify_16:xt,crypto_verify_32:Ut,crypto_secretbox:h,crypto_secretbox_open:d,crypto_scalarmult:Ht,crypto_scalarmult_base:Ce,crypto_box_beforenm:P,crypto_box_afternm:j,crypto_box:et,crypto_box_open:st,crypto_box_keypair:jt,crypto_hash:at,crypto_sign:_,crypto_sign_keypair:Tt,crypto_sign_open:k,crypto_secretbox_KEYBYTES:q,crypto_secretbox_NONCEBYTES:Y,crypto_secretbox_ZEROBYTES:Lt,crypto_secretbox_BOXZEROBYTES:vt,crypto_scalarmult_BYTES:St,crypto_scalarmult_SCALARBYTES:te,crypto_box_PUBLICKEYBYTES:bt,crypto_box_SECRETKEYBYTES:fe,crypto_box_BEFORENMBYTES:Me,crypto_box_NONCEBYTES:Kt,crypto_box_ZEROBYTES:he,crypto_box_BOXZEROBYTES:Ie,crypto_sign_BYTES:Wt,crypto_sign_PUBLICKEYBYTES:le,crypto_sign_SECRETKEYBYTES:_e,crypto_sign_SEEDBYTES:Vt,crypto_hash_BYTES:ue,gf:n,D:N,L:pt,pack25519:f,unpack25519:F,M:tt,A:K,S:wt,Z:X,pow2523:_t,add:rt,set25519:y,modL:M,scalarmult:ot,scalarbase:yt};function Fe(S,$){if(S.length!==q)throw new Error("bad key size");if($.length!==Y)throw new Error("bad nonce size")}function Gt(S,$){if(S.length!==bt)throw new Error("bad public key size");if($.length!==fe)throw new Error("bad secret key size")}function Xt(){for(var S=0;S<arguments.length;S++)if(!(arguments[S]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function $e(S){for(var $=0;$<S.length;$++)S[$]=0}e.randomBytes=function(S){var $=new Uint8Array(S);return s($,S),$},e.secretbox=function(S,$,T){Xt(S,$,T),Fe(T,$);for(var w=new Uint8Array(Lt+S.length),D=new Uint8Array(w.length),V=0;V<S.length;V++)w[V+Lt]=S[V];return h(D,w,w.length,$,T),D.subarray(vt)},e.secretbox.open=function(S,$,T){Xt(S,$,T),Fe(T,$);for(var w=new Uint8Array(vt+S.length),D=new Uint8Array(w.length),V=0;V<S.length;V++)w[V+vt]=S[V];return w.length<32||d(D,w,w.length,$,T)!==0?null:D.subarray(Lt)},e.secretbox.keyLength=q,e.secretbox.nonceLength=Y,e.secretbox.overheadLength=vt,e.scalarMult=function(S,$){if(Xt(S,$),S.length!==te)throw new Error("bad n size");if($.length!==St)throw new Error("bad p size");var T=new Uint8Array(St);return Ht(T,S,$),T},e.scalarMult.base=function(S){if(Xt(S),S.length!==te)throw new Error("bad n size");var $=new Uint8Array(St);return Ce($,S),$},e.scalarMult.scalarLength=te,e.scalarMult.groupElementLength=St,e.box=function(S,$,T,w){var D=e.box.before(T,w);return e.secretbox(S,$,D)},e.box.before=function(S,$){Xt(S,$),Gt(S,$);var T=new Uint8Array(Me);return P(T,S,$),T},e.box.after=e.secretbox,e.box.open=function(S,$,T,w){var D=e.box.before(T,w);return e.secretbox.open(S,$,D)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var S=new Uint8Array(bt),$=new Uint8Array(fe);return jt(S,$),{publicKey:S,secretKey:$}},e.box.keyPair.fromSecretKey=function(S){if(Xt(S),S.length!==fe)throw new Error("bad secret key size");var $=new Uint8Array(bt);return Ce($,S),{publicKey:$,secretKey:new Uint8Array(S)}},e.box.publicKeyLength=bt,e.box.secretKeyLength=fe,e.box.sharedKeyLength=Me,e.box.nonceLength=Kt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(S,$){if(Xt(S,$),$.length!==_e)throw new Error("bad secret key size");var T=new Uint8Array(Wt+S.length);return _(T,S,S.length,$),T},e.sign.open=function(S,$){if(Xt(S,$),$.length!==le)throw new Error("bad public key size");var T=new Uint8Array(S.length),w=k(T,S,S.length,$);if(w<0)return null;for(var D=new Uint8Array(w),V=0;V<D.length;V++)D[V]=T[V];return D},e.sign.detached=function(S,$){for(var T=e.sign(S,$),w=new Uint8Array(Wt),D=0;D<w.length;D++)w[D]=T[D];return w},e.sign.detached.verify=function(S,$,T){if(Xt(S,$,T),$.length!==Wt)throw new Error("bad signature size");if(T.length!==le)throw new Error("bad public key size");var w=new Uint8Array(Wt+S.length),D=new Uint8Array(Wt+S.length),V;for(V=0;V<Wt;V++)w[V]=$[V];for(V=0;V<S.length;V++)w[V+Wt]=S[V];return k(D,w,w.length,T)>=0},e.sign.keyPair=function(){var S=new Uint8Array(le),$=new Uint8Array(_e);return Tt(S,$),{publicKey:S,secretKey:$}},e.sign.keyPair.fromSecretKey=function(S){if(Xt(S),S.length!==_e)throw new Error("bad secret key size");for(var $=new Uint8Array(le),T=0;T<$.length;T++)$[T]=S[32+T];return{publicKey:$,secretKey:new Uint8Array(S)}},e.sign.keyPair.fromSeed=function(S){if(Xt(S),S.length!==Vt)throw new Error("bad seed size");for(var $=new Uint8Array(le),T=new Uint8Array(_e),w=0;w<32;w++)T[w]=S[w];return Tt($,T,!0),{publicKey:$,secretKey:T}},e.sign.publicKeyLength=le,e.sign.secretKeyLength=_e,e.sign.seedLength=Vt,e.sign.signatureLength=Wt,e.hash=function(S){Xt(S);var $=new Uint8Array(ue);return at($,S,S.length),$},e.hash.hashLength=ue,e.verify=function(S,$){return Xt(S,$),S.length===0||$.length===0||S.length!==$.length?!1:Dt(S,0,$,0,S.length)===0},e.setPRNG=function(S){s=S},function(){var S=typeof self<"u"?self.crypto||self.msCrypto:null;if(S&&S.getRandomValues){var $=65536;e.setPRNG(function(T,w){var D,V=new Uint8Array(w);for(D=0;D<w;D+=$)S.getRandomValues(V.subarray(D,D+Math.min(w-D,$)));for(D=0;D<w;D++)T[D]=V[D];$e(V)})}else typeof commonjsRequire<"u"&&(S=require$$3$1,S&&S.randomBytes&&e.setPRNG(function(T,w){var D,V=S.randomBytes(w);for(D=0;D<w;D++)T[D]=V[D];$e(V)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})})(naclFast);class SessionCrypto{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=toHexString(this.keyPair.publicKey)}createKeypair(){return naclFastExports.box.keyPair()}createKeypairFromString(e){return{publicKey:hexToByteArray(e.publicKey),secretKey:hexToByteArray(e.secretKey)}}createNonce(){return naclFastExports.randomBytes(this.nonceLength)}encrypt(e,n){const s=new TextEncoder().encode(e),a=this.createNonce(),o=naclFastExports.box(s,a,n,this.keyPair.secretKey);return concatUint8Arrays(a,o)}decrypt(e,n){const[s,a]=splitToUint8Arrays(e,this.nonceLength),o=naclFastExports.box.open(a,s,n,this.keyPair.secretKey);if(!o)throw new Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${n.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(o)}stringifyKeypair(){return{publicKey:toHexString(this.keyPair.publicKey),secretKey:toHexString(this.keyPair.secretKey)}}}class TonConnectError extends Error{constructor(e,n){e&&(e=TonConnectError.prefix+" "+e),super(e,n),Object.setPrototypeOf(this,TonConnectError.prototype)}}TonConnectError.prefix="[TON_CONNECT_SDK_ERROR]";class DappMetadataError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,DappMetadataError.prototype)}}class ManifestContentErrorError extends TonConnectError{constructor(e){super(e||""+ManifestContentErrorError.additionalMessage),Object.setPrototypeOf(this,ManifestContentErrorError.prototype)}}ManifestContentErrorError.additionalMessage="\nPassed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest";class ManifestNotFoundError extends TonConnectError{constructor(e){super(e||""+ManifestNotFoundError.additionalMessage),Object.setPrototypeOf(this,ManifestNotFoundError.prototype)}}ManifestNotFoundError.additionalMessage="\nManifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest";class WalletAlreadyConnectedError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,WalletAlreadyConnectedError.prototype)}}class WalletNotConnectedError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,WalletNotConnectedError.prototype)}}class WalletNotSupportFeatureError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,WalletNotSupportFeatureError.prototype)}}function isWalletConnectionSourceJS(r){return"jsBridgeKey"in r}class UserRejectsError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,UserRejectsError.prototype)}}class BadRequestError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,BadRequestError.prototype)}}class UnknownAppError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,UnknownAppError.prototype)}}class WalletNotInjectedError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,WalletNotInjectedError.prototype)}}class LocalstorageNotFoundError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,LocalstorageNotFoundError.prototype)}}class FetchWalletsError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,FetchWalletsError.prototype)}}class UnknownError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,UnknownError.prototype)}}const connectEventErrorsCodes={[CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR]:UnknownError,[CONNECT_EVENT_ERROR_CODES.USER_REJECTS_ERROR]:UserRejectsError,[CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR]:BadRequestError,[CONNECT_EVENT_ERROR_CODES.UNKNOWN_APP_ERROR]:UnknownAppError,[CONNECT_EVENT_ERROR_CODES.MANIFEST_NOT_FOUND_ERROR]:ManifestNotFoundError,[CONNECT_EVENT_ERROR_CODES.MANIFEST_CONTENT_ERROR]:ManifestContentErrorError};class ConnectErrorsParser{parseError(e){let n=UnknownError;return e.code in connectEventErrorsCodes&&(n=connectEventErrorsCodes[e.code]||UnknownError),new n(e.message)}}const connectErrorsParser=new ConnectErrorsParser;class RpcParser{isError(e){return"error"in e}}const sendTransactionErrors={[SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR]:UnknownError,[SEND_TRANSACTION_ERROR_CODES.USER_REJECTS_ERROR]:UserRejectsError,[SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR]:BadRequestError,[SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR]:UnknownAppError};class SendTransactionParser extends RpcParser{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let n=UnknownError;throw e.error.code in sendTransactionErrors&&(n=sendTransactionErrors[e.error.code]||UnknownError),new n(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}}const sendTransactionParser=new SendTransactionParser;var __awaiter$7=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};class HttpBridgeGatewayStorage{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway"}storeLastEventId(e){return __awaiter$7(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return __awaiter$7(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return __awaiter$7(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e||null})}}function removeUrlLastSlash(r){return r.slice(-1)==="/"?r.slice(0,-1):r}function addPathToUrl(r,e){return removeUrlLastSlash(r)+"/"+e}var __awaiter$6=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};if(isNode())try{eval("global.EventSource = require('eventsource')"),eval("global.fetch = require('node-fetch')")}catch(r){console.error(r)}class BridgeGateway{constructor(e,n,s,a,o){this.bridgeUrl=n,this.sessionId=s,this.listener=a,this.errorsListener=o,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.isClosed=!1,this.bridgeGatewayStorage=new HttpBridgeGatewayStorage(e)}registerSession(){return __awaiter$6(this,void 0,void 0,function*(){const e=new URL(addPathToUrl(this.bridgeUrl,this.ssePath));e.searchParams.append("client_id",this.sessionId);const n=yield this.bridgeGatewayStorage.getLastEventId();return n&&e.searchParams.append("last_event_id",n),this.eventSource=new EventSource(e.toString()),new Promise((s,a)=>{this.eventSource.onerror=a,this.eventSource.onopen=()=>{this.eventSource.onerror=this.errorsHandler.bind(this),this.eventSource.onmessage=this.messagesHandler.bind(this),s()}})})}send(e,n,s){return __awaiter$6(this,void 0,void 0,function*(){const a=new URL(addPathToUrl(this.bridgeUrl,this.postPath));a.searchParams.append("client_id",this.sessionId),a.searchParams.append("to",n),a.searchParams.append("ttl",(s||this.defaultTtl).toString()),yield fetch(a,{method:"post",body:Base64.encode(e)})})}close(){var e;this.isClosed=!0,(e=this.eventSource)===null||e===void 0||e.close()}errorsHandler(e){var n,s;if(!this.isClosed){if(((n=this.eventSource)===null||n===void 0?void 0:n.readyState)===EventSource.CLOSED){this.eventSource.close(),this.registerSession();return}if(((s=this.eventSource)===null||s===void 0?void 0:s.readyState)===EventSource.CONNECTING){console.debug("[TON_CONNET_SDK_ERROR]: Bridge error",JSON.stringify(e));return}this.errorsListener(e)}}messagesHandler(e){return __awaiter$6(this,void 0,void 0,function*(){if(e.data!==this.heartbeatMessage&&(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),!this.isClosed)){let n;try{n=JSON.parse(e.data)}catch(s){throw new TonConnectError(`Bridge message parse failed, message ${s.data}`)}this.listener(n)}})}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};class BridgeConnectionStorage{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return __awaiter$5(this,void 0,void 0,function*(){if(e.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(e));const n={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,walletConnectionSource:e.session.walletConnectionSource},s={type:"http",connectEvent:e.connectEvent,session:n};return this.storage.setItem(this.storeKey,JSON.stringify(s))})}removeConnection(){return __awaiter$5(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return __awaiter$5(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);if(!e)return null;const n=JSON.parse(e);if(n.type==="injected")return n;const s=new SessionCrypto(n.session.sessionKeyPair);return{type:"http",connectEvent:n.connectEvent,session:{sessionCrypto:s,walletConnectionSource:n.session.walletConnectionSource,walletPublicKey:n.session.walletPublicKey}}})}getHttpConnection(){return __awaiter$5(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new TonConnectError("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new TonConnectError("Trying to read HTTP connection source while injected connection is stored");return e})}getInjectedConnection(){return __awaiter$5(this,void 0,void 0,function*(){const e=yield this.getConnection();if(!e)throw new TonConnectError("Trying to read Injected bridge connection source while nothing is stored");if((e==null?void 0:e.type)==="http")throw new TonConnectError("Trying to read Injected bridge connection source while HTTP connection is stored");return e})}storedConnectionType(){return __awaiter$5(this,void 0,void 0,function*(){const e=yield this.storage.getItem(this.storeKey);return e?JSON.parse(e).type:null})}}const PROTOCOL_VERSION=2;var __awaiter$4=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};class BridgeProvider{constructor(e,n){this.storage=e,this.walletConnectionSource=n,this.type="http",this.pendingRequests=new Map,this.nextRequestId=0,this.session=null,this.bridge=null,this.listeners=[],this.connectionStorage=new BridgeConnectionStorage(e)}static fromStorage(e){return __awaiter$4(this,void 0,void 0,function*(){const s=yield new BridgeConnectionStorage(e).getHttpConnection();return new BridgeProvider(e,s.session.walletConnectionSource)})}connect(e){var n;(n=this.bridge)===null||n===void 0||n.close();const s=new SessionCrypto;return this.session={sessionCrypto:s,walletConnectionSource:this.walletConnectionSource},this.bridge=new BridgeGateway(this.storage,this.walletConnectionSource.bridgeUrl,s.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),this.bridge.registerSession(),this.generateUniversalLink(e)}restoreConnection(){var e;return __awaiter$4(this,void 0,void 0,function*(){(e=this.bridge)===null||e===void 0||e.close();const n=yield this.connectionStorage.getHttpConnection();n&&(this.session=n.session,this.bridge=new BridgeGateway(this.storage,this.walletConnectionSource.bridgeUrl,n.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.bridge.registerSession(),this.listeners.forEach(s=>s(n.connectEvent)))})}sendRequest(e){return new Promise((n,s)=>{const a=this.nextRequestId;if(this.nextRequestId++,!this.bridge||!this.session||!("walletPublicKey"in this.session))throw new TonConnectError("Trying to send bridge request without session");const o=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:a})),hexToByteArray(this.session.walletPublicKey));this.bridge.send(o,this.session.walletPublicKey).catch(s),this.pendingRequests.set(a.toString(),n)})}closeConnection(){var e;(e=this.bridge)===null||e===void 0||e.close(),this.listeners=[],this.session=null,this.bridge=null}disconnect(){var e;return(e=this.bridge)===null||e===void 0||e.close(),this.listeners=[],this.removeBridgeAndSession()}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(n=>n!==e)}gatewayListener(e){return __awaiter$4(this,void 0,void 0,function*(){const n=JSON.parse(this.session.sessionCrypto.decrypt(Base64.decode(e.message).toUint8Array(),hexToByteArray(e.from)));if(!("event"in n)){const s=n.id.toString(),a=this.pendingRequests.get(s);if(!a)throw new TonConnectError(`Response id ${s} doesn't match any request's id`);a(n),this.pendingRequests.delete(s);return}n.event==="connect"&&(yield this.updateSession(n,e.from)),n.event==="disconnect"&&(yield this.removeBridgeAndSession()),this.listeners.forEach(s=>s(n))})}gatewayErrorsListener(e){return __awaiter$4(this,void 0,void 0,function*(){throw new TonConnectError(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,n){return __awaiter$4(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:n});const s=e.payload.items.find(o=>o.name==="ton_addr"),a=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[s]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,connectEvent:a})})}removeBridgeAndSession(){return __awaiter$4(this,void 0,void 0,function*(){this.session=null,this.bridge=null,yield this.connectionStorage.removeConnection()})}generateUniversalLink(e){const n=new URL(this.walletConnectionSource.universalLink);return n.searchParams.append("v",PROTOCOL_VERSION.toString()),n.searchParams.append("id",this.session.sessionCrypto.sessionId),n.searchParams.append("r",JSON.stringify(e)),n.toString()}}function getWindow(){if(!(typeof window>"u"))return window}function getWebPageManifest(){var r;const e=(r=getWindow())===null||r===void 0?void 0:r.location.origin;return e?e+"/tonconnect-manifest.json":""}var __awaiter$3=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};class InjectedProvider{constructor(e,n){this.injectedWalletKey=n,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const s=InjectedProvider.window;if(!InjectedProvider.isWindowContainsWallet(s,n))throw new WalletNotInjectedError;this.connectionStorage=new BridgeConnectionStorage(e),this.injectedWallet=s[n].tonconnect}static fromStorage(e){return __awaiter$3(this,void 0,void 0,function*(){const s=yield new BridgeConnectionStorage(e).getInjectedConnection();return new InjectedProvider(e,s.jsBridgeKey)})}static isWalletInjected(e){return InjectedProvider.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return InjectedProvider.isWindowContainsWallet(this.window,e)?this.window[e].tonconnect.isWalletBrowser:!1}static isWindowContainsWallet(e,n){return!!e&&n in e&&typeof e[n]=="object"&&"tonconnect"in e[n]}connect(e){this._connect(PROTOCOL_VERSION,e)}restoreConnection(){return __awaiter$3(this,void 0,void 0,function*(){try{const e=yield this.injectedWallet.restoreConnection();e.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(n=>n(e))):yield this.connectionStorage.removeConnection()}catch(e){yield this.connectionStorage.removeConnection(),console.error(e)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return this.closeAllListeners(),this.injectedWallet.disconnect(),this.connectionStorage.removeConnection()}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],(e=this.unsubscribeCallback)===null||e===void 0||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(n=>n!==e)}sendRequest(e){return __awaiter$3(this,void 0,void 0,function*(){return this.injectedWallet.send(Object.assign(Object.assign({},e),{id:"0"}))})}_connect(e,n){return __awaiter$3(this,void 0,void 0,function*(){try{const s=yield this.injectedWallet.connect(e,n);s.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(a=>a(s))}catch(s){console.debug(s);const a={event:"connect_error",payload:{code:0,message:s==null?void 0:s.toString()}};this.listeners.forEach(o=>o(a))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(e=>{this.listenSubscriptions&&this.listeners.forEach(n=>n(e)),e.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey})}}InjectedProvider.window=getWindow();var __awaiter$2=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};class DefaultStorage{constructor(){const e=getWindow();if(!(e!=null&&e.localStorage))throw new LocalstorageNotFoundError;this.window=e}getItem(e){return __awaiter$2(this,void 0,void 0,function*(){return Promise.resolve(this.window.localStorage.getItem(e))})}removeItem(e){return __awaiter$2(this,void 0,void 0,function*(){return this.window.localStorage.removeItem(e),Promise.resolve()})}setItem(e,n){return this.window.localStorage.setItem(e,n),Promise.resolve()}}function isWalletInfoInjected(r){return"jsBridgeKey"in r}var __awaiter$1=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})};class WalletsListManager{constructor(e){this.walletsListCache=null,this.walletsListSource="https://raw.githubusercontent.com/ton-connect/wallets-list/main/wallets.json",e&&(this.walletsListSource=e)}getWallets(){return __awaiter$1(this,void 0,void 0,function*(){return this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.catch(()=>this.walletsListCache=null)),this.walletsListCache})}getEmbeddedWallet(){return __awaiter$1(this,void 0,void 0,function*(){const n=(yield this.getWallets()).filter(s=>isWalletInfoInjected(s)&&s.embedded);return n.length!==1?null:n[0]})}fetchWalletsList(){return __awaiter$1(this,void 0,void 0,function*(){try{const n=yield(yield fetch(this.walletsListSource)).json();if(!Array.isArray(n)||!n.every(s=>this.isCorrectWalletConfigDTO(s)))throw new FetchWalletsError("Wrong wallets list format");return this.walletConfigDTOListToWalletConfigList(n)}catch(e){throw new FetchWalletsError(e)}})}walletConfigDTOListToWalletConfigList(e){return e.map(n=>{const s={name:n.name,imageUrl:n.image,aboutUrl:n.about_url,tondns:n.tondns};return n.bridge.forEach(a=>{if(a.type==="sse"&&(s.bridgeUrl=a.url,s.universalLink=n.universal_url,s.deepLink=n.deepLink),a.type==="js"){const o=a.key;s.jsBridgeKey=o,s.injected=InjectedProvider.isWalletInjected(o),s.embedded=InjectedProvider.isInsideWalletBrowser(o)}}),s})}isCorrectWalletConfigDTO(e){if(!e||typeof e!="object")return!1;const n="name"in e,s="image"in e,a="about_url"in e;if(!n||!s||!a||!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;const o=e.bridge;if(o.some(B=>!B||typeof B!="object"||!("type"in B)))return!1;const g=o.find(B=>B.type==="sse");if(g&&(!("url"in g)||!g.url||!e.universal_url))return!1;const b=o.find(B=>B.type==="js");return!(b&&(!("key"in b)||!b.key))}}var __awaiter=globalThis&&globalThis.__awaiter||function(r,e,n,s){function a(o){return o instanceof n?o:new n(function(g){g(o)})}return new(n||(n=Promise))(function(o,g){function b(I){try{N(s.next(I))}catch(U){g(U)}}function B(I){try{N(s.throw(I))}catch(U){g(U)}}function N(I){I.done?o(I.value):a(I.value).then(b,B)}N((s=s.apply(r,e||[])).next())})},__rest=globalThis&&globalThis.__rest||function(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(n[s[a]]=r[s[a]]);return n};let TonConnect$1=class{constructor(e){if(this.walletsList=new WalletsListManager,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(e==null?void 0:e.manifestUrl)||getWebPageManifest(),storage:(e==null?void 0:e.storage)||new DefaultStorage},this.walletsList=new WalletsListManager(e==null?void 0:e.walletsListSource),!this.dappSettings.manifestUrl)throw new DappMetadataError("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new BridgeConnectionStorage(this.dappSettings.storage)}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var e;return((e=this._wallet)===null||e===void 0?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(n=>n(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,n){return this.statusChangeSubscriptions.push(e),n&&this.statusChangeErrorSubscriptions.push(n),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(s=>s!==e),n&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(s=>s!==n))}}connect(e,n){var s;if(this.connected)throw new WalletAlreadyConnectedError;return(s=this.provider)===null||s===void 0||s.closeConnection(),this.provider=this.createProvider(e),this.provider.connect(this.createConnectRequest(n))}restoreConnection(){return __awaiter(this,void 0,void 0,function*(){const[e,n]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);switch(e){case"http":this.provider=yield BridgeProvider.fromStorage(this.dappSettings.storage);break;case"injected":this.provider=yield InjectedProvider.fromStorage(this.dappSettings.storage);break;default:if(n)this.provider=yield this.createProvider(n);else return}return this.provider.listen(this.walletEventsListener.bind(this)),this.provider.restoreConnection()})}sendTransaction(e){return __awaiter(this,void 0,void 0,function*(){this.checkConnection(),this.checkFeatureSupport("SendTransaction");const{validUntil:n}=e,s=__rest(e,["validUntil"]),a=yield this.provider.sendRequest(sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({},s),{valid_until:n})));return sendTransactionParser.isError(a)?sendTransactionParser.parseAndThrowError(a):sendTransactionParser.convertFromRpcResponse(a)})}disconnect(){return __awaiter(this,void 0,void 0,function*(){if(!this.connected)throw new WalletNotConnectedError;yield this.provider.disconnect(),this.onWalletDisconnected()})}createProvider(e){let n;return isWalletConnectionSourceJS(e)?n=new InjectedProvider(this.dappSettings.storage,e.jsBridgeKey):n=new BridgeProvider(this.dappSettings.storage,e),n.listen(this.walletEventsListener.bind(this)),n}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected()}}onWalletConnected(e){const n=e.items.find(o=>o.name==="ton_addr"),s=e.items.find(o=>o.name==="ton_proof");if(!n)throw new TonConnectError("ton_addr connection item was not found");const a={device:e.device,provider:this.provider.type,account:{address:n.address,chain:n.network,walletStateInit:n.walletStateInit}};s&&(a.connectItems={tonProof:s}),this.wallet=a}onWalletConnectError(e){const n=connectErrorsParser.parseError(e);if(this.statusChangeErrorSubscriptions.forEach(s=>s(n)),console.debug(n),n instanceof ManifestNotFoundError||n instanceof ManifestContentErrorError)throw console.error(n),n}onWalletDisconnected(){this.wallet=null}checkConnection(){if(!this.connected)throw new WalletNotConnectedError}checkFeatureSupport(e){var n;if(!(!((n=this.wallet)===null||n===void 0)&&n.device.features.includes(e)))throw new WalletNotSupportFeatureError}createConnectRequest(e){const n=[{name:"ton_addr"}];return e!=null&&e.tonProof&&n.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:n}}};TonConnect$1.walletsList=new WalletsListManager;TonConnect$1.isWalletInjected=r=>InjectedProvider.isWalletInjected(r);TonConnect$1.isInsideWalletBrowser=r=>InjectedProvider.isInsideWalletBrowser(r);for(let r=0;r<=255;r++){let e=r.toString(16);e.length<2&&(e="0"+e)}var bnExports$2={},bn$2={get exports(){return bnExports$2},set exports(r){bnExports$2=r}};(function(r){(function(e,n){function s(u,l){if(!u)throw new Error(l||"Assertion failed")}function a(u,l){u.super_=l;var h=function(){};h.prototype=l.prototype,u.prototype=new h,u.prototype.constructor=u}function o(u,l,h){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,u!==null&&((l==="le"||l==="be")&&(h=l,l=10),this._init(u||0,l||10,h||"be"))}typeof e=="object"?e.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var g;try{g=buffer.Buffer}catch{}o.isBN=function(l){return l instanceof o?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===o.wordSize&&Array.isArray(l.words)},o.max=function(l,h){return l.cmp(h)>0?l:h},o.min=function(l,h){return l.cmp(h)<0?l:h},o.prototype._init=function(l,h,d){if(typeof l=="number")return this._initNumber(l,h,d);if(typeof l=="object")return this._initArray(l,h,d);h==="hex"&&(h=16),s(h===(h|0)&&h>=2&&h<=36),l=l.toString().replace(/\s+/g,"");var y=0;l[0]==="-"&&y++,h===16?this._parseHex(l,y):this._parseBase(l,h,y),l[0]==="-"&&(this.negative=1),this._strip(),d==="le"&&this._initArray(this.toArray(),h,d)},o.prototype._initNumber=function(l,h,d){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(s(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},o.prototype._initArray=function(l,h,d){if(s(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var C,m,f=0;if(d==="be")for(y=l.length-1,C=0;y>=0;y-=3)m=l[y]|l[y-1]<<8|l[y-2]<<16,this.words[C]|=m<<f&67108863,this.words[C+1]=m>>>26-f&67108863,f+=24,f>=26&&(f-=26,C++);else if(d==="le")for(y=0,C=0;y<l.length;y+=3)m=l[y]|l[y+1]<<8|l[y+2]<<16,this.words[C]|=m<<f&67108863,this.words[C+1]=m>>>26-f&67108863,f+=24,f>=26&&(f-=26,C++);return this._strip()};function b(u,l,h){for(var d=0,y=Math.min(u.length,h),C=0,m=l;m<y;m++){var f=u.charCodeAt(m)-48;d<<=4;var v;f>=49&&f<=54?v=f-49+10:f>=17&&f<=22?v=f-17+10:v=f,d|=v,C|=v}return s(!(C&240),"Invalid character in "+u),d}o.prototype._parseHex=function(l,h){this.length=Math.ceil((l.length-h)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var y,C,m=0;for(d=l.length-6,y=0;d>=h;d-=6)C=b(l,d,d+6),this.words[y]|=C<<m&67108863,this.words[y+1]|=C>>>26-m&4194303,m+=24,m>=26&&(m-=26,y++);d+6!==h&&(C=b(l,h,d+6),this.words[y]|=C<<m&67108863,this.words[y+1]|=C>>>26-m&4194303),this._strip()};function B(u,l,h,d){for(var y=0,C=0,m=Math.min(u.length,h),f=l;f<m;f++){var v=u.charCodeAt(f)-48;y*=d,v>=49?C=v-49+10:v>=17?C=v-17+10:C=v,s(v>=0&&C<d,"Invalid character"),y+=C}return y}o.prototype._parseBase=function(l,h,d){this.words=[0],this.length=1;for(var y=0,C=1;C<=67108863;C*=h)y++;y--,C=C/h|0;for(var m=l.length-d,f=m%y,v=Math.min(m,m-f)+d,E=0,F=d;F<v;F+=y)E=B(l,F,F+y,h),this.imuln(C),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(f!==0){var K=1;for(E=B(l,F,l.length,h),F=0;F<f;F++)K*=h;this.imuln(K),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}},o.prototype.copy=function(l){l.words=new Array(this.length);for(var h=0;h<this.length;h++)l.words[h]=this.words[h];l.length=this.length,l.negative=this.negative,l.red=this.red};function N(u,l){u.words=l.words,u.length=l.length,u.negative=l.negative,u.red=l.red}o.prototype._move=function(l){N(l,this)},o.prototype.clone=function(){var l=new o(null);return this.copy(l),l},o.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function"?o.prototype[Symbol.for("nodejs.util.inspect.custom")]=I:o.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],H=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(l,h){l=l||10,h=h|0||1;var d;if(l===16||l==="hex"){d="";for(var y=0,C=0,m=0;m<this.length;m++){var f=this.words[m],v=((f<<y|C)&16777215).toString(16);C=f>>>24-y&16777215,C!==0||m!==this.length-1?d=U[6-v.length]+v+d:d=v+d,y+=2,y>=26&&(y-=26,m--)}for(C!==0&&(d=C.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(l===(l|0)&&l>=2&&l<=36){var E=H[l],F=Q[l];d="";var K=this.clone();for(K.negative=0;!K.isZero();){var X=K.modrn(F).toString(l);K=K.idivn(F),K.isZero()?d=X+d:d=U[E-X.length]+X+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},o.prototype.toJSON=function(){return this.toString(16,2)},g&&(o.prototype.toBuffer=function(l,h){return this.toArrayLike(g,l,h)}),o.prototype.toArray=function(l,h){return this.toArrayLike(Array,l,h)};var $t=function(l,h){return l.allocUnsafe?l.allocUnsafe(h):new l(h)};o.prototype.toArrayLike=function(l,h,d){this._strip();var y=this.byteLength(),C=d||Math.max(1,y);s(y<=C,"byte array longer than desired length"),s(C>0,"Requested array length <= 0");var m=$t(l,C),f=h==="le"?"LE":"BE";return this["_toArrayLike"+f](m,y),m},o.prototype._toArrayLikeLE=function(l,h){for(var d=0,y=0,C=0,m=0;C<this.length;C++){var f=this.words[C]<<m|y;l[d++]=f&255,d<l.length&&(l[d++]=f>>8&255),d<l.length&&(l[d++]=f>>16&255),m===6?(d<l.length&&(l[d++]=f>>24&255),y=0,m=0):(y=f>>>24,m+=2)}if(d<l.length)for(l[d++]=y;d<l.length;)l[d++]=0},o.prototype._toArrayLikeBE=function(l,h){for(var d=l.length-1,y=0,C=0,m=0;C<this.length;C++){var f=this.words[C]<<m|y;l[d--]=f&255,d>=0&&(l[d--]=f>>8&255),d>=0&&(l[d--]=f>>16&255),m===6?(d>=0&&(l[d--]=f>>24&255),y=0,m=0):(y=f>>>24,m+=2)}if(d>=0)for(l[d--]=y;d>=0;)l[d--]=0},Math.clz32?o.prototype._countBits=function(l){return 32-Math.clz32(l)}:o.prototype._countBits=function(l){var h=l,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},o.prototype._zeroBits=function(l){if(l===0)return 26;var h=l,d=0;return h&8191||(d+=13,h>>>=13),h&127||(d+=7,h>>>=7),h&15||(d+=4,h>>>=4),h&3||(d+=2,h>>>=2),h&1||d++,d},o.prototype.bitLength=function(){var l=this.words[this.length-1],h=this._countBits(l);return(this.length-1)*26+h};function Dt(u){for(var l=new Array(u.bitLength()),h=0;h<l.length;h++){var d=h/26|0,y=h%26;l[h]=u.words[d]>>>y&1}return l}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(l+=d,d!==26)break}return l},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},o.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]|l.words[h];return this._strip()},o.prototype.ior=function(l){return s((this.negative|l.negative)===0),this.iuor(l)},o.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},o.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},o.prototype.iuand=function(l){var h;this.length>l.length?h=l:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&l.words[d];return this.length=h.length,this._strip()},o.prototype.iand=function(l){return s((this.negative|l.negative)===0),this.iuand(l)},o.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},o.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},o.prototype.iuxor=function(l){var h,d;this.length>l.length?(h=this,d=l):(h=l,d=this);for(var y=0;y<d.length;y++)this.words[y]=h.words[y]^d.words[y];if(this!==h)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=h.length,this._strip()},o.prototype.ixor=function(l){return s((this.negative|l.negative)===0),this.iuxor(l)},o.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},o.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},o.prototype.inotn=function(l){s(typeof l=="number"&&l>=0);var h=Math.ceil(l/26)|0,d=l%26;this._expand(h),d>0&&h--;for(var y=0;y<h;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this._strip()},o.prototype.notn=function(l){return this.clone().inotn(l)},o.prototype.setn=function(l,h){s(typeof l=="number"&&l>=0);var d=l/26|0,y=l%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this._strip()},o.prototype.iadd=function(l){var h;if(this.negative!==0&&l.negative===0)return this.negative=0,h=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,h=this.isub(l),l.negative=1,h._normSign();var d,y;this.length>l.length?(d=this,y=l):(d=l,y=this);for(var C=0,m=0;m<y.length;m++)h=(d.words[m]|0)+(y.words[m]|0)+C,this.words[m]=h&67108863,C=h>>>26;for(;C!==0&&m<d.length;m++)h=(d.words[m]|0)+C,this.words[m]=h&67108863,C=h>>>26;if(this.length=d.length,C!==0)this.words[this.length]=C,this.length++;else if(d!==this)for(;m<d.length;m++)this.words[m]=d.words[m];return this},o.prototype.add=function(l){var h;return l.negative!==0&&this.negative===0?(l.negative=0,h=this.sub(l),l.negative^=1,h):l.negative===0&&this.negative!==0?(this.negative=0,h=l.sub(this),this.negative=1,h):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},o.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var h=this.iadd(l);return l.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var d=this.cmp(l);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,C;d>0?(y=this,C=l):(y=l,C=this);for(var m=0,f=0;f<C.length;f++)h=(y.words[f]|0)-(C.words[f]|0)+m,m=h>>26,this.words[f]=h&67108863;for(;m!==0&&f<y.length;f++)h=(y.words[f]|0)+m,m=h>>26,this.words[f]=h&67108863;if(m===0&&f<y.length&&y!==this)for(;f<y.length;f++)this.words[f]=y.words[f];return this.length=Math.max(this.length,f),y!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(l){return this.clone().isub(l)};function xt(u,l,h){h.negative=l.negative^u.negative;var d=u.length+l.length|0;h.length=d,d=d-1|0;var y=u.words[0]|0,C=l.words[0]|0,m=y*C,f=m&67108863,v=m/67108864|0;h.words[0]=f;for(var E=1;E<d;E++){for(var F=v>>>26,K=v&67108863,X=Math.min(E,l.length-1),tt=Math.max(0,E-u.length+1);tt<=X;tt++){var wt=E-tt|0;y=u.words[wt]|0,C=l.words[tt]|0,m=y*C+K,F+=m/67108864|0,K=m&67108863}h.words[E]=K|0,v=F|0}return v!==0?h.words[E]=v|0:h.length--,h._strip()}var Ut=function(l,h,d){var y=l.words,C=h.words,m=d.words,f=0,v,E,F,K=y[0]|0,X=K&8191,tt=K>>>13,wt=y[1]|0,se=wt&8191,_t=wt>>>13,Ht=y[2]|0,Ce=Ht&8191,jt=Ht>>>13,P=y[3]|0,j=P&8191,G=P>>>13,et=y[4]|0,st=et&8191,Z=et>>>13,ct=y[5]|0,at=ct&8191,rt=ct>>>13,nt=y[6]|0,Et=nt&8191,ot=nt>>>13,yt=y[7]|0,Tt=yt&8191,pt=yt>>>13,M=y[8]|0,x=M&8191,_=M>>>13,O=y[9]|0,k=O&8191,q=O>>>13,Y=C[0]|0,Lt=Y&8191,vt=Y>>>13,St=C[1]|0,te=St&8191,bt=St>>>13,fe=C[2]|0,Me=fe&8191,Kt=fe>>>13,he=C[3]|0,Ie=he&8191,Wt=he>>>13,le=C[4]|0,_e=le&8191,Vt=le>>>13,ue=C[5]|0,Fe=ue&8191,Gt=ue>>>13,Xt=C[6]|0,$e=Xt&8191,S=Xt>>>13,$=C[7]|0,T=$&8191,w=$>>>13,D=C[8]|0,V=D&8191,W=D>>>13,z=C[9]|0,ut=z&8191,Bt=z>>>13;d.negative=l.negative^h.negative,d.length=19,v=Math.imul(X,Lt),E=Math.imul(X,vt),E=E+Math.imul(tt,Lt)|0,F=Math.imul(tt,vt);var It=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(It>>>26)|0,It&=67108863,v=Math.imul(se,Lt),E=Math.imul(se,vt),E=E+Math.imul(_t,Lt)|0,F=Math.imul(_t,vt),v=v+Math.imul(X,te)|0,E=E+Math.imul(X,bt)|0,E=E+Math.imul(tt,te)|0,F=F+Math.imul(tt,bt)|0;var de=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(de>>>26)|0,de&=67108863,v=Math.imul(Ce,Lt),E=Math.imul(Ce,vt),E=E+Math.imul(jt,Lt)|0,F=Math.imul(jt,vt),v=v+Math.imul(se,te)|0,E=E+Math.imul(se,bt)|0,E=E+Math.imul(_t,te)|0,F=F+Math.imul(_t,bt)|0,v=v+Math.imul(X,Me)|0,E=E+Math.imul(X,Kt)|0,E=E+Math.imul(tt,Me)|0,F=F+Math.imul(tt,Kt)|0;var Nt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,v=Math.imul(j,Lt),E=Math.imul(j,vt),E=E+Math.imul(G,Lt)|0,F=Math.imul(G,vt),v=v+Math.imul(Ce,te)|0,E=E+Math.imul(Ce,bt)|0,E=E+Math.imul(jt,te)|0,F=F+Math.imul(jt,bt)|0,v=v+Math.imul(se,Me)|0,E=E+Math.imul(se,Kt)|0,E=E+Math.imul(_t,Me)|0,F=F+Math.imul(_t,Kt)|0,v=v+Math.imul(X,Ie)|0,E=E+Math.imul(X,Wt)|0,E=E+Math.imul(tt,Ie)|0,F=F+Math.imul(tt,Wt)|0;var zt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(zt>>>26)|0,zt&=67108863,v=Math.imul(st,Lt),E=Math.imul(st,vt),E=E+Math.imul(Z,Lt)|0,F=Math.imul(Z,vt),v=v+Math.imul(j,te)|0,E=E+Math.imul(j,bt)|0,E=E+Math.imul(G,te)|0,F=F+Math.imul(G,bt)|0,v=v+Math.imul(Ce,Me)|0,E=E+Math.imul(Ce,Kt)|0,E=E+Math.imul(jt,Me)|0,F=F+Math.imul(jt,Kt)|0,v=v+Math.imul(se,Ie)|0,E=E+Math.imul(se,Wt)|0,E=E+Math.imul(_t,Ie)|0,F=F+Math.imul(_t,Wt)|0,v=v+Math.imul(X,_e)|0,E=E+Math.imul(X,Vt)|0,E=E+Math.imul(tt,_e)|0,F=F+Math.imul(tt,Vt)|0;var Zt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,v=Math.imul(at,Lt),E=Math.imul(at,vt),E=E+Math.imul(rt,Lt)|0,F=Math.imul(rt,vt),v=v+Math.imul(st,te)|0,E=E+Math.imul(st,bt)|0,E=E+Math.imul(Z,te)|0,F=F+Math.imul(Z,bt)|0,v=v+Math.imul(j,Me)|0,E=E+Math.imul(j,Kt)|0,E=E+Math.imul(G,Me)|0,F=F+Math.imul(G,Kt)|0,v=v+Math.imul(Ce,Ie)|0,E=E+Math.imul(Ce,Wt)|0,E=E+Math.imul(jt,Ie)|0,F=F+Math.imul(jt,Wt)|0,v=v+Math.imul(se,_e)|0,E=E+Math.imul(se,Vt)|0,E=E+Math.imul(_t,_e)|0,F=F+Math.imul(_t,Vt)|0,v=v+Math.imul(X,Fe)|0,E=E+Math.imul(X,Gt)|0,E=E+Math.imul(tt,Fe)|0,F=F+Math.imul(tt,Gt)|0;var oe=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(oe>>>26)|0,oe&=67108863,v=Math.imul(Et,Lt),E=Math.imul(Et,vt),E=E+Math.imul(ot,Lt)|0,F=Math.imul(ot,vt),v=v+Math.imul(at,te)|0,E=E+Math.imul(at,bt)|0,E=E+Math.imul(rt,te)|0,F=F+Math.imul(rt,bt)|0,v=v+Math.imul(st,Me)|0,E=E+Math.imul(st,Kt)|0,E=E+Math.imul(Z,Me)|0,F=F+Math.imul(Z,Kt)|0,v=v+Math.imul(j,Ie)|0,E=E+Math.imul(j,Wt)|0,E=E+Math.imul(G,Ie)|0,F=F+Math.imul(G,Wt)|0,v=v+Math.imul(Ce,_e)|0,E=E+Math.imul(Ce,Vt)|0,E=E+Math.imul(jt,_e)|0,F=F+Math.imul(jt,Vt)|0,v=v+Math.imul(se,Fe)|0,E=E+Math.imul(se,Gt)|0,E=E+Math.imul(_t,Fe)|0,F=F+Math.imul(_t,Gt)|0,v=v+Math.imul(X,$e)|0,E=E+Math.imul(X,S)|0,E=E+Math.imul(tt,$e)|0,F=F+Math.imul(tt,S)|0;var ie=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(ie>>>26)|0,ie&=67108863,v=Math.imul(Tt,Lt),E=Math.imul(Tt,vt),E=E+Math.imul(pt,Lt)|0,F=Math.imul(pt,vt),v=v+Math.imul(Et,te)|0,E=E+Math.imul(Et,bt)|0,E=E+Math.imul(ot,te)|0,F=F+Math.imul(ot,bt)|0,v=v+Math.imul(at,Me)|0,E=E+Math.imul(at,Kt)|0,E=E+Math.imul(rt,Me)|0,F=F+Math.imul(rt,Kt)|0,v=v+Math.imul(st,Ie)|0,E=E+Math.imul(st,Wt)|0,E=E+Math.imul(Z,Ie)|0,F=F+Math.imul(Z,Wt)|0,v=v+Math.imul(j,_e)|0,E=E+Math.imul(j,Vt)|0,E=E+Math.imul(G,_e)|0,F=F+Math.imul(G,Vt)|0,v=v+Math.imul(Ce,Fe)|0,E=E+Math.imul(Ce,Gt)|0,E=E+Math.imul(jt,Fe)|0,F=F+Math.imul(jt,Gt)|0,v=v+Math.imul(se,$e)|0,E=E+Math.imul(se,S)|0,E=E+Math.imul(_t,$e)|0,F=F+Math.imul(_t,S)|0,v=v+Math.imul(X,T)|0,E=E+Math.imul(X,w)|0,E=E+Math.imul(tt,T)|0,F=F+Math.imul(tt,w)|0;var Jt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,v=Math.imul(x,Lt),E=Math.imul(x,vt),E=E+Math.imul(_,Lt)|0,F=Math.imul(_,vt),v=v+Math.imul(Tt,te)|0,E=E+Math.imul(Tt,bt)|0,E=E+Math.imul(pt,te)|0,F=F+Math.imul(pt,bt)|0,v=v+Math.imul(Et,Me)|0,E=E+Math.imul(Et,Kt)|0,E=E+Math.imul(ot,Me)|0,F=F+Math.imul(ot,Kt)|0,v=v+Math.imul(at,Ie)|0,E=E+Math.imul(at,Wt)|0,E=E+Math.imul(rt,Ie)|0,F=F+Math.imul(rt,Wt)|0,v=v+Math.imul(st,_e)|0,E=E+Math.imul(st,Vt)|0,E=E+Math.imul(Z,_e)|0,F=F+Math.imul(Z,Vt)|0,v=v+Math.imul(j,Fe)|0,E=E+Math.imul(j,Gt)|0,E=E+Math.imul(G,Fe)|0,F=F+Math.imul(G,Gt)|0,v=v+Math.imul(Ce,$e)|0,E=E+Math.imul(Ce,S)|0,E=E+Math.imul(jt,$e)|0,F=F+Math.imul(jt,S)|0,v=v+Math.imul(se,T)|0,E=E+Math.imul(se,w)|0,E=E+Math.imul(_t,T)|0,F=F+Math.imul(_t,w)|0,v=v+Math.imul(X,V)|0,E=E+Math.imul(X,W)|0,E=E+Math.imul(tt,V)|0,F=F+Math.imul(tt,W)|0;var ee=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(ee>>>26)|0,ee&=67108863,v=Math.imul(k,Lt),E=Math.imul(k,vt),E=E+Math.imul(q,Lt)|0,F=Math.imul(q,vt),v=v+Math.imul(x,te)|0,E=E+Math.imul(x,bt)|0,E=E+Math.imul(_,te)|0,F=F+Math.imul(_,bt)|0,v=v+Math.imul(Tt,Me)|0,E=E+Math.imul(Tt,Kt)|0,E=E+Math.imul(pt,Me)|0,F=F+Math.imul(pt,Kt)|0,v=v+Math.imul(Et,Ie)|0,E=E+Math.imul(Et,Wt)|0,E=E+Math.imul(ot,Ie)|0,F=F+Math.imul(ot,Wt)|0,v=v+Math.imul(at,_e)|0,E=E+Math.imul(at,Vt)|0,E=E+Math.imul(rt,_e)|0,F=F+Math.imul(rt,Vt)|0,v=v+Math.imul(st,Fe)|0,E=E+Math.imul(st,Gt)|0,E=E+Math.imul(Z,Fe)|0,F=F+Math.imul(Z,Gt)|0,v=v+Math.imul(j,$e)|0,E=E+Math.imul(j,S)|0,E=E+Math.imul(G,$e)|0,F=F+Math.imul(G,S)|0,v=v+Math.imul(Ce,T)|0,E=E+Math.imul(Ce,w)|0,E=E+Math.imul(jt,T)|0,F=F+Math.imul(jt,w)|0,v=v+Math.imul(se,V)|0,E=E+Math.imul(se,W)|0,E=E+Math.imul(_t,V)|0,F=F+Math.imul(_t,W)|0,v=v+Math.imul(X,ut)|0,E=E+Math.imul(X,Bt)|0,E=E+Math.imul(tt,ut)|0,F=F+Math.imul(tt,Bt)|0;var Qt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,v=Math.imul(k,te),E=Math.imul(k,bt),E=E+Math.imul(q,te)|0,F=Math.imul(q,bt),v=v+Math.imul(x,Me)|0,E=E+Math.imul(x,Kt)|0,E=E+Math.imul(_,Me)|0,F=F+Math.imul(_,Kt)|0,v=v+Math.imul(Tt,Ie)|0,E=E+Math.imul(Tt,Wt)|0,E=E+Math.imul(pt,Ie)|0,F=F+Math.imul(pt,Wt)|0,v=v+Math.imul(Et,_e)|0,E=E+Math.imul(Et,Vt)|0,E=E+Math.imul(ot,_e)|0,F=F+Math.imul(ot,Vt)|0,v=v+Math.imul(at,Fe)|0,E=E+Math.imul(at,Gt)|0,E=E+Math.imul(rt,Fe)|0,F=F+Math.imul(rt,Gt)|0,v=v+Math.imul(st,$e)|0,E=E+Math.imul(st,S)|0,E=E+Math.imul(Z,$e)|0,F=F+Math.imul(Z,S)|0,v=v+Math.imul(j,T)|0,E=E+Math.imul(j,w)|0,E=E+Math.imul(G,T)|0,F=F+Math.imul(G,w)|0,v=v+Math.imul(Ce,V)|0,E=E+Math.imul(Ce,W)|0,E=E+Math.imul(jt,V)|0,F=F+Math.imul(jt,W)|0,v=v+Math.imul(se,ut)|0,E=E+Math.imul(se,Bt)|0,E=E+Math.imul(_t,ut)|0,F=F+Math.imul(_t,Bt)|0;var Ot=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,v=Math.imul(k,Me),E=Math.imul(k,Kt),E=E+Math.imul(q,Me)|0,F=Math.imul(q,Kt),v=v+Math.imul(x,Ie)|0,E=E+Math.imul(x,Wt)|0,E=E+Math.imul(_,Ie)|0,F=F+Math.imul(_,Wt)|0,v=v+Math.imul(Tt,_e)|0,E=E+Math.imul(Tt,Vt)|0,E=E+Math.imul(pt,_e)|0,F=F+Math.imul(pt,Vt)|0,v=v+Math.imul(Et,Fe)|0,E=E+Math.imul(Et,Gt)|0,E=E+Math.imul(ot,Fe)|0,F=F+Math.imul(ot,Gt)|0,v=v+Math.imul(at,$e)|0,E=E+Math.imul(at,S)|0,E=E+Math.imul(rt,$e)|0,F=F+Math.imul(rt,S)|0,v=v+Math.imul(st,T)|0,E=E+Math.imul(st,w)|0,E=E+Math.imul(Z,T)|0,F=F+Math.imul(Z,w)|0,v=v+Math.imul(j,V)|0,E=E+Math.imul(j,W)|0,E=E+Math.imul(G,V)|0,F=F+Math.imul(G,W)|0,v=v+Math.imul(Ce,ut)|0,E=E+Math.imul(Ce,Bt)|0,E=E+Math.imul(jt,ut)|0,F=F+Math.imul(jt,Bt)|0;var qt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(qt>>>26)|0,qt&=67108863,v=Math.imul(k,Ie),E=Math.imul(k,Wt),E=E+Math.imul(q,Ie)|0,F=Math.imul(q,Wt),v=v+Math.imul(x,_e)|0,E=E+Math.imul(x,Vt)|0,E=E+Math.imul(_,_e)|0,F=F+Math.imul(_,Vt)|0,v=v+Math.imul(Tt,Fe)|0,E=E+Math.imul(Tt,Gt)|0,E=E+Math.imul(pt,Fe)|0,F=F+Math.imul(pt,Gt)|0,v=v+Math.imul(Et,$e)|0,E=E+Math.imul(Et,S)|0,E=E+Math.imul(ot,$e)|0,F=F+Math.imul(ot,S)|0,v=v+Math.imul(at,T)|0,E=E+Math.imul(at,w)|0,E=E+Math.imul(rt,T)|0,F=F+Math.imul(rt,w)|0,v=v+Math.imul(st,V)|0,E=E+Math.imul(st,W)|0,E=E+Math.imul(Z,V)|0,F=F+Math.imul(Z,W)|0,v=v+Math.imul(j,ut)|0,E=E+Math.imul(j,Bt)|0,E=E+Math.imul(G,ut)|0,F=F+Math.imul(G,Bt)|0;var Rt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,v=Math.imul(k,_e),E=Math.imul(k,Vt),E=E+Math.imul(q,_e)|0,F=Math.imul(q,Vt),v=v+Math.imul(x,Fe)|0,E=E+Math.imul(x,Gt)|0,E=E+Math.imul(_,Fe)|0,F=F+Math.imul(_,Gt)|0,v=v+Math.imul(Tt,$e)|0,E=E+Math.imul(Tt,S)|0,E=E+Math.imul(pt,$e)|0,F=F+Math.imul(pt,S)|0,v=v+Math.imul(Et,T)|0,E=E+Math.imul(Et,w)|0,E=E+Math.imul(ot,T)|0,F=F+Math.imul(ot,w)|0,v=v+Math.imul(at,V)|0,E=E+Math.imul(at,W)|0,E=E+Math.imul(rt,V)|0,F=F+Math.imul(rt,W)|0,v=v+Math.imul(st,ut)|0,E=E+Math.imul(st,Bt)|0,E=E+Math.imul(Z,ut)|0,F=F+Math.imul(Z,Bt)|0;var Pt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,v=Math.imul(k,Fe),E=Math.imul(k,Gt),E=E+Math.imul(q,Fe)|0,F=Math.imul(q,Gt),v=v+Math.imul(x,$e)|0,E=E+Math.imul(x,S)|0,E=E+Math.imul(_,$e)|0,F=F+Math.imul(_,S)|0,v=v+Math.imul(Tt,T)|0,E=E+Math.imul(Tt,w)|0,E=E+Math.imul(pt,T)|0,F=F+Math.imul(pt,w)|0,v=v+Math.imul(Et,V)|0,E=E+Math.imul(Et,W)|0,E=E+Math.imul(ot,V)|0,F=F+Math.imul(ot,W)|0,v=v+Math.imul(at,ut)|0,E=E+Math.imul(at,Bt)|0,E=E+Math.imul(rt,ut)|0,F=F+Math.imul(rt,Bt)|0;var kt=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(kt>>>26)|0,kt&=67108863,v=Math.imul(k,$e),E=Math.imul(k,S),E=E+Math.imul(q,$e)|0,F=Math.imul(q,S),v=v+Math.imul(x,T)|0,E=E+Math.imul(x,w)|0,E=E+Math.imul(_,T)|0,F=F+Math.imul(_,w)|0,v=v+Math.imul(Tt,V)|0,E=E+Math.imul(Tt,W)|0,E=E+Math.imul(pt,V)|0,F=F+Math.imul(pt,W)|0,v=v+Math.imul(Et,ut)|0,E=E+Math.imul(Et,Bt)|0,E=E+Math.imul(ot,ut)|0,F=F+Math.imul(ot,Bt)|0;var Ft=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,v=Math.imul(k,T),E=Math.imul(k,w),E=E+Math.imul(q,T)|0,F=Math.imul(q,w),v=v+Math.imul(x,V)|0,E=E+Math.imul(x,W)|0,E=E+Math.imul(_,V)|0,F=F+Math.imul(_,W)|0,v=v+Math.imul(Tt,ut)|0,E=E+Math.imul(Tt,Bt)|0,E=E+Math.imul(pt,ut)|0,F=F+Math.imul(pt,Bt)|0;var J=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(J>>>26)|0,J&=67108863,v=Math.imul(k,V),E=Math.imul(k,W),E=E+Math.imul(q,V)|0,F=Math.imul(q,W),v=v+Math.imul(x,ut)|0,E=E+Math.imul(x,Bt)|0,E=E+Math.imul(_,ut)|0,F=F+Math.imul(_,Bt)|0;var it=(f+v|0)+((E&8191)<<13)|0;f=(F+(E>>>13)|0)+(it>>>26)|0,it&=67108863,v=Math.imul(k,ut),E=Math.imul(k,Bt),E=E+Math.imul(q,ut)|0,F=Math.imul(q,Bt);var mt=(f+v|0)+((E&8191)<<13)|0;return f=(F+(E>>>13)|0)+(mt>>>26)|0,mt&=67108863,m[0]=It,m[1]=de,m[2]=Nt,m[3]=zt,m[4]=Zt,m[5]=oe,m[6]=ie,m[7]=Jt,m[8]=ee,m[9]=Qt,m[10]=Ot,m[11]=qt,m[12]=Rt,m[13]=Pt,m[14]=kt,m[15]=Ft,m[16]=J,m[17]=it,m[18]=mt,f!==0&&(m[19]=f,d.length++),d};Math.imul||(Ut=xt);function we(u,l,h){h.negative=l.negative^u.negative,h.length=u.length+l.length;for(var d=0,y=0,C=0;C<h.length-1;C++){var m=y;y=0;for(var f=d&67108863,v=Math.min(C,l.length-1),E=Math.max(0,C-u.length+1);E<=v;E++){var F=C-E,K=u.words[F]|0,X=l.words[E]|0,tt=K*X,wt=tt&67108863;m=m+(tt/67108864|0)|0,wt=wt+f|0,f=wt&67108863,m=m+(wt>>>26)|0,y+=m>>>26,m&=67108863}h.words[C]=f,d=m,m=y}return d!==0?h.words[C]=d:h.length--,h._strip()}function Mt(u,l,h){return we(u,l,h)}o.prototype.mulTo=function(l,h){var d,y=this.length+l.length;return this.length===10&&l.length===10?d=Ut(this,l,h):y<63?d=xt(this,l,h):y<1024?d=we(this,l,h):d=Mt(this,l,h),d},o.prototype.mul=function(l){var h=new o(null);return h.words=new Array(this.length+l.length),this.mulTo(l,h)},o.prototype.mulf=function(l){var h=new o(null);return h.words=new Array(this.length+l.length),Mt(this,l,h)},o.prototype.imul=function(l){return this.clone().mulTo(l,this)},o.prototype.imuln=function(l){var h=l<0;h&&(l=-l),s(typeof l=="number"),s(l<67108864);for(var d=0,y=0;y<this.length;y++){var C=(this.words[y]|0)*l,m=(C&67108863)+(d&67108863);d>>=26,d+=C/67108864|0,d+=m>>>26,this.words[y]=m&67108863}return d!==0&&(this.words[y]=d,this.length++),h?this.ineg():this},o.prototype.muln=function(l){return this.clone().imuln(l)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(l){var h=Dt(l);if(h.length===0)return new o(1);for(var d=this,y=0;y<h.length&&h[y]===0;y++,d=d.sqr());if(++y<h.length)for(var C=d.sqr();y<h.length;y++,C=C.sqr())h[y]!==0&&(d=d.mul(C));return d},o.prototype.iushln=function(l){s(typeof l=="number"&&l>=0);var h=l%26,d=(l-h)/26,y=67108863>>>26-h<<26-h,C;if(h!==0){var m=0;for(C=0;C<this.length;C++){var f=this.words[C]&y,v=(this.words[C]|0)-f<<h;this.words[C]=v|m,m=f>>>26-h}m&&(this.words[C]=m,this.length++)}if(d!==0){for(C=this.length-1;C>=0;C--)this.words[C+d]=this.words[C];for(C=0;C<d;C++)this.words[C]=0;this.length+=d}return this._strip()},o.prototype.ishln=function(l){return s(this.negative===0),this.iushln(l)},o.prototype.iushrn=function(l,h,d){s(typeof l=="number"&&l>=0);var y;h?y=(h-h%26)/26:y=0;var C=l%26,m=Math.min((l-C)/26,this.length),f=67108863^67108863>>>C<<C,v=d;if(y-=m,y=Math.max(0,y),v){for(var E=0;E<m;E++)v.words[E]=this.words[E];v.length=m}if(m!==0)if(this.length>m)for(this.length-=m,E=0;E<this.length;E++)this.words[E]=this.words[E+m];else this.words[0]=0,this.length=1;var F=0;for(E=this.length-1;E>=0&&(F!==0||E>=y);E--){var K=this.words[E]|0;this.words[E]=F<<26-C|K>>>C,F=K&f}return v&&F!==0&&(v.words[v.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(l,h,d){return s(this.negative===0),this.iushrn(l,h,d)},o.prototype.shln=function(l){return this.clone().ishln(l)},o.prototype.ushln=function(l){return this.clone().iushln(l)},o.prototype.shrn=function(l){return this.clone().ishrn(l)},o.prototype.ushrn=function(l){return this.clone().iushrn(l)},o.prototype.testn=function(l){s(typeof l=="number"&&l>=0);var h=l%26,d=(l-h)/26,y=1<<h;if(this.length<=d)return!1;var C=this.words[d];return!!(C&y)},o.prototype.imaskn=function(l){s(typeof l=="number"&&l>=0);var h=l%26,d=(l-h)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var y=67108863^67108863>>>h<<h;this.words[this.length-1]&=y}return this._strip()},o.prototype.maskn=function(l){return this.clone().imaskn(l)},o.prototype.iaddn=function(l){return s(typeof l=="number"),s(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},o.prototype._iaddn=function(l){this.words[0]+=l;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},o.prototype.isubn=function(l){if(s(typeof l=="number"),s(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},o.prototype.addn=function(l){return this.clone().iaddn(l)},o.prototype.subn=function(l){return this.clone().isubn(l)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(l,h,d){var y=l.length+d,C;this._expand(y);var m,f=0;for(C=0;C<l.length;C++){m=(this.words[C+d]|0)+f;var v=(l.words[C]|0)*h;m-=v&67108863,f=(m>>26)-(v/67108864|0),this.words[C+d]=m&67108863}for(;C<this.length-d;C++)m=(this.words[C+d]|0)+f,f=m>>26,this.words[C+d]=m&67108863;if(f===0)return this._strip();for(s(f===-1),f=0,C=0;C<this.length;C++)m=-(this.words[C]|0)+f,f=m>>26,this.words[C]=m&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(l,h){var d=this.length-l.length,y=this.clone(),C=l,m=C.words[C.length-1]|0,f=this._countBits(m);d=26-f,d!==0&&(C=C.ushln(d),y.iushln(d),m=C.words[C.length-1]|0);var v=y.length-C.length,E;if(h!=="mod"){E=new o(null),E.length=v+1,E.words=new Array(E.length);for(var F=0;F<E.length;F++)E.words[F]=0}var K=y.clone()._ishlnsubmul(C,1,v);K.negative===0&&(y=K,E&&(E.words[v]=1));for(var X=v-1;X>=0;X--){var tt=(y.words[C.length+X]|0)*67108864+(y.words[C.length+X-1]|0);for(tt=Math.min(tt/m|0,67108863),y._ishlnsubmul(C,tt,X);y.negative!==0;)tt--,y.negative=0,y._ishlnsubmul(C,1,X),y.isZero()||(y.negative^=1);E&&(E.words[X]=tt)}return E&&E._strip(),y._strip(),h!=="div"&&d!==0&&y.iushrn(d),{div:E||null,mod:y}},o.prototype.divmod=function(l,h,d){if(s(!l.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,C,m;return this.negative!==0&&l.negative===0?(m=this.neg().divmod(l,h),h!=="mod"&&(y=m.div.neg()),h!=="div"&&(C=m.mod.neg(),d&&C.negative!==0&&C.iadd(l)),{div:y,mod:C}):this.negative===0&&l.negative!==0?(m=this.divmod(l.neg(),h),h!=="mod"&&(y=m.div.neg()),{div:y,mod:m.mod}):this.negative&l.negative?(m=this.neg().divmod(l.neg(),h),h!=="div"&&(C=m.mod.neg(),d&&C.negative!==0&&C.isub(l)),{div:m.div,mod:C}):l.length>this.length||this.cmp(l)<0?{div:new o(0),mod:this}:l.length===1?h==="div"?{div:this.divn(l.words[0]),mod:null}:h==="mod"?{div:null,mod:new o(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new o(this.modrn(l.words[0]))}:this._wordDiv(l,h)},o.prototype.div=function(l){return this.divmod(l,"div",!1).div},o.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},o.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},o.prototype.divRound=function(l){var h=this.divmod(l);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(l):h.mod,y=l.ushrn(1),C=l.andln(1),m=d.cmp(y);return m<0||C===1&&m===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},o.prototype.modrn=function(l){var h=l<0;h&&(l=-l),s(l<=67108863);for(var d=(1<<26)%l,y=0,C=this.length-1;C>=0;C--)y=(d*y+(this.words[C]|0))%l;return h?-y:y},o.prototype.modn=function(l){return this.modrn(l)},o.prototype.idivn=function(l){var h=l<0;h&&(l=-l),s(l<=67108863);for(var d=0,y=this.length-1;y>=0;y--){var C=(this.words[y]|0)+d*67108864;this.words[y]=C/l|0,d=C%l}return this._strip(),h?this.ineg():this},o.prototype.divn=function(l){return this.clone().idivn(l)},o.prototype.egcd=function(l){s(l.negative===0),s(!l.isZero());var h=this,d=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var y=new o(1),C=new o(0),m=new o(0),f=new o(1),v=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++v;for(var E=d.clone(),F=h.clone();!h.isZero();){for(var K=0,X=1;!(h.words[0]&X)&&K<26;++K,X<<=1);if(K>0)for(h.iushrn(K);K-- >0;)(y.isOdd()||C.isOdd())&&(y.iadd(E),C.isub(F)),y.iushrn(1),C.iushrn(1);for(var tt=0,wt=1;!(d.words[0]&wt)&&tt<26;++tt,wt<<=1);if(tt>0)for(d.iushrn(tt);tt-- >0;)(m.isOdd()||f.isOdd())&&(m.iadd(E),f.isub(F)),m.iushrn(1),f.iushrn(1);h.cmp(d)>=0?(h.isub(d),y.isub(m),C.isub(f)):(d.isub(h),m.isub(y),f.isub(C))}return{a:m,b:f,gcd:d.iushln(v)}},o.prototype._invmp=function(l){s(l.negative===0),s(!l.isZero());var h=this,d=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var y=new o(1),C=new o(0),m=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var f=0,v=1;!(h.words[0]&v)&&f<26;++f,v<<=1);if(f>0)for(h.iushrn(f);f-- >0;)y.isOdd()&&y.iadd(m),y.iushrn(1);for(var E=0,F=1;!(d.words[0]&F)&&E<26;++E,F<<=1);if(E>0)for(d.iushrn(E);E-- >0;)C.isOdd()&&C.iadd(m),C.iushrn(1);h.cmp(d)>=0?(h.isub(d),y.isub(C)):(d.isub(h),C.isub(y))}var K;return h.cmpn(1)===0?K=y:K=C,K.cmpn(0)<0&&K.iadd(l),K},o.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var h=this.clone(),d=l.clone();h.negative=0,d.negative=0;for(var y=0;h.isEven()&&d.isEven();y++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var C=h.cmp(d);if(C<0){var m=h;h=d,d=m}else if(C===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(y)},o.prototype.invm=function(l){return this.egcd(l).a.umod(l)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(l){return this.words[0]&l},o.prototype.bincn=function(l){s(typeof l=="number");var h=l%26,d=(l-h)/26,y=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var C=y,m=d;C!==0&&m<this.length;m++){var f=this.words[m]|0;f+=C,C=f>>>26,f&=67108863,this.words[m]=f}return C!==0&&(this.words[m]=C,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(l){var h=l<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var d;if(this.length>1)d=1;else{h&&(l=-l),s(l<=67108863,"Number is too big");var y=this.words[0]|0;d=y===l?0:y<l?-1:1}return this.negative!==0?-d|0:d},o.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var h=this.ucmp(l);return this.negative!==0?-h|0:h},o.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,C=l.words[d]|0;if(y!==C){y<C?h=-1:y>C&&(h=1);break}}return h},o.prototype.gtn=function(l){return this.cmpn(l)===1},o.prototype.gt=function(l){return this.cmp(l)===1},o.prototype.gten=function(l){return this.cmpn(l)>=0},o.prototype.gte=function(l){return this.cmp(l)>=0},o.prototype.ltn=function(l){return this.cmpn(l)===-1},o.prototype.lt=function(l){return this.cmp(l)===-1},o.prototype.lten=function(l){return this.cmpn(l)<=0},o.prototype.lte=function(l){return this.cmp(l)<=0},o.prototype.eqn=function(l){return this.cmpn(l)===0},o.prototype.eq=function(l){return this.cmp(l)===0},o.red=function(l){return new A(l)},o.prototype.toRed=function(l){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(l){return this.red=l,this},o.prototype.forceRed=function(l){return s(!this.red,"Already a number in reduction context"),this._forceRed(l)},o.prototype.redAdd=function(l){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},o.prototype.redIAdd=function(l){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},o.prototype.redSub=function(l){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},o.prototype.redISub=function(l){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},o.prototype.redShl=function(l){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},o.prototype.redMul=function(l){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},o.prototype.redIMul=function(l){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(l){return s(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var ae={k256:null,p224:null,p192:null,p25519:null};function Yt(u,l){this.name=u,this.p=new o(l,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Yt.prototype._tmp=function(){var l=new o(null);return l.words=new Array(Math.ceil(this.n/13)),l},Yt.prototype.ireduce=function(l){var h=l,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var y=d<this.n?-1:h.ucmp(this.p);return y===0?(h.words[0]=0,h.length=1):y>0?h.isub(this.p):h._strip(),h},Yt.prototype.split=function(l,h){l.iushrn(this.n,0,h)},Yt.prototype.imulK=function(l){return l.imul(this.k)};function ve(){Yt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(ve,Yt),ve.prototype.split=function(l,h){for(var d=4194303,y=Math.min(l.length,9),C=0;C<y;C++)h.words[C]=l.words[C];if(h.length=y,l.length<=9){l.words[0]=0,l.length=1;return}var m=l.words[9];for(h.words[h.length++]=m&d,C=10;C<l.length;C++){var f=l.words[C]|0;l.words[C-10]=(f&d)<<4|m>>>22,m=f}m>>>=22,l.words[C-10]=m,m===0&&l.length>10?l.length-=10:l.length-=9},ve.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var h=0,d=0;d<l.length;d++){var y=l.words[d]|0;h+=y*977,l.words[d]=h&67108863,h=y*64+(h/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function ne(){Yt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(ne,Yt);function At(){Yt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(At,Yt);function me(){Yt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(me,Yt),me.prototype.imulK=function(l){for(var h=0,d=0;d<l.length;d++){var y=(l.words[d]|0)*19+h,C=y&67108863;y>>>=26,l.words[d]=C,h=y}return h!==0&&(l.words[l.length++]=h),l},o._prime=function(l){if(ae[l])return ae[l];var h;if(l==="k256")h=new ve;else if(l==="p224")h=new ne;else if(l==="p192")h=new At;else if(l==="p25519")h=new me;else throw new Error("Unknown prime "+l);return ae[l]=h,h};function A(u){if(typeof u=="string"){var l=o._prime(u);this.m=l.p,this.prime=l}else s(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}A.prototype._verify1=function(l){s(l.negative===0,"red works only with positives"),s(l.red,"red works only with red numbers")},A.prototype._verify2=function(l,h){s((l.negative|h.negative)===0,"red works only with positives"),s(l.red&&l.red===h.red,"red works only with red numbers")},A.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(N(l,l.umod(this.m)._forceRed(this)),l)},A.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},A.prototype.add=function(l,h){this._verify2(l,h);var d=l.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},A.prototype.iadd=function(l,h){this._verify2(l,h);var d=l.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},A.prototype.sub=function(l,h){this._verify2(l,h);var d=l.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},A.prototype.isub=function(l,h){this._verify2(l,h);var d=l.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},A.prototype.shl=function(l,h){return this._verify1(l),this.imod(l.ushln(h))},A.prototype.imul=function(l,h){return this._verify2(l,h),this.imod(l.imul(h))},A.prototype.mul=function(l,h){return this._verify2(l,h),this.imod(l.mul(h))},A.prototype.isqr=function(l){return this.imul(l,l.clone())},A.prototype.sqr=function(l){return this.mul(l,l)},A.prototype.sqrt=function(l){if(l.isZero())return l.clone();var h=this.m.andln(3);if(s(h%2===1),h===3){var d=this.m.add(new o(1)).iushrn(2);return this.pow(l,d)}for(var y=this.m.subn(1),C=0;!y.isZero()&&y.andln(1)===0;)C++,y.iushrn(1);s(!y.isZero());var m=new o(1).toRed(this),f=m.redNeg(),v=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new o(2*E*E).toRed(this);this.pow(E,v).cmp(f)!==0;)E.redIAdd(f);for(var F=this.pow(E,y),K=this.pow(l,y.addn(1).iushrn(1)),X=this.pow(l,y),tt=C;X.cmp(m)!==0;){for(var wt=X,se=0;wt.cmp(m)!==0;se++)wt=wt.redSqr();s(se<tt);var _t=this.pow(F,new o(1).iushln(tt-se-1));K=K.redMul(_t),F=_t.redSqr(),X=X.redMul(F),tt=se}return K},A.prototype.invm=function(l){var h=l._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},A.prototype.pow=function(l,h){if(h.isZero())return new o(1).toRed(this);if(h.cmpn(1)===0)return l.clone();var d=4,y=new Array(1<<d);y[0]=new o(1).toRed(this),y[1]=l;for(var C=2;C<y.length;C++)y[C]=this.mul(y[C-1],l);var m=y[0],f=0,v=0,E=h.bitLength()%26;for(E===0&&(E=26),C=h.length-1;C>=0;C--){for(var F=h.words[C],K=E-1;K>=0;K--){var X=F>>K&1;if(m!==y[0]&&(m=this.sqr(m)),X===0&&f===0){v=0;continue}f<<=1,f|=X,v++,!(v!==d&&(C!==0||K!==0))&&(m=this.mul(m,y[f]),v=0,f=0)}E=26}return m},A.prototype.convertTo=function(l){var h=l.umod(this.m);return h===l?h.clone():h},A.prototype.convertFrom=function(l){var h=l.clone();return h.red=null,h},o.mont=function(l){return new c(l)};function c(u){A.call(this,u),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(c,A),c.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},c.prototype.convertFrom=function(l){var h=this.imod(l.mul(this.rinv));return h.red=null,h},c.prototype.imul=function(l,h){if(l.isZero()||h.isZero())return l.words[0]=0,l.length=1,l;var d=l.imul(h),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=d.isub(y).iushrn(this.shift),m=C;return C.cmp(this.m)>=0?m=C.isub(this.m):C.cmpn(0)<0&&(m=C.iadd(this.m)),m._forceRed(this)},c.prototype.mul=function(l,h){if(l.isZero()||h.isZero())return new o(0)._forceRed(this);var d=l.mul(h),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=d.isub(y).iushrn(this.shift),m=C;return C.cmp(this.m)>=0?m=C.isub(this.m):C.cmpn(0)<0&&(m=C.iadd(this.m)),m._forceRed(this)},c.prototype.invm=function(l){var h=this.imod(l._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,commonjsGlobal)})(bn$2);var bnExports$1={},bn$1={get exports(){return bnExports$1},set exports(r){bnExports$1=r}};(function(r){(function(e,n){function s(A,c){if(!A)throw new Error(c||"Assertion failed")}function a(A,c){A.super_=c;var u=function(){};u.prototype=c.prototype,A.prototype=new u,A.prototype.constructor=A}function o(A,c,u){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((c==="le"||c==="be")&&(u=c,c=10),this._init(A||0,c||10,u||"be"))}typeof e=="object"?e.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var g;try{g=commonjsRequire("buffer").Buffer}catch{}o.isBN=function(c){return c instanceof o?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===o.wordSize&&Array.isArray(c.words)},o.max=function(c,u){return c.cmp(u)>0?c:u},o.min=function(c,u){return c.cmp(u)<0?c:u},o.prototype._init=function(c,u,l){if(typeof c=="number")return this._initNumber(c,u,l);if(typeof c=="object")return this._initArray(c,u,l);u==="hex"&&(u=16),s(u===(u|0)&&u>=2&&u<=36),c=c.toString().replace(/\s+/g,"");var h=0;c[0]==="-"&&h++,u===16?this._parseHex(c,h):this._parseBase(c,u,h),c[0]==="-"&&(this.negative=1),this.strip(),l==="le"&&this._initArray(this.toArray(),u,l)},o.prototype._initNumber=function(c,u,l){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(s(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},o.prototype._initArray=function(c,u,l){if(s(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,y,C=0;if(l==="be")for(h=c.length-1,d=0;h>=0;h-=3)y=c[h]|c[h-1]<<8|c[h-2]<<16,this.words[d]|=y<<C&67108863,this.words[d+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,d++);else if(l==="le")for(h=0,d=0;h<c.length;h+=3)y=c[h]|c[h+1]<<8|c[h+2]<<16,this.words[d]|=y<<C&67108863,this.words[d+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,d++);return this.strip()};function b(A,c,u){for(var l=0,h=Math.min(A.length,u),d=c;d<h;d++){var y=A.charCodeAt(d)-48;l<<=4,y>=49&&y<=54?l|=y-49+10:y>=17&&y<=22?l|=y-17+10:l|=y&15}return l}o.prototype._parseHex=function(c,u){this.length=Math.ceil((c.length-u)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var h,d,y=0;for(l=c.length-6,h=0;l>=u;l-=6)d=b(c,l,l+6),this.words[h]|=d<<y&67108863,this.words[h+1]|=d>>>26-y&4194303,y+=24,y>=26&&(y-=26,h++);l+6!==u&&(d=b(c,u,l+6),this.words[h]|=d<<y&67108863,this.words[h+1]|=d>>>26-y&4194303),this.strip()};function B(A,c,u,l){for(var h=0,d=Math.min(A.length,u),y=c;y<d;y++){var C=A.charCodeAt(y)-48;h*=l,C>=49?h+=C-49+10:C>=17?h+=C-17+10:h+=C}return h}o.prototype._parseBase=function(c,u,l){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=u)h++;h--,d=d/u|0;for(var y=c.length-l,C=y%h,m=Math.min(y,y-C)+l,f=0,v=l;v<m;v+=h)f=B(c,v,v+h,u),this.imuln(d),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(C!==0){var E=1;for(f=B(c,v,c.length,u),v=0;v<C;v++)E*=u;this.imuln(E),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},o.prototype.copy=function(c){c.words=new Array(this.length);for(var u=0;u<this.length;u++)c.words[u]=this.words[u];c.length=this.length,c.negative=this.negative,c.red=this.red},o.prototype.clone=function(){var c=new o(null);return this.copy(c),c},o.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],U=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(c,u){c=c||10,u=u|0||1;var l;if(c===16||c==="hex"){l="";for(var h=0,d=0,y=0;y<this.length;y++){var C=this.words[y],m=((C<<h|d)&16777215).toString(16);d=C>>>24-h&16777215,d!==0||y!==this.length-1?l=N[6-m.length]+m+l:l=m+l,h+=2,h>=26&&(h-=26,y--)}for(d!==0&&(l=d.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(c===(c|0)&&c>=2&&c<=36){var f=I[c],v=U[c];l="";var E=this.clone();for(E.negative=0;!E.isZero();){var F=E.modn(v).toString(c);E=E.idivn(v),E.isZero()?l=F+l:l=N[f-F.length]+F+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(c,u){return s(typeof g<"u"),this.toArrayLike(g,c,u)},o.prototype.toArray=function(c,u){return this.toArrayLike(Array,c,u)},o.prototype.toArrayLike=function(c,u,l){var h=this.byteLength(),d=l||Math.max(1,h);s(h<=d,"byte array longer than desired length"),s(d>0,"Requested array length <= 0"),this.strip();var y=u==="le",C=new c(d),m,f,v=this.clone();if(y){for(f=0;!v.isZero();f++)m=v.andln(255),v.iushrn(8),C[f]=m;for(;f<d;f++)C[f]=0}else{for(f=0;f<d-h;f++)C[f]=0;for(f=0;!v.isZero();f++)m=v.andln(255),v.iushrn(8),C[d-f-1]=m}return C},Math.clz32?o.prototype._countBits=function(c){return 32-Math.clz32(c)}:o.prototype._countBits=function(c){var u=c,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},o.prototype._zeroBits=function(c){if(c===0)return 26;var u=c,l=0;return u&8191||(l+=13,u>>>=13),u&127||(l+=7,u>>>=7),u&15||(l+=4,u>>>=4),u&3||(l+=2,u>>>=2),u&1||l++,l},o.prototype.bitLength=function(){var c=this.words[this.length-1],u=this._countBits(c);return(this.length-1)*26+u};function H(A){for(var c=new Array(A.bitLength()),u=0;u<c.length;u++){var l=u/26|0,h=u%26;c[u]=(A.words[l]&1<<h)>>>h}return c}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(c+=l,l!==26)break}return c},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},o.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var u=0;u<c.length;u++)this.words[u]=this.words[u]|c.words[u];return this.strip()},o.prototype.ior=function(c){return s((this.negative|c.negative)===0),this.iuor(c)},o.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},o.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},o.prototype.iuand=function(c){var u;this.length>c.length?u=c:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&c.words[l];return this.length=u.length,this.strip()},o.prototype.iand=function(c){return s((this.negative|c.negative)===0),this.iuand(c)},o.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},o.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},o.prototype.iuxor=function(c){var u,l;this.length>c.length?(u=this,l=c):(u=c,l=this);for(var h=0;h<l.length;h++)this.words[h]=u.words[h]^l.words[h];if(this!==u)for(;h<u.length;h++)this.words[h]=u.words[h];return this.length=u.length,this.strip()},o.prototype.ixor=function(c){return s((this.negative|c.negative)===0),this.iuxor(c)},o.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},o.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},o.prototype.inotn=function(c){s(typeof c=="number"&&c>=0);var u=Math.ceil(c/26)|0,l=c%26;this._expand(u),l>0&&u--;for(var h=0;h<u;h++)this.words[h]=~this.words[h]&67108863;return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},o.prototype.notn=function(c){return this.clone().inotn(c)},o.prototype.setn=function(c,u){s(typeof c=="number"&&c>=0);var l=c/26|0,h=c%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<h:this.words[l]=this.words[l]&~(1<<h),this.strip()},o.prototype.iadd=function(c){var u;if(this.negative!==0&&c.negative===0)return this.negative=0,u=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,u=this.isub(c),c.negative=1,u._normSign();var l,h;this.length>c.length?(l=this,h=c):(l=c,h=this);for(var d=0,y=0;y<h.length;y++)u=(l.words[y]|0)+(h.words[y]|0)+d,this.words[y]=u&67108863,d=u>>>26;for(;d!==0&&y<l.length;y++)u=(l.words[y]|0)+d,this.words[y]=u&67108863,d=u>>>26;if(this.length=l.length,d!==0)this.words[this.length]=d,this.length++;else if(l!==this)for(;y<l.length;y++)this.words[y]=l.words[y];return this},o.prototype.add=function(c){var u;return c.negative!==0&&this.negative===0?(c.negative=0,u=this.sub(c),c.negative^=1,u):c.negative===0&&this.negative!==0?(this.negative=0,u=c.sub(this),this.negative=1,u):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},o.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var u=this.iadd(c);return c.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var l=this.cmp(c);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;l>0?(h=this,d=c):(h=c,d=this);for(var y=0,C=0;C<d.length;C++)u=(h.words[C]|0)-(d.words[C]|0)+y,y=u>>26,this.words[C]=u&67108863;for(;y!==0&&C<h.length;C++)u=(h.words[C]|0)+y,y=u>>26,this.words[C]=u&67108863;if(y===0&&C<h.length&&h!==this)for(;C<h.length;C++)this.words[C]=h.words[C];return this.length=Math.max(this.length,C),h!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(c){return this.clone().isub(c)};function Q(A,c,u){u.negative=c.negative^A.negative;var l=A.length+c.length|0;u.length=l,l=l-1|0;var h=A.words[0]|0,d=c.words[0]|0,y=h*d,C=y&67108863,m=y/67108864|0;u.words[0]=C;for(var f=1;f<l;f++){for(var v=m>>>26,E=m&67108863,F=Math.min(f,c.length-1),K=Math.max(0,f-A.length+1);K<=F;K++){var X=f-K|0;h=A.words[X]|0,d=c.words[K]|0,y=h*d+E,v+=y/67108864|0,E=y&67108863}u.words[f]=E|0,m=v|0}return m!==0?u.words[f]=m|0:u.length--,u.strip()}var $t=function(c,u,l){var h=c.words,d=u.words,y=l.words,C=0,m,f,v,E=h[0]|0,F=E&8191,K=E>>>13,X=h[1]|0,tt=X&8191,wt=X>>>13,se=h[2]|0,_t=se&8191,Ht=se>>>13,Ce=h[3]|0,jt=Ce&8191,P=Ce>>>13,j=h[4]|0,G=j&8191,et=j>>>13,st=h[5]|0,Z=st&8191,ct=st>>>13,at=h[6]|0,rt=at&8191,nt=at>>>13,Et=h[7]|0,ot=Et&8191,yt=Et>>>13,Tt=h[8]|0,pt=Tt&8191,M=Tt>>>13,x=h[9]|0,_=x&8191,O=x>>>13,k=d[0]|0,q=k&8191,Y=k>>>13,Lt=d[1]|0,vt=Lt&8191,St=Lt>>>13,te=d[2]|0,bt=te&8191,fe=te>>>13,Me=d[3]|0,Kt=Me&8191,he=Me>>>13,Ie=d[4]|0,Wt=Ie&8191,le=Ie>>>13,_e=d[5]|0,Vt=_e&8191,ue=_e>>>13,Fe=d[6]|0,Gt=Fe&8191,Xt=Fe>>>13,$e=d[7]|0,S=$e&8191,$=$e>>>13,T=d[8]|0,w=T&8191,D=T>>>13,V=d[9]|0,W=V&8191,z=V>>>13;l.negative=c.negative^u.negative,l.length=19,m=Math.imul(F,q),f=Math.imul(F,Y),f=f+Math.imul(K,q)|0,v=Math.imul(K,Y);var ut=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(ut>>>26)|0,ut&=67108863,m=Math.imul(tt,q),f=Math.imul(tt,Y),f=f+Math.imul(wt,q)|0,v=Math.imul(wt,Y),m=m+Math.imul(F,vt)|0,f=f+Math.imul(F,St)|0,f=f+Math.imul(K,vt)|0,v=v+Math.imul(K,St)|0;var Bt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,m=Math.imul(_t,q),f=Math.imul(_t,Y),f=f+Math.imul(Ht,q)|0,v=Math.imul(Ht,Y),m=m+Math.imul(tt,vt)|0,f=f+Math.imul(tt,St)|0,f=f+Math.imul(wt,vt)|0,v=v+Math.imul(wt,St)|0,m=m+Math.imul(F,bt)|0,f=f+Math.imul(F,fe)|0,f=f+Math.imul(K,bt)|0,v=v+Math.imul(K,fe)|0;var It=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(It>>>26)|0,It&=67108863,m=Math.imul(jt,q),f=Math.imul(jt,Y),f=f+Math.imul(P,q)|0,v=Math.imul(P,Y),m=m+Math.imul(_t,vt)|0,f=f+Math.imul(_t,St)|0,f=f+Math.imul(Ht,vt)|0,v=v+Math.imul(Ht,St)|0,m=m+Math.imul(tt,bt)|0,f=f+Math.imul(tt,fe)|0,f=f+Math.imul(wt,bt)|0,v=v+Math.imul(wt,fe)|0,m=m+Math.imul(F,Kt)|0,f=f+Math.imul(F,he)|0,f=f+Math.imul(K,Kt)|0,v=v+Math.imul(K,he)|0;var de=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(de>>>26)|0,de&=67108863,m=Math.imul(G,q),f=Math.imul(G,Y),f=f+Math.imul(et,q)|0,v=Math.imul(et,Y),m=m+Math.imul(jt,vt)|0,f=f+Math.imul(jt,St)|0,f=f+Math.imul(P,vt)|0,v=v+Math.imul(P,St)|0,m=m+Math.imul(_t,bt)|0,f=f+Math.imul(_t,fe)|0,f=f+Math.imul(Ht,bt)|0,v=v+Math.imul(Ht,fe)|0,m=m+Math.imul(tt,Kt)|0,f=f+Math.imul(tt,he)|0,f=f+Math.imul(wt,Kt)|0,v=v+Math.imul(wt,he)|0,m=m+Math.imul(F,Wt)|0,f=f+Math.imul(F,le)|0,f=f+Math.imul(K,Wt)|0,v=v+Math.imul(K,le)|0;var Nt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,m=Math.imul(Z,q),f=Math.imul(Z,Y),f=f+Math.imul(ct,q)|0,v=Math.imul(ct,Y),m=m+Math.imul(G,vt)|0,f=f+Math.imul(G,St)|0,f=f+Math.imul(et,vt)|0,v=v+Math.imul(et,St)|0,m=m+Math.imul(jt,bt)|0,f=f+Math.imul(jt,fe)|0,f=f+Math.imul(P,bt)|0,v=v+Math.imul(P,fe)|0,m=m+Math.imul(_t,Kt)|0,f=f+Math.imul(_t,he)|0,f=f+Math.imul(Ht,Kt)|0,v=v+Math.imul(Ht,he)|0,m=m+Math.imul(tt,Wt)|0,f=f+Math.imul(tt,le)|0,f=f+Math.imul(wt,Wt)|0,v=v+Math.imul(wt,le)|0,m=m+Math.imul(F,Vt)|0,f=f+Math.imul(F,ue)|0,f=f+Math.imul(K,Vt)|0,v=v+Math.imul(K,ue)|0;var zt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(zt>>>26)|0,zt&=67108863,m=Math.imul(rt,q),f=Math.imul(rt,Y),f=f+Math.imul(nt,q)|0,v=Math.imul(nt,Y),m=m+Math.imul(Z,vt)|0,f=f+Math.imul(Z,St)|0,f=f+Math.imul(ct,vt)|0,v=v+Math.imul(ct,St)|0,m=m+Math.imul(G,bt)|0,f=f+Math.imul(G,fe)|0,f=f+Math.imul(et,bt)|0,v=v+Math.imul(et,fe)|0,m=m+Math.imul(jt,Kt)|0,f=f+Math.imul(jt,he)|0,f=f+Math.imul(P,Kt)|0,v=v+Math.imul(P,he)|0,m=m+Math.imul(_t,Wt)|0,f=f+Math.imul(_t,le)|0,f=f+Math.imul(Ht,Wt)|0,v=v+Math.imul(Ht,le)|0,m=m+Math.imul(tt,Vt)|0,f=f+Math.imul(tt,ue)|0,f=f+Math.imul(wt,Vt)|0,v=v+Math.imul(wt,ue)|0,m=m+Math.imul(F,Gt)|0,f=f+Math.imul(F,Xt)|0,f=f+Math.imul(K,Gt)|0,v=v+Math.imul(K,Xt)|0;var Zt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ot,q),f=Math.imul(ot,Y),f=f+Math.imul(yt,q)|0,v=Math.imul(yt,Y),m=m+Math.imul(rt,vt)|0,f=f+Math.imul(rt,St)|0,f=f+Math.imul(nt,vt)|0,v=v+Math.imul(nt,St)|0,m=m+Math.imul(Z,bt)|0,f=f+Math.imul(Z,fe)|0,f=f+Math.imul(ct,bt)|0,v=v+Math.imul(ct,fe)|0,m=m+Math.imul(G,Kt)|0,f=f+Math.imul(G,he)|0,f=f+Math.imul(et,Kt)|0,v=v+Math.imul(et,he)|0,m=m+Math.imul(jt,Wt)|0,f=f+Math.imul(jt,le)|0,f=f+Math.imul(P,Wt)|0,v=v+Math.imul(P,le)|0,m=m+Math.imul(_t,Vt)|0,f=f+Math.imul(_t,ue)|0,f=f+Math.imul(Ht,Vt)|0,v=v+Math.imul(Ht,ue)|0,m=m+Math.imul(tt,Gt)|0,f=f+Math.imul(tt,Xt)|0,f=f+Math.imul(wt,Gt)|0,v=v+Math.imul(wt,Xt)|0,m=m+Math.imul(F,S)|0,f=f+Math.imul(F,$)|0,f=f+Math.imul(K,S)|0,v=v+Math.imul(K,$)|0;var oe=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(oe>>>26)|0,oe&=67108863,m=Math.imul(pt,q),f=Math.imul(pt,Y),f=f+Math.imul(M,q)|0,v=Math.imul(M,Y),m=m+Math.imul(ot,vt)|0,f=f+Math.imul(ot,St)|0,f=f+Math.imul(yt,vt)|0,v=v+Math.imul(yt,St)|0,m=m+Math.imul(rt,bt)|0,f=f+Math.imul(rt,fe)|0,f=f+Math.imul(nt,bt)|0,v=v+Math.imul(nt,fe)|0,m=m+Math.imul(Z,Kt)|0,f=f+Math.imul(Z,he)|0,f=f+Math.imul(ct,Kt)|0,v=v+Math.imul(ct,he)|0,m=m+Math.imul(G,Wt)|0,f=f+Math.imul(G,le)|0,f=f+Math.imul(et,Wt)|0,v=v+Math.imul(et,le)|0,m=m+Math.imul(jt,Vt)|0,f=f+Math.imul(jt,ue)|0,f=f+Math.imul(P,Vt)|0,v=v+Math.imul(P,ue)|0,m=m+Math.imul(_t,Gt)|0,f=f+Math.imul(_t,Xt)|0,f=f+Math.imul(Ht,Gt)|0,v=v+Math.imul(Ht,Xt)|0,m=m+Math.imul(tt,S)|0,f=f+Math.imul(tt,$)|0,f=f+Math.imul(wt,S)|0,v=v+Math.imul(wt,$)|0,m=m+Math.imul(F,w)|0,f=f+Math.imul(F,D)|0,f=f+Math.imul(K,w)|0,v=v+Math.imul(K,D)|0;var ie=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(ie>>>26)|0,ie&=67108863,m=Math.imul(_,q),f=Math.imul(_,Y),f=f+Math.imul(O,q)|0,v=Math.imul(O,Y),m=m+Math.imul(pt,vt)|0,f=f+Math.imul(pt,St)|0,f=f+Math.imul(M,vt)|0,v=v+Math.imul(M,St)|0,m=m+Math.imul(ot,bt)|0,f=f+Math.imul(ot,fe)|0,f=f+Math.imul(yt,bt)|0,v=v+Math.imul(yt,fe)|0,m=m+Math.imul(rt,Kt)|0,f=f+Math.imul(rt,he)|0,f=f+Math.imul(nt,Kt)|0,v=v+Math.imul(nt,he)|0,m=m+Math.imul(Z,Wt)|0,f=f+Math.imul(Z,le)|0,f=f+Math.imul(ct,Wt)|0,v=v+Math.imul(ct,le)|0,m=m+Math.imul(G,Vt)|0,f=f+Math.imul(G,ue)|0,f=f+Math.imul(et,Vt)|0,v=v+Math.imul(et,ue)|0,m=m+Math.imul(jt,Gt)|0,f=f+Math.imul(jt,Xt)|0,f=f+Math.imul(P,Gt)|0,v=v+Math.imul(P,Xt)|0,m=m+Math.imul(_t,S)|0,f=f+Math.imul(_t,$)|0,f=f+Math.imul(Ht,S)|0,v=v+Math.imul(Ht,$)|0,m=m+Math.imul(tt,w)|0,f=f+Math.imul(tt,D)|0,f=f+Math.imul(wt,w)|0,v=v+Math.imul(wt,D)|0,m=m+Math.imul(F,W)|0,f=f+Math.imul(F,z)|0,f=f+Math.imul(K,W)|0,v=v+Math.imul(K,z)|0;var Jt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,m=Math.imul(_,vt),f=Math.imul(_,St),f=f+Math.imul(O,vt)|0,v=Math.imul(O,St),m=m+Math.imul(pt,bt)|0,f=f+Math.imul(pt,fe)|0,f=f+Math.imul(M,bt)|0,v=v+Math.imul(M,fe)|0,m=m+Math.imul(ot,Kt)|0,f=f+Math.imul(ot,he)|0,f=f+Math.imul(yt,Kt)|0,v=v+Math.imul(yt,he)|0,m=m+Math.imul(rt,Wt)|0,f=f+Math.imul(rt,le)|0,f=f+Math.imul(nt,Wt)|0,v=v+Math.imul(nt,le)|0,m=m+Math.imul(Z,Vt)|0,f=f+Math.imul(Z,ue)|0,f=f+Math.imul(ct,Vt)|0,v=v+Math.imul(ct,ue)|0,m=m+Math.imul(G,Gt)|0,f=f+Math.imul(G,Xt)|0,f=f+Math.imul(et,Gt)|0,v=v+Math.imul(et,Xt)|0,m=m+Math.imul(jt,S)|0,f=f+Math.imul(jt,$)|0,f=f+Math.imul(P,S)|0,v=v+Math.imul(P,$)|0,m=m+Math.imul(_t,w)|0,f=f+Math.imul(_t,D)|0,f=f+Math.imul(Ht,w)|0,v=v+Math.imul(Ht,D)|0,m=m+Math.imul(tt,W)|0,f=f+Math.imul(tt,z)|0,f=f+Math.imul(wt,W)|0,v=v+Math.imul(wt,z)|0;var ee=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(ee>>>26)|0,ee&=67108863,m=Math.imul(_,bt),f=Math.imul(_,fe),f=f+Math.imul(O,bt)|0,v=Math.imul(O,fe),m=m+Math.imul(pt,Kt)|0,f=f+Math.imul(pt,he)|0,f=f+Math.imul(M,Kt)|0,v=v+Math.imul(M,he)|0,m=m+Math.imul(ot,Wt)|0,f=f+Math.imul(ot,le)|0,f=f+Math.imul(yt,Wt)|0,v=v+Math.imul(yt,le)|0,m=m+Math.imul(rt,Vt)|0,f=f+Math.imul(rt,ue)|0,f=f+Math.imul(nt,Vt)|0,v=v+Math.imul(nt,ue)|0,m=m+Math.imul(Z,Gt)|0,f=f+Math.imul(Z,Xt)|0,f=f+Math.imul(ct,Gt)|0,v=v+Math.imul(ct,Xt)|0,m=m+Math.imul(G,S)|0,f=f+Math.imul(G,$)|0,f=f+Math.imul(et,S)|0,v=v+Math.imul(et,$)|0,m=m+Math.imul(jt,w)|0,f=f+Math.imul(jt,D)|0,f=f+Math.imul(P,w)|0,v=v+Math.imul(P,D)|0,m=m+Math.imul(_t,W)|0,f=f+Math.imul(_t,z)|0,f=f+Math.imul(Ht,W)|0,v=v+Math.imul(Ht,z)|0;var Qt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,m=Math.imul(_,Kt),f=Math.imul(_,he),f=f+Math.imul(O,Kt)|0,v=Math.imul(O,he),m=m+Math.imul(pt,Wt)|0,f=f+Math.imul(pt,le)|0,f=f+Math.imul(M,Wt)|0,v=v+Math.imul(M,le)|0,m=m+Math.imul(ot,Vt)|0,f=f+Math.imul(ot,ue)|0,f=f+Math.imul(yt,Vt)|0,v=v+Math.imul(yt,ue)|0,m=m+Math.imul(rt,Gt)|0,f=f+Math.imul(rt,Xt)|0,f=f+Math.imul(nt,Gt)|0,v=v+Math.imul(nt,Xt)|0,m=m+Math.imul(Z,S)|0,f=f+Math.imul(Z,$)|0,f=f+Math.imul(ct,S)|0,v=v+Math.imul(ct,$)|0,m=m+Math.imul(G,w)|0,f=f+Math.imul(G,D)|0,f=f+Math.imul(et,w)|0,v=v+Math.imul(et,D)|0,m=m+Math.imul(jt,W)|0,f=f+Math.imul(jt,z)|0,f=f+Math.imul(P,W)|0,v=v+Math.imul(P,z)|0;var Ot=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,m=Math.imul(_,Wt),f=Math.imul(_,le),f=f+Math.imul(O,Wt)|0,v=Math.imul(O,le),m=m+Math.imul(pt,Vt)|0,f=f+Math.imul(pt,ue)|0,f=f+Math.imul(M,Vt)|0,v=v+Math.imul(M,ue)|0,m=m+Math.imul(ot,Gt)|0,f=f+Math.imul(ot,Xt)|0,f=f+Math.imul(yt,Gt)|0,v=v+Math.imul(yt,Xt)|0,m=m+Math.imul(rt,S)|0,f=f+Math.imul(rt,$)|0,f=f+Math.imul(nt,S)|0,v=v+Math.imul(nt,$)|0,m=m+Math.imul(Z,w)|0,f=f+Math.imul(Z,D)|0,f=f+Math.imul(ct,w)|0,v=v+Math.imul(ct,D)|0,m=m+Math.imul(G,W)|0,f=f+Math.imul(G,z)|0,f=f+Math.imul(et,W)|0,v=v+Math.imul(et,z)|0;var qt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(qt>>>26)|0,qt&=67108863,m=Math.imul(_,Vt),f=Math.imul(_,ue),f=f+Math.imul(O,Vt)|0,v=Math.imul(O,ue),m=m+Math.imul(pt,Gt)|0,f=f+Math.imul(pt,Xt)|0,f=f+Math.imul(M,Gt)|0,v=v+Math.imul(M,Xt)|0,m=m+Math.imul(ot,S)|0,f=f+Math.imul(ot,$)|0,f=f+Math.imul(yt,S)|0,v=v+Math.imul(yt,$)|0,m=m+Math.imul(rt,w)|0,f=f+Math.imul(rt,D)|0,f=f+Math.imul(nt,w)|0,v=v+Math.imul(nt,D)|0,m=m+Math.imul(Z,W)|0,f=f+Math.imul(Z,z)|0,f=f+Math.imul(ct,W)|0,v=v+Math.imul(ct,z)|0;var Rt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,m=Math.imul(_,Gt),f=Math.imul(_,Xt),f=f+Math.imul(O,Gt)|0,v=Math.imul(O,Xt),m=m+Math.imul(pt,S)|0,f=f+Math.imul(pt,$)|0,f=f+Math.imul(M,S)|0,v=v+Math.imul(M,$)|0,m=m+Math.imul(ot,w)|0,f=f+Math.imul(ot,D)|0,f=f+Math.imul(yt,w)|0,v=v+Math.imul(yt,D)|0,m=m+Math.imul(rt,W)|0,f=f+Math.imul(rt,z)|0,f=f+Math.imul(nt,W)|0,v=v+Math.imul(nt,z)|0;var Pt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,m=Math.imul(_,S),f=Math.imul(_,$),f=f+Math.imul(O,S)|0,v=Math.imul(O,$),m=m+Math.imul(pt,w)|0,f=f+Math.imul(pt,D)|0,f=f+Math.imul(M,w)|0,v=v+Math.imul(M,D)|0,m=m+Math.imul(ot,W)|0,f=f+Math.imul(ot,z)|0,f=f+Math.imul(yt,W)|0,v=v+Math.imul(yt,z)|0;var kt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(kt>>>26)|0,kt&=67108863,m=Math.imul(_,w),f=Math.imul(_,D),f=f+Math.imul(O,w)|0,v=Math.imul(O,D),m=m+Math.imul(pt,W)|0,f=f+Math.imul(pt,z)|0,f=f+Math.imul(M,W)|0,v=v+Math.imul(M,z)|0;var Ft=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,m=Math.imul(_,W),f=Math.imul(_,z),f=f+Math.imul(O,W)|0,v=Math.imul(O,z);var J=(C+m|0)+((f&8191)<<13)|0;return C=(v+(f>>>13)|0)+(J>>>26)|0,J&=67108863,y[0]=ut,y[1]=Bt,y[2]=It,y[3]=de,y[4]=Nt,y[5]=zt,y[6]=Zt,y[7]=oe,y[8]=ie,y[9]=Jt,y[10]=ee,y[11]=Qt,y[12]=Ot,y[13]=qt,y[14]=Rt,y[15]=Pt,y[16]=kt,y[17]=Ft,y[18]=J,C!==0&&(y[19]=C,l.length++),l};Math.imul||($t=Q);function Dt(A,c,u){u.negative=c.negative^A.negative,u.length=A.length+c.length;for(var l=0,h=0,d=0;d<u.length-1;d++){var y=h;h=0;for(var C=l&67108863,m=Math.min(d,c.length-1),f=Math.max(0,d-A.length+1);f<=m;f++){var v=d-f,E=A.words[v]|0,F=c.words[f]|0,K=E*F,X=K&67108863;y=y+(K/67108864|0)|0,X=X+C|0,C=X&67108863,y=y+(X>>>26)|0,h+=y>>>26,y&=67108863}u.words[d]=C,l=y,y=h}return l!==0?u.words[d]=l:u.length--,u.strip()}function xt(A,c,u){var l=new Ut;return l.mulp(A,c,u)}o.prototype.mulTo=function(c,u){var l,h=this.length+c.length;return this.length===10&&c.length===10?l=$t(this,c,u):h<63?l=Q(this,c,u):h<1024?l=Dt(this,c,u):l=xt(this,c,u),l};function Ut(A,c){this.x=A,this.y=c}Ut.prototype.makeRBT=function(c){for(var u=new Array(c),l=o.prototype._countBits(c)-1,h=0;h<c;h++)u[h]=this.revBin(h,l,c);return u},Ut.prototype.revBin=function(c,u,l){if(c===0||c===l-1)return c;for(var h=0,d=0;d<u;d++)h|=(c&1)<<u-d-1,c>>=1;return h},Ut.prototype.permute=function(c,u,l,h,d,y){for(var C=0;C<y;C++)h[C]=u[c[C]],d[C]=l[c[C]]},Ut.prototype.transform=function(c,u,l,h,d,y){this.permute(y,c,u,l,h,d);for(var C=1;C<d;C<<=1)for(var m=C<<1,f=Math.cos(2*Math.PI/m),v=Math.sin(2*Math.PI/m),E=0;E<d;E+=m)for(var F=f,K=v,X=0;X<C;X++){var tt=l[E+X],wt=h[E+X],se=l[E+X+C],_t=h[E+X+C],Ht=F*se-K*_t;_t=F*_t+K*se,se=Ht,l[E+X]=tt+se,h[E+X]=wt+_t,l[E+X+C]=tt-se,h[E+X+C]=wt-_t,X!==m&&(Ht=f*F-v*K,K=f*K+v*F,F=Ht)}},Ut.prototype.guessLen13b=function(c,u){var l=Math.max(u,c)|1,h=l&1,d=0;for(l=l/2|0;l;l=l>>>1)d++;return 1<<d+1+h},Ut.prototype.conjugate=function(c,u,l){if(!(l<=1))for(var h=0;h<l/2;h++){var d=c[h];c[h]=c[l-h-1],c[l-h-1]=d,d=u[h],u[h]=-u[l-h-1],u[l-h-1]=-d}},Ut.prototype.normalize13b=function(c,u){for(var l=0,h=0;h<u/2;h++){var d=Math.round(c[2*h+1]/u)*8192+Math.round(c[2*h]/u)+l;c[h]=d&67108863,d<67108864?l=0:l=d/67108864|0}return c},Ut.prototype.convert13b=function(c,u,l,h){for(var d=0,y=0;y<u;y++)d=d+(c[y]|0),l[2*y]=d&8191,d=d>>>13,l[2*y+1]=d&8191,d=d>>>13;for(y=2*u;y<h;++y)l[y]=0;s(d===0),s((d&-8192)===0)},Ut.prototype.stub=function(c){for(var u=new Array(c),l=0;l<c;l++)u[l]=0;return u},Ut.prototype.mulp=function(c,u,l){var h=2*this.guessLen13b(c.length,u.length),d=this.makeRBT(h),y=this.stub(h),C=new Array(h),m=new Array(h),f=new Array(h),v=new Array(h),E=new Array(h),F=new Array(h),K=l.words;K.length=h,this.convert13b(c.words,c.length,C,h),this.convert13b(u.words,u.length,v,h),this.transform(C,y,m,f,h,d),this.transform(v,y,E,F,h,d);for(var X=0;X<h;X++){var tt=m[X]*E[X]-f[X]*F[X];f[X]=m[X]*F[X]+f[X]*E[X],m[X]=tt}return this.conjugate(m,f,h),this.transform(m,f,K,y,h,d),this.conjugate(K,y,h),this.normalize13b(K,h),l.negative=c.negative^u.negative,l.length=c.length+u.length,l.strip()},o.prototype.mul=function(c){var u=new o(null);return u.words=new Array(this.length+c.length),this.mulTo(c,u)},o.prototype.mulf=function(c){var u=new o(null);return u.words=new Array(this.length+c.length),xt(this,c,u)},o.prototype.imul=function(c){return this.clone().mulTo(c,this)},o.prototype.imuln=function(c){s(typeof c=="number"),s(c<67108864);for(var u=0,l=0;l<this.length;l++){var h=(this.words[l]|0)*c,d=(h&67108863)+(u&67108863);u>>=26,u+=h/67108864|0,u+=d>>>26,this.words[l]=d&67108863}return u!==0&&(this.words[l]=u,this.length++),this},o.prototype.muln=function(c){return this.clone().imuln(c)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(c){var u=H(c);if(u.length===0)return new o(1);for(var l=this,h=0;h<u.length&&u[h]===0;h++,l=l.sqr());if(++h<u.length)for(var d=l.sqr();h<u.length;h++,d=d.sqr())u[h]!==0&&(l=l.mul(d));return l},o.prototype.iushln=function(c){s(typeof c=="number"&&c>=0);var u=c%26,l=(c-u)/26,h=67108863>>>26-u<<26-u,d;if(u!==0){var y=0;for(d=0;d<this.length;d++){var C=this.words[d]&h,m=(this.words[d]|0)-C<<u;this.words[d]=m|y,y=C>>>26-u}y&&(this.words[d]=y,this.length++)}if(l!==0){for(d=this.length-1;d>=0;d--)this.words[d+l]=this.words[d];for(d=0;d<l;d++)this.words[d]=0;this.length+=l}return this.strip()},o.prototype.ishln=function(c){return s(this.negative===0),this.iushln(c)},o.prototype.iushrn=function(c,u,l){s(typeof c=="number"&&c>=0);var h;u?h=(u-u%26)/26:h=0;var d=c%26,y=Math.min((c-d)/26,this.length),C=67108863^67108863>>>d<<d,m=l;if(h-=y,h=Math.max(0,h),m){for(var f=0;f<y;f++)m.words[f]=this.words[f];m.length=y}if(y!==0)if(this.length>y)for(this.length-=y,f=0;f<this.length;f++)this.words[f]=this.words[f+y];else this.words[0]=0,this.length=1;var v=0;for(f=this.length-1;f>=0&&(v!==0||f>=h);f--){var E=this.words[f]|0;this.words[f]=v<<26-d|E>>>d,v=E&C}return m&&v!==0&&(m.words[m.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(c,u,l){return s(this.negative===0),this.iushrn(c,u,l)},o.prototype.shln=function(c){return this.clone().ishln(c)},o.prototype.ushln=function(c){return this.clone().iushln(c)},o.prototype.shrn=function(c){return this.clone().ishrn(c)},o.prototype.ushrn=function(c){return this.clone().iushrn(c)},o.prototype.testn=function(c){s(typeof c=="number"&&c>=0);var u=c%26,l=(c-u)/26,h=1<<u;if(this.length<=l)return!1;var d=this.words[l];return!!(d&h)},o.prototype.imaskn=function(c){s(typeof c=="number"&&c>=0);var u=c%26,l=(c-u)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var h=67108863^67108863>>>u<<u;this.words[this.length-1]&=h}return this.strip()},o.prototype.maskn=function(c){return this.clone().imaskn(c)},o.prototype.iaddn=function(c){return s(typeof c=="number"),s(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},o.prototype._iaddn=function(c){this.words[0]+=c;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(c){if(s(typeof c=="number"),s(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},o.prototype.addn=function(c){return this.clone().iaddn(c)},o.prototype.subn=function(c){return this.clone().isubn(c)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(c,u,l){var h=c.length+l,d;this._expand(h);var y,C=0;for(d=0;d<c.length;d++){y=(this.words[d+l]|0)+C;var m=(c.words[d]|0)*u;y-=m&67108863,C=(y>>26)-(m/67108864|0),this.words[d+l]=y&67108863}for(;d<this.length-l;d++)y=(this.words[d+l]|0)+C,C=y>>26,this.words[d+l]=y&67108863;if(C===0)return this.strip();for(s(C===-1),C=0,d=0;d<this.length;d++)y=-(this.words[d]|0)+C,C=y>>26,this.words[d]=y&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(c,u){var l=this.length-c.length,h=this.clone(),d=c,y=d.words[d.length-1]|0,C=this._countBits(y);l=26-C,l!==0&&(d=d.ushln(l),h.iushln(l),y=d.words[d.length-1]|0);var m=h.length-d.length,f;if(u!=="mod"){f=new o(null),f.length=m+1,f.words=new Array(f.length);for(var v=0;v<f.length;v++)f.words[v]=0}var E=h.clone()._ishlnsubmul(d,1,m);E.negative===0&&(h=E,f&&(f.words[m]=1));for(var F=m-1;F>=0;F--){var K=(h.words[d.length+F]|0)*67108864+(h.words[d.length+F-1]|0);for(K=Math.min(K/y|0,67108863),h._ishlnsubmul(d,K,F);h.negative!==0;)K--,h.negative=0,h._ishlnsubmul(d,1,F),h.isZero()||(h.negative^=1);f&&(f.words[F]=K)}return f&&f.strip(),h.strip(),u!=="div"&&l!==0&&h.iushrn(l),{div:f||null,mod:h}},o.prototype.divmod=function(c,u,l){if(s(!c.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var h,d,y;return this.negative!==0&&c.negative===0?(y=this.neg().divmod(c,u),u!=="mod"&&(h=y.div.neg()),u!=="div"&&(d=y.mod.neg(),l&&d.negative!==0&&d.iadd(c)),{div:h,mod:d}):this.negative===0&&c.negative!==0?(y=this.divmod(c.neg(),u),u!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&c.negative?(y=this.neg().divmod(c.neg(),u),u!=="div"&&(d=y.mod.neg(),l&&d.negative!==0&&d.isub(c)),{div:y.div,mod:d}):c.length>this.length||this.cmp(c)<0?{div:new o(0),mod:this}:c.length===1?u==="div"?{div:this.divn(c.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new o(this.modn(c.words[0]))}:this._wordDiv(c,u)},o.prototype.div=function(c){return this.divmod(c,"div",!1).div},o.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},o.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},o.prototype.divRound=function(c){var u=this.divmod(c);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(c):u.mod,h=c.ushrn(1),d=c.andln(1),y=l.cmp(h);return y<0||d===1&&y===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modn=function(c){s(c<=67108863);for(var u=(1<<26)%c,l=0,h=this.length-1;h>=0;h--)l=(u*l+(this.words[h]|0))%c;return l},o.prototype.idivn=function(c){s(c<=67108863);for(var u=0,l=this.length-1;l>=0;l--){var h=(this.words[l]|0)+u*67108864;this.words[l]=h/c|0,u=h%c}return this.strip()},o.prototype.divn=function(c){return this.clone().idivn(c)},o.prototype.egcd=function(c){s(c.negative===0),s(!c.isZero());var u=this,l=c.clone();u.negative!==0?u=u.umod(c):u=u.clone();for(var h=new o(1),d=new o(0),y=new o(0),C=new o(1),m=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++m;for(var f=l.clone(),v=u.clone();!u.isZero();){for(var E=0,F=1;!(u.words[0]&F)&&E<26;++E,F<<=1);if(E>0)for(u.iushrn(E);E-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(f),d.isub(v)),h.iushrn(1),d.iushrn(1);for(var K=0,X=1;!(l.words[0]&X)&&K<26;++K,X<<=1);if(K>0)for(l.iushrn(K);K-- >0;)(y.isOdd()||C.isOdd())&&(y.iadd(f),C.isub(v)),y.iushrn(1),C.iushrn(1);u.cmp(l)>=0?(u.isub(l),h.isub(y),d.isub(C)):(l.isub(u),y.isub(h),C.isub(d))}return{a:y,b:C,gcd:l.iushln(m)}},o.prototype._invmp=function(c){s(c.negative===0),s(!c.isZero());var u=this,l=c.clone();u.negative!==0?u=u.umod(c):u=u.clone();for(var h=new o(1),d=new o(0),y=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var C=0,m=1;!(u.words[0]&m)&&C<26;++C,m<<=1);if(C>0)for(u.iushrn(C);C-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var f=0,v=1;!(l.words[0]&v)&&f<26;++f,v<<=1);if(f>0)for(l.iushrn(f);f-- >0;)d.isOdd()&&d.iadd(y),d.iushrn(1);u.cmp(l)>=0?(u.isub(l),h.isub(d)):(l.isub(u),d.isub(h))}var E;return u.cmpn(1)===0?E=h:E=d,E.cmpn(0)<0&&E.iadd(c),E},o.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var u=this.clone(),l=c.clone();u.negative=0,l.negative=0;for(var h=0;u.isEven()&&l.isEven();h++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var d=u.cmp(l);if(d<0){var y=u;u=l,l=y}else if(d===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(h)},o.prototype.invm=function(c){return this.egcd(c).a.umod(c)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(c){return this.words[0]&c},o.prototype.bincn=function(c){s(typeof c=="number");var u=c%26,l=(c-u)/26,h=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var d=h,y=l;d!==0&&y<this.length;y++){var C=this.words[y]|0;C+=d,d=C>>>26,C&=67108863,this.words[y]=C}return d!==0&&(this.words[y]=d,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(c){var u=c<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var l;if(this.length>1)l=1;else{u&&(c=-c),s(c<=67108863,"Number is too big");var h=this.words[0]|0;l=h===c?0:h<c?-1:1}return this.negative!==0?-l|0:l},o.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var u=this.ucmp(c);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var h=this.words[l]|0,d=c.words[l]|0;if(h!==d){h<d?u=-1:h>d&&(u=1);break}}return u},o.prototype.gtn=function(c){return this.cmpn(c)===1},o.prototype.gt=function(c){return this.cmp(c)===1},o.prototype.gten=function(c){return this.cmpn(c)>=0},o.prototype.gte=function(c){return this.cmp(c)>=0},o.prototype.ltn=function(c){return this.cmpn(c)===-1},o.prototype.lt=function(c){return this.cmp(c)===-1},o.prototype.lten=function(c){return this.cmpn(c)<=0},o.prototype.lte=function(c){return this.cmp(c)<=0},o.prototype.eqn=function(c){return this.cmpn(c)===0},o.prototype.eq=function(c){return this.cmp(c)===0},o.red=function(c){return new At(c)},o.prototype.toRed=function(c){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(c){return this.red=c,this},o.prototype.forceRed=function(c){return s(!this.red,"Already a number in reduction context"),this._forceRed(c)},o.prototype.redAdd=function(c){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},o.prototype.redIAdd=function(c){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},o.prototype.redSub=function(c){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},o.prototype.redISub=function(c){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},o.prototype.redShl=function(c){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},o.prototype.redMul=function(c){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},o.prototype.redIMul=function(c){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(c){return s(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var we={k256:null,p224:null,p192:null,p25519:null};function Mt(A,c){this.name=A,this.p=new o(c,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Mt.prototype._tmp=function(){var c=new o(null);return c.words=new Array(Math.ceil(this.n/13)),c},Mt.prototype.ireduce=function(c){var u=c,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var h=l<this.n?-1:u.ucmp(this.p);return h===0?(u.words[0]=0,u.length=1):h>0?u.isub(this.p):u.strip(),u},Mt.prototype.split=function(c,u){c.iushrn(this.n,0,u)},Mt.prototype.imulK=function(c){return c.imul(this.k)};function ae(){Mt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(ae,Mt),ae.prototype.split=function(c,u){for(var l=4194303,h=Math.min(c.length,9),d=0;d<h;d++)u.words[d]=c.words[d];if(u.length=h,c.length<=9){c.words[0]=0,c.length=1;return}var y=c.words[9];for(u.words[u.length++]=y&l,d=10;d<c.length;d++){var C=c.words[d]|0;c.words[d-10]=(C&l)<<4|y>>>22,y=C}y>>>=22,c.words[d-10]=y,y===0&&c.length>10?c.length-=10:c.length-=9},ae.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var u=0,l=0;l<c.length;l++){var h=c.words[l]|0;u+=h*977,c.words[l]=u&67108863,u=h*64+(u/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function Yt(){Mt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Yt,Mt);function ve(){Mt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(ve,Mt);function ne(){Mt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(ne,Mt),ne.prototype.imulK=function(c){for(var u=0,l=0;l<c.length;l++){var h=(c.words[l]|0)*19+u,d=h&67108863;h>>>=26,c.words[l]=d,u=h}return u!==0&&(c.words[c.length++]=u),c},o._prime=function(c){if(we[c])return we[c];var u;if(c==="k256")u=new ae;else if(c==="p224")u=new Yt;else if(c==="p192")u=new ve;else if(c==="p25519")u=new ne;else throw new Error("Unknown prime "+c);return we[c]=u,u};function At(A){if(typeof A=="string"){var c=o._prime(A);this.m=c.p,this.prime=c}else s(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}At.prototype._verify1=function(c){s(c.negative===0,"red works only with positives"),s(c.red,"red works only with red numbers")},At.prototype._verify2=function(c,u){s((c.negative|u.negative)===0,"red works only with positives"),s(c.red&&c.red===u.red,"red works only with red numbers")},At.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},At.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},At.prototype.add=function(c,u){this._verify2(c,u);var l=c.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},At.prototype.iadd=function(c,u){this._verify2(c,u);var l=c.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},At.prototype.sub=function(c,u){this._verify2(c,u);var l=c.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},At.prototype.isub=function(c,u){this._verify2(c,u);var l=c.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},At.prototype.shl=function(c,u){return this._verify1(c),this.imod(c.ushln(u))},At.prototype.imul=function(c,u){return this._verify2(c,u),this.imod(c.imul(u))},At.prototype.mul=function(c,u){return this._verify2(c,u),this.imod(c.mul(u))},At.prototype.isqr=function(c){return this.imul(c,c.clone())},At.prototype.sqr=function(c){return this.mul(c,c)},At.prototype.sqrt=function(c){if(c.isZero())return c.clone();var u=this.m.andln(3);if(s(u%2===1),u===3){var l=this.m.add(new o(1)).iushrn(2);return this.pow(c,l)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);s(!h.isZero());var y=new o(1).toRed(this),C=y.redNeg(),m=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new o(2*f*f).toRed(this);this.pow(f,m).cmp(C)!==0;)f.redIAdd(C);for(var v=this.pow(f,h),E=this.pow(c,h.addn(1).iushrn(1)),F=this.pow(c,h),K=d;F.cmp(y)!==0;){for(var X=F,tt=0;X.cmp(y)!==0;tt++)X=X.redSqr();s(tt<K);var wt=this.pow(v,new o(1).iushln(K-tt-1));E=E.redMul(wt),v=wt.redSqr(),F=F.redMul(v),K=tt}return E},At.prototype.invm=function(c){var u=c._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},At.prototype.pow=function(c,u){if(u.isZero())return new o(1);if(u.cmpn(1)===0)return c.clone();var l=4,h=new Array(1<<l);h[0]=new o(1).toRed(this),h[1]=c;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],c);var y=h[0],C=0,m=0,f=u.bitLength()%26;for(f===0&&(f=26),d=u.length-1;d>=0;d--){for(var v=u.words[d],E=f-1;E>=0;E--){var F=v>>E&1;if(y!==h[0]&&(y=this.sqr(y)),F===0&&C===0){m=0;continue}C<<=1,C|=F,m++,!(m!==l&&(d!==0||E!==0))&&(y=this.mul(y,h[C]),m=0,C=0)}f=26}return y},At.prototype.convertTo=function(c){var u=c.umod(this.m);return u===c?u.clone():u},At.prototype.convertFrom=function(c){var u=c.clone();return u.red=null,u},o.mont=function(c){return new me(c)};function me(A){At.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(me,At),me.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},me.prototype.convertFrom=function(c){var u=this.imod(c.mul(this.rinv));return u.red=null,u},me.prototype.imul=function(c,u){if(c.isZero()||u.isZero())return c.words[0]=0,c.length=1,c;var l=c.imul(u),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=l.isub(h).iushrn(this.shift),y=d;return d.cmp(this.m)>=0?y=d.isub(this.m):d.cmpn(0)<0&&(y=d.iadd(this.m)),y._forceRed(this)},me.prototype.mul=function(c,u){if(c.isZero()||u.isZero())return new o(0)._forceRed(this);var l=c.mul(u),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=l.isub(h).iushrn(this.shift),y=d;return d.cmp(this.m)>=0?y=d.isub(this.m):d.cmpn(0)<0&&(y=d.iadd(this.m)),y._forceRed(this)},me.prototype.invm=function(c){var u=this.imod(c._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(r,commonjsGlobal)})(bn$1);var bnExports={},bn={get exports(){return bnExports},set exports(r){bnExports=r}};(function(r){(function(e,n){function s(A,c){if(!A)throw new Error(c||"Assertion failed")}function a(A,c){A.super_=c;var u=function(){};u.prototype=c.prototype,A.prototype=new u,A.prototype.constructor=A}function o(A,c,u){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((c==="le"||c==="be")&&(u=c,c=10),this._init(A||0,c||10,u||"be"))}typeof e=="object"?e.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var g;try{g=commonjsRequire("buffer").Buffer}catch{}o.isBN=function(c){return c instanceof o?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===o.wordSize&&Array.isArray(c.words)},o.max=function(c,u){return c.cmp(u)>0?c:u},o.min=function(c,u){return c.cmp(u)<0?c:u},o.prototype._init=function(c,u,l){if(typeof c=="number")return this._initNumber(c,u,l);if(typeof c=="object")return this._initArray(c,u,l);u==="hex"&&(u=16),s(u===(u|0)&&u>=2&&u<=36),c=c.toString().replace(/\s+/g,"");var h=0;c[0]==="-"&&h++,u===16?this._parseHex(c,h):this._parseBase(c,u,h),c[0]==="-"&&(this.negative=1),this.strip(),l==="le"&&this._initArray(this.toArray(),u,l)},o.prototype._initNumber=function(c,u,l){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(s(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},o.prototype._initArray=function(c,u,l){if(s(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,y,C=0;if(l==="be")for(h=c.length-1,d=0;h>=0;h-=3)y=c[h]|c[h-1]<<8|c[h-2]<<16,this.words[d]|=y<<C&67108863,this.words[d+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,d++);else if(l==="le")for(h=0,d=0;h<c.length;h+=3)y=c[h]|c[h+1]<<8|c[h+2]<<16,this.words[d]|=y<<C&67108863,this.words[d+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,d++);return this.strip()};function b(A,c,u){for(var l=0,h=Math.min(A.length,u),d=c;d<h;d++){var y=A.charCodeAt(d)-48;l<<=4,y>=49&&y<=54?l|=y-49+10:y>=17&&y<=22?l|=y-17+10:l|=y&15}return l}o.prototype._parseHex=function(c,u){this.length=Math.ceil((c.length-u)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var h,d,y=0;for(l=c.length-6,h=0;l>=u;l-=6)d=b(c,l,l+6),this.words[h]|=d<<y&67108863,this.words[h+1]|=d>>>26-y&4194303,y+=24,y>=26&&(y-=26,h++);l+6!==u&&(d=b(c,u,l+6),this.words[h]|=d<<y&67108863,this.words[h+1]|=d>>>26-y&4194303),this.strip()};function B(A,c,u,l){for(var h=0,d=Math.min(A.length,u),y=c;y<d;y++){var C=A.charCodeAt(y)-48;h*=l,C>=49?h+=C-49+10:C>=17?h+=C-17+10:h+=C}return h}o.prototype._parseBase=function(c,u,l){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=u)h++;h--,d=d/u|0;for(var y=c.length-l,C=y%h,m=Math.min(y,y-C)+l,f=0,v=l;v<m;v+=h)f=B(c,v,v+h,u),this.imuln(d),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(C!==0){var E=1;for(f=B(c,v,c.length,u),v=0;v<C;v++)E*=u;this.imuln(E),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},o.prototype.copy=function(c){c.words=new Array(this.length);for(var u=0;u<this.length;u++)c.words[u]=this.words[u];c.length=this.length,c.negative=this.negative,c.red=this.red},o.prototype.clone=function(){var c=new o(null);return this.copy(c),c},o.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],U=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(c,u){c=c||10,u=u|0||1;var l;if(c===16||c==="hex"){l="";for(var h=0,d=0,y=0;y<this.length;y++){var C=this.words[y],m=((C<<h|d)&16777215).toString(16);d=C>>>24-h&16777215,d!==0||y!==this.length-1?l=N[6-m.length]+m+l:l=m+l,h+=2,h>=26&&(h-=26,y--)}for(d!==0&&(l=d.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(c===(c|0)&&c>=2&&c<=36){var f=I[c],v=U[c];l="";var E=this.clone();for(E.negative=0;!E.isZero();){var F=E.modn(v).toString(c);E=E.idivn(v),E.isZero()?l=F+l:l=N[f-F.length]+F+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(c,u){return s(typeof g<"u"),this.toArrayLike(g,c,u)},o.prototype.toArray=function(c,u){return this.toArrayLike(Array,c,u)},o.prototype.toArrayLike=function(c,u,l){var h=this.byteLength(),d=l||Math.max(1,h);s(h<=d,"byte array longer than desired length"),s(d>0,"Requested array length <= 0"),this.strip();var y=u==="le",C=new c(d),m,f,v=this.clone();if(y){for(f=0;!v.isZero();f++)m=v.andln(255),v.iushrn(8),C[f]=m;for(;f<d;f++)C[f]=0}else{for(f=0;f<d-h;f++)C[f]=0;for(f=0;!v.isZero();f++)m=v.andln(255),v.iushrn(8),C[d-f-1]=m}return C},Math.clz32?o.prototype._countBits=function(c){return 32-Math.clz32(c)}:o.prototype._countBits=function(c){var u=c,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},o.prototype._zeroBits=function(c){if(c===0)return 26;var u=c,l=0;return u&8191||(l+=13,u>>>=13),u&127||(l+=7,u>>>=7),u&15||(l+=4,u>>>=4),u&3||(l+=2,u>>>=2),u&1||l++,l},o.prototype.bitLength=function(){var c=this.words[this.length-1],u=this._countBits(c);return(this.length-1)*26+u};function H(A){for(var c=new Array(A.bitLength()),u=0;u<c.length;u++){var l=u/26|0,h=u%26;c[u]=(A.words[l]&1<<h)>>>h}return c}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(c+=l,l!==26)break}return c},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},o.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var u=0;u<c.length;u++)this.words[u]=this.words[u]|c.words[u];return this.strip()},o.prototype.ior=function(c){return s((this.negative|c.negative)===0),this.iuor(c)},o.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},o.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},o.prototype.iuand=function(c){var u;this.length>c.length?u=c:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&c.words[l];return this.length=u.length,this.strip()},o.prototype.iand=function(c){return s((this.negative|c.negative)===0),this.iuand(c)},o.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},o.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},o.prototype.iuxor=function(c){var u,l;this.length>c.length?(u=this,l=c):(u=c,l=this);for(var h=0;h<l.length;h++)this.words[h]=u.words[h]^l.words[h];if(this!==u)for(;h<u.length;h++)this.words[h]=u.words[h];return this.length=u.length,this.strip()},o.prototype.ixor=function(c){return s((this.negative|c.negative)===0),this.iuxor(c)},o.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},o.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},o.prototype.inotn=function(c){s(typeof c=="number"&&c>=0);var u=Math.ceil(c/26)|0,l=c%26;this._expand(u),l>0&&u--;for(var h=0;h<u;h++)this.words[h]=~this.words[h]&67108863;return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},o.prototype.notn=function(c){return this.clone().inotn(c)},o.prototype.setn=function(c,u){s(typeof c=="number"&&c>=0);var l=c/26|0,h=c%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<h:this.words[l]=this.words[l]&~(1<<h),this.strip()},o.prototype.iadd=function(c){var u;if(this.negative!==0&&c.negative===0)return this.negative=0,u=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,u=this.isub(c),c.negative=1,u._normSign();var l,h;this.length>c.length?(l=this,h=c):(l=c,h=this);for(var d=0,y=0;y<h.length;y++)u=(l.words[y]|0)+(h.words[y]|0)+d,this.words[y]=u&67108863,d=u>>>26;for(;d!==0&&y<l.length;y++)u=(l.words[y]|0)+d,this.words[y]=u&67108863,d=u>>>26;if(this.length=l.length,d!==0)this.words[this.length]=d,this.length++;else if(l!==this)for(;y<l.length;y++)this.words[y]=l.words[y];return this},o.prototype.add=function(c){var u;return c.negative!==0&&this.negative===0?(c.negative=0,u=this.sub(c),c.negative^=1,u):c.negative===0&&this.negative!==0?(this.negative=0,u=c.sub(this),this.negative=1,u):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},o.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var u=this.iadd(c);return c.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var l=this.cmp(c);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;l>0?(h=this,d=c):(h=c,d=this);for(var y=0,C=0;C<d.length;C++)u=(h.words[C]|0)-(d.words[C]|0)+y,y=u>>26,this.words[C]=u&67108863;for(;y!==0&&C<h.length;C++)u=(h.words[C]|0)+y,y=u>>26,this.words[C]=u&67108863;if(y===0&&C<h.length&&h!==this)for(;C<h.length;C++)this.words[C]=h.words[C];return this.length=Math.max(this.length,C),h!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(c){return this.clone().isub(c)};function Q(A,c,u){u.negative=c.negative^A.negative;var l=A.length+c.length|0;u.length=l,l=l-1|0;var h=A.words[0]|0,d=c.words[0]|0,y=h*d,C=y&67108863,m=y/67108864|0;u.words[0]=C;for(var f=1;f<l;f++){for(var v=m>>>26,E=m&67108863,F=Math.min(f,c.length-1),K=Math.max(0,f-A.length+1);K<=F;K++){var X=f-K|0;h=A.words[X]|0,d=c.words[K]|0,y=h*d+E,v+=y/67108864|0,E=y&67108863}u.words[f]=E|0,m=v|0}return m!==0?u.words[f]=m|0:u.length--,u.strip()}var $t=function(c,u,l){var h=c.words,d=u.words,y=l.words,C=0,m,f,v,E=h[0]|0,F=E&8191,K=E>>>13,X=h[1]|0,tt=X&8191,wt=X>>>13,se=h[2]|0,_t=se&8191,Ht=se>>>13,Ce=h[3]|0,jt=Ce&8191,P=Ce>>>13,j=h[4]|0,G=j&8191,et=j>>>13,st=h[5]|0,Z=st&8191,ct=st>>>13,at=h[6]|0,rt=at&8191,nt=at>>>13,Et=h[7]|0,ot=Et&8191,yt=Et>>>13,Tt=h[8]|0,pt=Tt&8191,M=Tt>>>13,x=h[9]|0,_=x&8191,O=x>>>13,k=d[0]|0,q=k&8191,Y=k>>>13,Lt=d[1]|0,vt=Lt&8191,St=Lt>>>13,te=d[2]|0,bt=te&8191,fe=te>>>13,Me=d[3]|0,Kt=Me&8191,he=Me>>>13,Ie=d[4]|0,Wt=Ie&8191,le=Ie>>>13,_e=d[5]|0,Vt=_e&8191,ue=_e>>>13,Fe=d[6]|0,Gt=Fe&8191,Xt=Fe>>>13,$e=d[7]|0,S=$e&8191,$=$e>>>13,T=d[8]|0,w=T&8191,D=T>>>13,V=d[9]|0,W=V&8191,z=V>>>13;l.negative=c.negative^u.negative,l.length=19,m=Math.imul(F,q),f=Math.imul(F,Y),f=f+Math.imul(K,q)|0,v=Math.imul(K,Y);var ut=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(ut>>>26)|0,ut&=67108863,m=Math.imul(tt,q),f=Math.imul(tt,Y),f=f+Math.imul(wt,q)|0,v=Math.imul(wt,Y),m=m+Math.imul(F,vt)|0,f=f+Math.imul(F,St)|0,f=f+Math.imul(K,vt)|0,v=v+Math.imul(K,St)|0;var Bt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,m=Math.imul(_t,q),f=Math.imul(_t,Y),f=f+Math.imul(Ht,q)|0,v=Math.imul(Ht,Y),m=m+Math.imul(tt,vt)|0,f=f+Math.imul(tt,St)|0,f=f+Math.imul(wt,vt)|0,v=v+Math.imul(wt,St)|0,m=m+Math.imul(F,bt)|0,f=f+Math.imul(F,fe)|0,f=f+Math.imul(K,bt)|0,v=v+Math.imul(K,fe)|0;var It=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(It>>>26)|0,It&=67108863,m=Math.imul(jt,q),f=Math.imul(jt,Y),f=f+Math.imul(P,q)|0,v=Math.imul(P,Y),m=m+Math.imul(_t,vt)|0,f=f+Math.imul(_t,St)|0,f=f+Math.imul(Ht,vt)|0,v=v+Math.imul(Ht,St)|0,m=m+Math.imul(tt,bt)|0,f=f+Math.imul(tt,fe)|0,f=f+Math.imul(wt,bt)|0,v=v+Math.imul(wt,fe)|0,m=m+Math.imul(F,Kt)|0,f=f+Math.imul(F,he)|0,f=f+Math.imul(K,Kt)|0,v=v+Math.imul(K,he)|0;var de=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(de>>>26)|0,de&=67108863,m=Math.imul(G,q),f=Math.imul(G,Y),f=f+Math.imul(et,q)|0,v=Math.imul(et,Y),m=m+Math.imul(jt,vt)|0,f=f+Math.imul(jt,St)|0,f=f+Math.imul(P,vt)|0,v=v+Math.imul(P,St)|0,m=m+Math.imul(_t,bt)|0,f=f+Math.imul(_t,fe)|0,f=f+Math.imul(Ht,bt)|0,v=v+Math.imul(Ht,fe)|0,m=m+Math.imul(tt,Kt)|0,f=f+Math.imul(tt,he)|0,f=f+Math.imul(wt,Kt)|0,v=v+Math.imul(wt,he)|0,m=m+Math.imul(F,Wt)|0,f=f+Math.imul(F,le)|0,f=f+Math.imul(K,Wt)|0,v=v+Math.imul(K,le)|0;var Nt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,m=Math.imul(Z,q),f=Math.imul(Z,Y),f=f+Math.imul(ct,q)|0,v=Math.imul(ct,Y),m=m+Math.imul(G,vt)|0,f=f+Math.imul(G,St)|0,f=f+Math.imul(et,vt)|0,v=v+Math.imul(et,St)|0,m=m+Math.imul(jt,bt)|0,f=f+Math.imul(jt,fe)|0,f=f+Math.imul(P,bt)|0,v=v+Math.imul(P,fe)|0,m=m+Math.imul(_t,Kt)|0,f=f+Math.imul(_t,he)|0,f=f+Math.imul(Ht,Kt)|0,v=v+Math.imul(Ht,he)|0,m=m+Math.imul(tt,Wt)|0,f=f+Math.imul(tt,le)|0,f=f+Math.imul(wt,Wt)|0,v=v+Math.imul(wt,le)|0,m=m+Math.imul(F,Vt)|0,f=f+Math.imul(F,ue)|0,f=f+Math.imul(K,Vt)|0,v=v+Math.imul(K,ue)|0;var zt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(zt>>>26)|0,zt&=67108863,m=Math.imul(rt,q),f=Math.imul(rt,Y),f=f+Math.imul(nt,q)|0,v=Math.imul(nt,Y),m=m+Math.imul(Z,vt)|0,f=f+Math.imul(Z,St)|0,f=f+Math.imul(ct,vt)|0,v=v+Math.imul(ct,St)|0,m=m+Math.imul(G,bt)|0,f=f+Math.imul(G,fe)|0,f=f+Math.imul(et,bt)|0,v=v+Math.imul(et,fe)|0,m=m+Math.imul(jt,Kt)|0,f=f+Math.imul(jt,he)|0,f=f+Math.imul(P,Kt)|0,v=v+Math.imul(P,he)|0,m=m+Math.imul(_t,Wt)|0,f=f+Math.imul(_t,le)|0,f=f+Math.imul(Ht,Wt)|0,v=v+Math.imul(Ht,le)|0,m=m+Math.imul(tt,Vt)|0,f=f+Math.imul(tt,ue)|0,f=f+Math.imul(wt,Vt)|0,v=v+Math.imul(wt,ue)|0,m=m+Math.imul(F,Gt)|0,f=f+Math.imul(F,Xt)|0,f=f+Math.imul(K,Gt)|0,v=v+Math.imul(K,Xt)|0;var Zt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ot,q),f=Math.imul(ot,Y),f=f+Math.imul(yt,q)|0,v=Math.imul(yt,Y),m=m+Math.imul(rt,vt)|0,f=f+Math.imul(rt,St)|0,f=f+Math.imul(nt,vt)|0,v=v+Math.imul(nt,St)|0,m=m+Math.imul(Z,bt)|0,f=f+Math.imul(Z,fe)|0,f=f+Math.imul(ct,bt)|0,v=v+Math.imul(ct,fe)|0,m=m+Math.imul(G,Kt)|0,f=f+Math.imul(G,he)|0,f=f+Math.imul(et,Kt)|0,v=v+Math.imul(et,he)|0,m=m+Math.imul(jt,Wt)|0,f=f+Math.imul(jt,le)|0,f=f+Math.imul(P,Wt)|0,v=v+Math.imul(P,le)|0,m=m+Math.imul(_t,Vt)|0,f=f+Math.imul(_t,ue)|0,f=f+Math.imul(Ht,Vt)|0,v=v+Math.imul(Ht,ue)|0,m=m+Math.imul(tt,Gt)|0,f=f+Math.imul(tt,Xt)|0,f=f+Math.imul(wt,Gt)|0,v=v+Math.imul(wt,Xt)|0,m=m+Math.imul(F,S)|0,f=f+Math.imul(F,$)|0,f=f+Math.imul(K,S)|0,v=v+Math.imul(K,$)|0;var oe=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(oe>>>26)|0,oe&=67108863,m=Math.imul(pt,q),f=Math.imul(pt,Y),f=f+Math.imul(M,q)|0,v=Math.imul(M,Y),m=m+Math.imul(ot,vt)|0,f=f+Math.imul(ot,St)|0,f=f+Math.imul(yt,vt)|0,v=v+Math.imul(yt,St)|0,m=m+Math.imul(rt,bt)|0,f=f+Math.imul(rt,fe)|0,f=f+Math.imul(nt,bt)|0,v=v+Math.imul(nt,fe)|0,m=m+Math.imul(Z,Kt)|0,f=f+Math.imul(Z,he)|0,f=f+Math.imul(ct,Kt)|0,v=v+Math.imul(ct,he)|0,m=m+Math.imul(G,Wt)|0,f=f+Math.imul(G,le)|0,f=f+Math.imul(et,Wt)|0,v=v+Math.imul(et,le)|0,m=m+Math.imul(jt,Vt)|0,f=f+Math.imul(jt,ue)|0,f=f+Math.imul(P,Vt)|0,v=v+Math.imul(P,ue)|0,m=m+Math.imul(_t,Gt)|0,f=f+Math.imul(_t,Xt)|0,f=f+Math.imul(Ht,Gt)|0,v=v+Math.imul(Ht,Xt)|0,m=m+Math.imul(tt,S)|0,f=f+Math.imul(tt,$)|0,f=f+Math.imul(wt,S)|0,v=v+Math.imul(wt,$)|0,m=m+Math.imul(F,w)|0,f=f+Math.imul(F,D)|0,f=f+Math.imul(K,w)|0,v=v+Math.imul(K,D)|0;var ie=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(ie>>>26)|0,ie&=67108863,m=Math.imul(_,q),f=Math.imul(_,Y),f=f+Math.imul(O,q)|0,v=Math.imul(O,Y),m=m+Math.imul(pt,vt)|0,f=f+Math.imul(pt,St)|0,f=f+Math.imul(M,vt)|0,v=v+Math.imul(M,St)|0,m=m+Math.imul(ot,bt)|0,f=f+Math.imul(ot,fe)|0,f=f+Math.imul(yt,bt)|0,v=v+Math.imul(yt,fe)|0,m=m+Math.imul(rt,Kt)|0,f=f+Math.imul(rt,he)|0,f=f+Math.imul(nt,Kt)|0,v=v+Math.imul(nt,he)|0,m=m+Math.imul(Z,Wt)|0,f=f+Math.imul(Z,le)|0,f=f+Math.imul(ct,Wt)|0,v=v+Math.imul(ct,le)|0,m=m+Math.imul(G,Vt)|0,f=f+Math.imul(G,ue)|0,f=f+Math.imul(et,Vt)|0,v=v+Math.imul(et,ue)|0,m=m+Math.imul(jt,Gt)|0,f=f+Math.imul(jt,Xt)|0,f=f+Math.imul(P,Gt)|0,v=v+Math.imul(P,Xt)|0,m=m+Math.imul(_t,S)|0,f=f+Math.imul(_t,$)|0,f=f+Math.imul(Ht,S)|0,v=v+Math.imul(Ht,$)|0,m=m+Math.imul(tt,w)|0,f=f+Math.imul(tt,D)|0,f=f+Math.imul(wt,w)|0,v=v+Math.imul(wt,D)|0,m=m+Math.imul(F,W)|0,f=f+Math.imul(F,z)|0,f=f+Math.imul(K,W)|0,v=v+Math.imul(K,z)|0;var Jt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,m=Math.imul(_,vt),f=Math.imul(_,St),f=f+Math.imul(O,vt)|0,v=Math.imul(O,St),m=m+Math.imul(pt,bt)|0,f=f+Math.imul(pt,fe)|0,f=f+Math.imul(M,bt)|0,v=v+Math.imul(M,fe)|0,m=m+Math.imul(ot,Kt)|0,f=f+Math.imul(ot,he)|0,f=f+Math.imul(yt,Kt)|0,v=v+Math.imul(yt,he)|0,m=m+Math.imul(rt,Wt)|0,f=f+Math.imul(rt,le)|0,f=f+Math.imul(nt,Wt)|0,v=v+Math.imul(nt,le)|0,m=m+Math.imul(Z,Vt)|0,f=f+Math.imul(Z,ue)|0,f=f+Math.imul(ct,Vt)|0,v=v+Math.imul(ct,ue)|0,m=m+Math.imul(G,Gt)|0,f=f+Math.imul(G,Xt)|0,f=f+Math.imul(et,Gt)|0,v=v+Math.imul(et,Xt)|0,m=m+Math.imul(jt,S)|0,f=f+Math.imul(jt,$)|0,f=f+Math.imul(P,S)|0,v=v+Math.imul(P,$)|0,m=m+Math.imul(_t,w)|0,f=f+Math.imul(_t,D)|0,f=f+Math.imul(Ht,w)|0,v=v+Math.imul(Ht,D)|0,m=m+Math.imul(tt,W)|0,f=f+Math.imul(tt,z)|0,f=f+Math.imul(wt,W)|0,v=v+Math.imul(wt,z)|0;var ee=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(ee>>>26)|0,ee&=67108863,m=Math.imul(_,bt),f=Math.imul(_,fe),f=f+Math.imul(O,bt)|0,v=Math.imul(O,fe),m=m+Math.imul(pt,Kt)|0,f=f+Math.imul(pt,he)|0,f=f+Math.imul(M,Kt)|0,v=v+Math.imul(M,he)|0,m=m+Math.imul(ot,Wt)|0,f=f+Math.imul(ot,le)|0,f=f+Math.imul(yt,Wt)|0,v=v+Math.imul(yt,le)|0,m=m+Math.imul(rt,Vt)|0,f=f+Math.imul(rt,ue)|0,f=f+Math.imul(nt,Vt)|0,v=v+Math.imul(nt,ue)|0,m=m+Math.imul(Z,Gt)|0,f=f+Math.imul(Z,Xt)|0,f=f+Math.imul(ct,Gt)|0,v=v+Math.imul(ct,Xt)|0,m=m+Math.imul(G,S)|0,f=f+Math.imul(G,$)|0,f=f+Math.imul(et,S)|0,v=v+Math.imul(et,$)|0,m=m+Math.imul(jt,w)|0,f=f+Math.imul(jt,D)|0,f=f+Math.imul(P,w)|0,v=v+Math.imul(P,D)|0,m=m+Math.imul(_t,W)|0,f=f+Math.imul(_t,z)|0,f=f+Math.imul(Ht,W)|0,v=v+Math.imul(Ht,z)|0;var Qt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,m=Math.imul(_,Kt),f=Math.imul(_,he),f=f+Math.imul(O,Kt)|0,v=Math.imul(O,he),m=m+Math.imul(pt,Wt)|0,f=f+Math.imul(pt,le)|0,f=f+Math.imul(M,Wt)|0,v=v+Math.imul(M,le)|0,m=m+Math.imul(ot,Vt)|0,f=f+Math.imul(ot,ue)|0,f=f+Math.imul(yt,Vt)|0,v=v+Math.imul(yt,ue)|0,m=m+Math.imul(rt,Gt)|0,f=f+Math.imul(rt,Xt)|0,f=f+Math.imul(nt,Gt)|0,v=v+Math.imul(nt,Xt)|0,m=m+Math.imul(Z,S)|0,f=f+Math.imul(Z,$)|0,f=f+Math.imul(ct,S)|0,v=v+Math.imul(ct,$)|0,m=m+Math.imul(G,w)|0,f=f+Math.imul(G,D)|0,f=f+Math.imul(et,w)|0,v=v+Math.imul(et,D)|0,m=m+Math.imul(jt,W)|0,f=f+Math.imul(jt,z)|0,f=f+Math.imul(P,W)|0,v=v+Math.imul(P,z)|0;var Ot=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,m=Math.imul(_,Wt),f=Math.imul(_,le),f=f+Math.imul(O,Wt)|0,v=Math.imul(O,le),m=m+Math.imul(pt,Vt)|0,f=f+Math.imul(pt,ue)|0,f=f+Math.imul(M,Vt)|0,v=v+Math.imul(M,ue)|0,m=m+Math.imul(ot,Gt)|0,f=f+Math.imul(ot,Xt)|0,f=f+Math.imul(yt,Gt)|0,v=v+Math.imul(yt,Xt)|0,m=m+Math.imul(rt,S)|0,f=f+Math.imul(rt,$)|0,f=f+Math.imul(nt,S)|0,v=v+Math.imul(nt,$)|0,m=m+Math.imul(Z,w)|0,f=f+Math.imul(Z,D)|0,f=f+Math.imul(ct,w)|0,v=v+Math.imul(ct,D)|0,m=m+Math.imul(G,W)|0,f=f+Math.imul(G,z)|0,f=f+Math.imul(et,W)|0,v=v+Math.imul(et,z)|0;var qt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(qt>>>26)|0,qt&=67108863,m=Math.imul(_,Vt),f=Math.imul(_,ue),f=f+Math.imul(O,Vt)|0,v=Math.imul(O,ue),m=m+Math.imul(pt,Gt)|0,f=f+Math.imul(pt,Xt)|0,f=f+Math.imul(M,Gt)|0,v=v+Math.imul(M,Xt)|0,m=m+Math.imul(ot,S)|0,f=f+Math.imul(ot,$)|0,f=f+Math.imul(yt,S)|0,v=v+Math.imul(yt,$)|0,m=m+Math.imul(rt,w)|0,f=f+Math.imul(rt,D)|0,f=f+Math.imul(nt,w)|0,v=v+Math.imul(nt,D)|0,m=m+Math.imul(Z,W)|0,f=f+Math.imul(Z,z)|0,f=f+Math.imul(ct,W)|0,v=v+Math.imul(ct,z)|0;var Rt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,m=Math.imul(_,Gt),f=Math.imul(_,Xt),f=f+Math.imul(O,Gt)|0,v=Math.imul(O,Xt),m=m+Math.imul(pt,S)|0,f=f+Math.imul(pt,$)|0,f=f+Math.imul(M,S)|0,v=v+Math.imul(M,$)|0,m=m+Math.imul(ot,w)|0,f=f+Math.imul(ot,D)|0,f=f+Math.imul(yt,w)|0,v=v+Math.imul(yt,D)|0,m=m+Math.imul(rt,W)|0,f=f+Math.imul(rt,z)|0,f=f+Math.imul(nt,W)|0,v=v+Math.imul(nt,z)|0;var Pt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,m=Math.imul(_,S),f=Math.imul(_,$),f=f+Math.imul(O,S)|0,v=Math.imul(O,$),m=m+Math.imul(pt,w)|0,f=f+Math.imul(pt,D)|0,f=f+Math.imul(M,w)|0,v=v+Math.imul(M,D)|0,m=m+Math.imul(ot,W)|0,f=f+Math.imul(ot,z)|0,f=f+Math.imul(yt,W)|0,v=v+Math.imul(yt,z)|0;var kt=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(kt>>>26)|0,kt&=67108863,m=Math.imul(_,w),f=Math.imul(_,D),f=f+Math.imul(O,w)|0,v=Math.imul(O,D),m=m+Math.imul(pt,W)|0,f=f+Math.imul(pt,z)|0,f=f+Math.imul(M,W)|0,v=v+Math.imul(M,z)|0;var Ft=(C+m|0)+((f&8191)<<13)|0;C=(v+(f>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,m=Math.imul(_,W),f=Math.imul(_,z),f=f+Math.imul(O,W)|0,v=Math.imul(O,z);var J=(C+m|0)+((f&8191)<<13)|0;return C=(v+(f>>>13)|0)+(J>>>26)|0,J&=67108863,y[0]=ut,y[1]=Bt,y[2]=It,y[3]=de,y[4]=Nt,y[5]=zt,y[6]=Zt,y[7]=oe,y[8]=ie,y[9]=Jt,y[10]=ee,y[11]=Qt,y[12]=Ot,y[13]=qt,y[14]=Rt,y[15]=Pt,y[16]=kt,y[17]=Ft,y[18]=J,C!==0&&(y[19]=C,l.length++),l};Math.imul||($t=Q);function Dt(A,c,u){u.negative=c.negative^A.negative,u.length=A.length+c.length;for(var l=0,h=0,d=0;d<u.length-1;d++){var y=h;h=0;for(var C=l&67108863,m=Math.min(d,c.length-1),f=Math.max(0,d-A.length+1);f<=m;f++){var v=d-f,E=A.words[v]|0,F=c.words[f]|0,K=E*F,X=K&67108863;y=y+(K/67108864|0)|0,X=X+C|0,C=X&67108863,y=y+(X>>>26)|0,h+=y>>>26,y&=67108863}u.words[d]=C,l=y,y=h}return l!==0?u.words[d]=l:u.length--,u.strip()}function xt(A,c,u){var l=new Ut;return l.mulp(A,c,u)}o.prototype.mulTo=function(c,u){var l,h=this.length+c.length;return this.length===10&&c.length===10?l=$t(this,c,u):h<63?l=Q(this,c,u):h<1024?l=Dt(this,c,u):l=xt(this,c,u),l};function Ut(A,c){this.x=A,this.y=c}Ut.prototype.makeRBT=function(c){for(var u=new Array(c),l=o.prototype._countBits(c)-1,h=0;h<c;h++)u[h]=this.revBin(h,l,c);return u},Ut.prototype.revBin=function(c,u,l){if(c===0||c===l-1)return c;for(var h=0,d=0;d<u;d++)h|=(c&1)<<u-d-1,c>>=1;return h},Ut.prototype.permute=function(c,u,l,h,d,y){for(var C=0;C<y;C++)h[C]=u[c[C]],d[C]=l[c[C]]},Ut.prototype.transform=function(c,u,l,h,d,y){this.permute(y,c,u,l,h,d);for(var C=1;C<d;C<<=1)for(var m=C<<1,f=Math.cos(2*Math.PI/m),v=Math.sin(2*Math.PI/m),E=0;E<d;E+=m)for(var F=f,K=v,X=0;X<C;X++){var tt=l[E+X],wt=h[E+X],se=l[E+X+C],_t=h[E+X+C],Ht=F*se-K*_t;_t=F*_t+K*se,se=Ht,l[E+X]=tt+se,h[E+X]=wt+_t,l[E+X+C]=tt-se,h[E+X+C]=wt-_t,X!==m&&(Ht=f*F-v*K,K=f*K+v*F,F=Ht)}},Ut.prototype.guessLen13b=function(c,u){var l=Math.max(u,c)|1,h=l&1,d=0;for(l=l/2|0;l;l=l>>>1)d++;return 1<<d+1+h},Ut.prototype.conjugate=function(c,u,l){if(!(l<=1))for(var h=0;h<l/2;h++){var d=c[h];c[h]=c[l-h-1],c[l-h-1]=d,d=u[h],u[h]=-u[l-h-1],u[l-h-1]=-d}},Ut.prototype.normalize13b=function(c,u){for(var l=0,h=0;h<u/2;h++){var d=Math.round(c[2*h+1]/u)*8192+Math.round(c[2*h]/u)+l;c[h]=d&67108863,d<67108864?l=0:l=d/67108864|0}return c},Ut.prototype.convert13b=function(c,u,l,h){for(var d=0,y=0;y<u;y++)d=d+(c[y]|0),l[2*y]=d&8191,d=d>>>13,l[2*y+1]=d&8191,d=d>>>13;for(y=2*u;y<h;++y)l[y]=0;s(d===0),s((d&-8192)===0)},Ut.prototype.stub=function(c){for(var u=new Array(c),l=0;l<c;l++)u[l]=0;return u},Ut.prototype.mulp=function(c,u,l){var h=2*this.guessLen13b(c.length,u.length),d=this.makeRBT(h),y=this.stub(h),C=new Array(h),m=new Array(h),f=new Array(h),v=new Array(h),E=new Array(h),F=new Array(h),K=l.words;K.length=h,this.convert13b(c.words,c.length,C,h),this.convert13b(u.words,u.length,v,h),this.transform(C,y,m,f,h,d),this.transform(v,y,E,F,h,d);for(var X=0;X<h;X++){var tt=m[X]*E[X]-f[X]*F[X];f[X]=m[X]*F[X]+f[X]*E[X],m[X]=tt}return this.conjugate(m,f,h),this.transform(m,f,K,y,h,d),this.conjugate(K,y,h),this.normalize13b(K,h),l.negative=c.negative^u.negative,l.length=c.length+u.length,l.strip()},o.prototype.mul=function(c){var u=new o(null);return u.words=new Array(this.length+c.length),this.mulTo(c,u)},o.prototype.mulf=function(c){var u=new o(null);return u.words=new Array(this.length+c.length),xt(this,c,u)},o.prototype.imul=function(c){return this.clone().mulTo(c,this)},o.prototype.imuln=function(c){s(typeof c=="number"),s(c<67108864);for(var u=0,l=0;l<this.length;l++){var h=(this.words[l]|0)*c,d=(h&67108863)+(u&67108863);u>>=26,u+=h/67108864|0,u+=d>>>26,this.words[l]=d&67108863}return u!==0&&(this.words[l]=u,this.length++),this},o.prototype.muln=function(c){return this.clone().imuln(c)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(c){var u=H(c);if(u.length===0)return new o(1);for(var l=this,h=0;h<u.length&&u[h]===0;h++,l=l.sqr());if(++h<u.length)for(var d=l.sqr();h<u.length;h++,d=d.sqr())u[h]!==0&&(l=l.mul(d));return l},o.prototype.iushln=function(c){s(typeof c=="number"&&c>=0);var u=c%26,l=(c-u)/26,h=67108863>>>26-u<<26-u,d;if(u!==0){var y=0;for(d=0;d<this.length;d++){var C=this.words[d]&h,m=(this.words[d]|0)-C<<u;this.words[d]=m|y,y=C>>>26-u}y&&(this.words[d]=y,this.length++)}if(l!==0){for(d=this.length-1;d>=0;d--)this.words[d+l]=this.words[d];for(d=0;d<l;d++)this.words[d]=0;this.length+=l}return this.strip()},o.prototype.ishln=function(c){return s(this.negative===0),this.iushln(c)},o.prototype.iushrn=function(c,u,l){s(typeof c=="number"&&c>=0);var h;u?h=(u-u%26)/26:h=0;var d=c%26,y=Math.min((c-d)/26,this.length),C=67108863^67108863>>>d<<d,m=l;if(h-=y,h=Math.max(0,h),m){for(var f=0;f<y;f++)m.words[f]=this.words[f];m.length=y}if(y!==0)if(this.length>y)for(this.length-=y,f=0;f<this.length;f++)this.words[f]=this.words[f+y];else this.words[0]=0,this.length=1;var v=0;for(f=this.length-1;f>=0&&(v!==0||f>=h);f--){var E=this.words[f]|0;this.words[f]=v<<26-d|E>>>d,v=E&C}return m&&v!==0&&(m.words[m.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(c,u,l){return s(this.negative===0),this.iushrn(c,u,l)},o.prototype.shln=function(c){return this.clone().ishln(c)},o.prototype.ushln=function(c){return this.clone().iushln(c)},o.prototype.shrn=function(c){return this.clone().ishrn(c)},o.prototype.ushrn=function(c){return this.clone().iushrn(c)},o.prototype.testn=function(c){s(typeof c=="number"&&c>=0);var u=c%26,l=(c-u)/26,h=1<<u;if(this.length<=l)return!1;var d=this.words[l];return!!(d&h)},o.prototype.imaskn=function(c){s(typeof c=="number"&&c>=0);var u=c%26,l=(c-u)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var h=67108863^67108863>>>u<<u;this.words[this.length-1]&=h}return this.strip()},o.prototype.maskn=function(c){return this.clone().imaskn(c)},o.prototype.iaddn=function(c){return s(typeof c=="number"),s(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},o.prototype._iaddn=function(c){this.words[0]+=c;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(c){if(s(typeof c=="number"),s(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},o.prototype.addn=function(c){return this.clone().iaddn(c)},o.prototype.subn=function(c){return this.clone().isubn(c)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(c,u,l){var h=c.length+l,d;this._expand(h);var y,C=0;for(d=0;d<c.length;d++){y=(this.words[d+l]|0)+C;var m=(c.words[d]|0)*u;y-=m&67108863,C=(y>>26)-(m/67108864|0),this.words[d+l]=y&67108863}for(;d<this.length-l;d++)y=(this.words[d+l]|0)+C,C=y>>26,this.words[d+l]=y&67108863;if(C===0)return this.strip();for(s(C===-1),C=0,d=0;d<this.length;d++)y=-(this.words[d]|0)+C,C=y>>26,this.words[d]=y&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(c,u){var l=this.length-c.length,h=this.clone(),d=c,y=d.words[d.length-1]|0,C=this._countBits(y);l=26-C,l!==0&&(d=d.ushln(l),h.iushln(l),y=d.words[d.length-1]|0);var m=h.length-d.length,f;if(u!=="mod"){f=new o(null),f.length=m+1,f.words=new Array(f.length);for(var v=0;v<f.length;v++)f.words[v]=0}var E=h.clone()._ishlnsubmul(d,1,m);E.negative===0&&(h=E,f&&(f.words[m]=1));for(var F=m-1;F>=0;F--){var K=(h.words[d.length+F]|0)*67108864+(h.words[d.length+F-1]|0);for(K=Math.min(K/y|0,67108863),h._ishlnsubmul(d,K,F);h.negative!==0;)K--,h.negative=0,h._ishlnsubmul(d,1,F),h.isZero()||(h.negative^=1);f&&(f.words[F]=K)}return f&&f.strip(),h.strip(),u!=="div"&&l!==0&&h.iushrn(l),{div:f||null,mod:h}},o.prototype.divmod=function(c,u,l){if(s(!c.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var h,d,y;return this.negative!==0&&c.negative===0?(y=this.neg().divmod(c,u),u!=="mod"&&(h=y.div.neg()),u!=="div"&&(d=y.mod.neg(),l&&d.negative!==0&&d.iadd(c)),{div:h,mod:d}):this.negative===0&&c.negative!==0?(y=this.divmod(c.neg(),u),u!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&c.negative?(y=this.neg().divmod(c.neg(),u),u!=="div"&&(d=y.mod.neg(),l&&d.negative!==0&&d.isub(c)),{div:y.div,mod:d}):c.length>this.length||this.cmp(c)<0?{div:new o(0),mod:this}:c.length===1?u==="div"?{div:this.divn(c.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new o(this.modn(c.words[0]))}:this._wordDiv(c,u)},o.prototype.div=function(c){return this.divmod(c,"div",!1).div},o.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},o.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},o.prototype.divRound=function(c){var u=this.divmod(c);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(c):u.mod,h=c.ushrn(1),d=c.andln(1),y=l.cmp(h);return y<0||d===1&&y===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modn=function(c){s(c<=67108863);for(var u=(1<<26)%c,l=0,h=this.length-1;h>=0;h--)l=(u*l+(this.words[h]|0))%c;return l},o.prototype.idivn=function(c){s(c<=67108863);for(var u=0,l=this.length-1;l>=0;l--){var h=(this.words[l]|0)+u*67108864;this.words[l]=h/c|0,u=h%c}return this.strip()},o.prototype.divn=function(c){return this.clone().idivn(c)},o.prototype.egcd=function(c){s(c.negative===0),s(!c.isZero());var u=this,l=c.clone();u.negative!==0?u=u.umod(c):u=u.clone();for(var h=new o(1),d=new o(0),y=new o(0),C=new o(1),m=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++m;for(var f=l.clone(),v=u.clone();!u.isZero();){for(var E=0,F=1;!(u.words[0]&F)&&E<26;++E,F<<=1);if(E>0)for(u.iushrn(E);E-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(f),d.isub(v)),h.iushrn(1),d.iushrn(1);for(var K=0,X=1;!(l.words[0]&X)&&K<26;++K,X<<=1);if(K>0)for(l.iushrn(K);K-- >0;)(y.isOdd()||C.isOdd())&&(y.iadd(f),C.isub(v)),y.iushrn(1),C.iushrn(1);u.cmp(l)>=0?(u.isub(l),h.isub(y),d.isub(C)):(l.isub(u),y.isub(h),C.isub(d))}return{a:y,b:C,gcd:l.iushln(m)}},o.prototype._invmp=function(c){s(c.negative===0),s(!c.isZero());var u=this,l=c.clone();u.negative!==0?u=u.umod(c):u=u.clone();for(var h=new o(1),d=new o(0),y=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var C=0,m=1;!(u.words[0]&m)&&C<26;++C,m<<=1);if(C>0)for(u.iushrn(C);C-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var f=0,v=1;!(l.words[0]&v)&&f<26;++f,v<<=1);if(f>0)for(l.iushrn(f);f-- >0;)d.isOdd()&&d.iadd(y),d.iushrn(1);u.cmp(l)>=0?(u.isub(l),h.isub(d)):(l.isub(u),d.isub(h))}var E;return u.cmpn(1)===0?E=h:E=d,E.cmpn(0)<0&&E.iadd(c),E},o.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var u=this.clone(),l=c.clone();u.negative=0,l.negative=0;for(var h=0;u.isEven()&&l.isEven();h++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var d=u.cmp(l);if(d<0){var y=u;u=l,l=y}else if(d===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(h)},o.prototype.invm=function(c){return this.egcd(c).a.umod(c)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(c){return this.words[0]&c},o.prototype.bincn=function(c){s(typeof c=="number");var u=c%26,l=(c-u)/26,h=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var d=h,y=l;d!==0&&y<this.length;y++){var C=this.words[y]|0;C+=d,d=C>>>26,C&=67108863,this.words[y]=C}return d!==0&&(this.words[y]=d,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(c){var u=c<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var l;if(this.length>1)l=1;else{u&&(c=-c),s(c<=67108863,"Number is too big");var h=this.words[0]|0;l=h===c?0:h<c?-1:1}return this.negative!==0?-l|0:l},o.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var u=this.ucmp(c);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var h=this.words[l]|0,d=c.words[l]|0;if(h!==d){h<d?u=-1:h>d&&(u=1);break}}return u},o.prototype.gtn=function(c){return this.cmpn(c)===1},o.prototype.gt=function(c){return this.cmp(c)===1},o.prototype.gten=function(c){return this.cmpn(c)>=0},o.prototype.gte=function(c){return this.cmp(c)>=0},o.prototype.ltn=function(c){return this.cmpn(c)===-1},o.prototype.lt=function(c){return this.cmp(c)===-1},o.prototype.lten=function(c){return this.cmpn(c)<=0},o.prototype.lte=function(c){return this.cmp(c)<=0},o.prototype.eqn=function(c){return this.cmpn(c)===0},o.prototype.eq=function(c){return this.cmp(c)===0},o.red=function(c){return new At(c)},o.prototype.toRed=function(c){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(c){return this.red=c,this},o.prototype.forceRed=function(c){return s(!this.red,"Already a number in reduction context"),this._forceRed(c)},o.prototype.redAdd=function(c){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},o.prototype.redIAdd=function(c){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},o.prototype.redSub=function(c){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},o.prototype.redISub=function(c){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},o.prototype.redShl=function(c){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},o.prototype.redMul=function(c){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},o.prototype.redIMul=function(c){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(c){return s(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var we={k256:null,p224:null,p192:null,p25519:null};function Mt(A,c){this.name=A,this.p=new o(c,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Mt.prototype._tmp=function(){var c=new o(null);return c.words=new Array(Math.ceil(this.n/13)),c},Mt.prototype.ireduce=function(c){var u=c,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var h=l<this.n?-1:u.ucmp(this.p);return h===0?(u.words[0]=0,u.length=1):h>0?u.isub(this.p):u.strip(),u},Mt.prototype.split=function(c,u){c.iushrn(this.n,0,u)},Mt.prototype.imulK=function(c){return c.imul(this.k)};function ae(){Mt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(ae,Mt),ae.prototype.split=function(c,u){for(var l=4194303,h=Math.min(c.length,9),d=0;d<h;d++)u.words[d]=c.words[d];if(u.length=h,c.length<=9){c.words[0]=0,c.length=1;return}var y=c.words[9];for(u.words[u.length++]=y&l,d=10;d<c.length;d++){var C=c.words[d]|0;c.words[d-10]=(C&l)<<4|y>>>22,y=C}y>>>=22,c.words[d-10]=y,y===0&&c.length>10?c.length-=10:c.length-=9},ae.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var u=0,l=0;l<c.length;l++){var h=c.words[l]|0;u+=h*977,c.words[l]=u&67108863,u=h*64+(u/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function Yt(){Mt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Yt,Mt);function ve(){Mt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(ve,Mt);function ne(){Mt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(ne,Mt),ne.prototype.imulK=function(c){for(var u=0,l=0;l<c.length;l++){var h=(c.words[l]|0)*19+u,d=h&67108863;h>>>=26,c.words[l]=d,u=h}return u!==0&&(c.words[c.length++]=u),c},o._prime=function(c){if(we[c])return we[c];var u;if(c==="k256")u=new ae;else if(c==="p224")u=new Yt;else if(c==="p192")u=new ve;else if(c==="p25519")u=new ne;else throw new Error("Unknown prime "+c);return we[c]=u,u};function At(A){if(typeof A=="string"){var c=o._prime(A);this.m=c.p,this.prime=c}else s(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}At.prototype._verify1=function(c){s(c.negative===0,"red works only with positives"),s(c.red,"red works only with red numbers")},At.prototype._verify2=function(c,u){s((c.negative|u.negative)===0,"red works only with positives"),s(c.red&&c.red===u.red,"red works only with red numbers")},At.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},At.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},At.prototype.add=function(c,u){this._verify2(c,u);var l=c.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},At.prototype.iadd=function(c,u){this._verify2(c,u);var l=c.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},At.prototype.sub=function(c,u){this._verify2(c,u);var l=c.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},At.prototype.isub=function(c,u){this._verify2(c,u);var l=c.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},At.prototype.shl=function(c,u){return this._verify1(c),this.imod(c.ushln(u))},At.prototype.imul=function(c,u){return this._verify2(c,u),this.imod(c.imul(u))},At.prototype.mul=function(c,u){return this._verify2(c,u),this.imod(c.mul(u))},At.prototype.isqr=function(c){return this.imul(c,c.clone())},At.prototype.sqr=function(c){return this.mul(c,c)},At.prototype.sqrt=function(c){if(c.isZero())return c.clone();var u=this.m.andln(3);if(s(u%2===1),u===3){var l=this.m.add(new o(1)).iushrn(2);return this.pow(c,l)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);s(!h.isZero());var y=new o(1).toRed(this),C=y.redNeg(),m=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new o(2*f*f).toRed(this);this.pow(f,m).cmp(C)!==0;)f.redIAdd(C);for(var v=this.pow(f,h),E=this.pow(c,h.addn(1).iushrn(1)),F=this.pow(c,h),K=d;F.cmp(y)!==0;){for(var X=F,tt=0;X.cmp(y)!==0;tt++)X=X.redSqr();s(tt<K);var wt=this.pow(v,new o(1).iushln(K-tt-1));E=E.redMul(wt),v=wt.redSqr(),F=F.redMul(v),K=tt}return E},At.prototype.invm=function(c){var u=c._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},At.prototype.pow=function(c,u){if(u.isZero())return new o(1);if(u.cmpn(1)===0)return c.clone();var l=4,h=new Array(1<<l);h[0]=new o(1).toRed(this),h[1]=c;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],c);var y=h[0],C=0,m=0,f=u.bitLength()%26;for(f===0&&(f=26),d=u.length-1;d>=0;d--){for(var v=u.words[d],E=f-1;E>=0;E--){var F=v>>E&1;if(y!==h[0]&&(y=this.sqr(y)),F===0&&C===0){m=0;continue}C<<=1,C|=F,m++,!(m!==l&&(d!==0||E!==0))&&(y=this.mul(y,h[C]),m=0,C=0)}f=26}return y},At.prototype.convertTo=function(c){var u=c.umod(this.m);return u===c?u.clone():u},At.prototype.convertFrom=function(c){var u=c.clone();return u.red=null,u},o.mont=function(c){return new me(c)};function me(A){At.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(me,At),me.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},me.prototype.convertFrom=function(c){var u=this.imod(c.mul(this.rinv));return u.red=null,u},me.prototype.imul=function(c,u){if(c.isZero()||u.isZero())return c.words[0]=0,c.length=1,c;var l=c.imul(u),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=l.isub(h).iushrn(this.shift),y=d;return d.cmp(this.m)>=0?y=d.isub(this.m):d.cmpn(0)<0&&(y=d.iadd(this.m)),y._forceRed(this)},me.prototype.mul=function(c,u){if(c.isZero()||u.isZero())return new o(0)._forceRed(this);var l=c.mul(u),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=l.isub(h).iushrn(this.shift),y=d;return d.cmp(this.m)>=0?y=d.isub(this.m):d.cmpn(0)<0&&(y=d.iadd(this.m)),y._forceRed(this)},me.prototype.invm=function(c){var u=this.imod(c._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(r,commonjsGlobal)})(bn);var src$3=function r(e){if(typeof e!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof e+", while checking isHexPrefixed.");return e.slice(0,2)==="0x"},isHexPrefixed=src$3,src$2=function r(e){return typeof e!="string"?e:isHexPrefixed(e)?e.slice(2):e},BN$k=bnExports,stripHexPrefix=src$2,src$1=function r(e){if(typeof e=="string"||typeof e=="number"){var n=new BN$k(1),s=String(e).toLowerCase().trim(),a=s.substr(0,2)==="0x"||s.substr(0,3)==="-0x",o=stripHexPrefix(s);if(o.substr(0,1)==="-"&&(o=stripHexPrefix(o.slice(1)),n=new BN$k(-1,10)),o=o===""?"0":o,!o.match(/^-?[0-9]+$/)&&o.match(/^[0-9A-Fa-f]+$/)||o.match(/^[a-fA-F]+$/)||a===!0&&o.match(/^[0-9A-Fa-f]+$/))return new BN$k(o,16).mul(n);if((o.match(/^-?[0-9]+$/)||o==="")&&a===!1)return new BN$k(o,10).mul(n)}else if(typeof e=="object"&&e.toString&&!e.pop&&!e.push&&e.toString(10).match(/^-?[0-9]+$/)&&(e.mul||e.dividedToIntegerBy))return new BN$k(e.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(e)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")},BN$j=bnExports$1,numberToBN=src$1,zero=new BN$j(0),negative1=new BN$j(-1),unitMap={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function getValueOfUnit(r){var e=r?r.toLowerCase():"ether",n=unitMap[e];if(typeof n!="string")throw new Error("[ethjs-unit] the unit provided "+r+" doesn't exists, please use the one of the following units "+JSON.stringify(unitMap,null,2));return new BN$j(n,10)}function numberToString(r){if(typeof r=="string"){if(!r.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+r+"', should be a number matching (^-?[0-9.]+).");return r}else{if(typeof r=="number")return String(r);if(typeof r=="object"&&r.toString&&(r.toTwos||r.dividedToIntegerBy))return r.toPrecision?String(r.toPrecision()):r.toString(10)}throw new Error("while converting number to string, invalid number value '"+r+"' type "+typeof r+".")}function fromWei(r,e,n){var s=numberToBN(r),a=s.lt(zero),o=getValueOfUnit(e),g=unitMap[e].length-1||1,b=n||{};a&&(s=s.mul(negative1));for(var B=s.mod(o).toString(10);B.length<g;)B="0"+B;b.pad||(B=B.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var N=s.div(o).toString(10);b.commify&&(N=N.replace(/\B(?=(\d{3})+(?!\d))/g,","));var I=""+N+(B=="0"?"":"."+B);return a&&(I="-"+I),I}function toWei(r,e){var n=numberToString(r),s=getValueOfUnit(e),a=unitMap[e].length-1||1,o=n.substring(0,1)==="-";if(o&&(n=n.substring(1)),n===".")throw new Error("[ethjs-unit] while converting number "+r+" to wei, invalid value");var g=n.split(".");if(g.length>2)throw new Error("[ethjs-unit] while converting number "+r+" to wei,  too many decimal points");var b=g[0],B=g[1];if(b||(b="0"),B||(B="0"),B.length>a)throw new Error("[ethjs-unit] while converting number "+r+" to wei, too many decimal places");for(;B.length<a;)B+="0";b=new BN$j(b),B=new BN$j(B);var N=b.mul(s).add(B);return o&&(N=N.mul(negative1)),new BN$j(N.toString(10),10)}var lib={unitMap,numberToString,getValueOfUnit,fromWei,toWei};/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */(function(r,e){typeof define=="function"&&define.amd?define([],function(){return e(r)}):typeof module=="object"&&module.exports?module.exports=e(r):e(r)})(typeof self<"u"?self:globalThis,function(r){if(typeof Promise!="function")throw"Promise support required";var e=r.crypto||r.msCrypto;if(!e)return;var n=e.subtle||e.webkitSubtle;if(!n)return;var s=r.Crypto||e.constructor||Object,a=r.SubtleCrypto||n.constructor||Object;r.CryptoKey||r.Key;var o=r.navigator.userAgent.indexOf("Edge/")>-1,g=!!r.msCrypto&&!o,b=!e.subtle&&!!e.webkitSubtle;if(!g&&!b)return;function B(A){return btoa(A).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function N(A){return A+="===",A=A.slice(0,-A.length%4),atob(A.replace(/-/g,"+").replace(/_/g,"/"))}function I(A){for(var c=new Uint8Array(A.length),u=0;u<A.length;u++)c[u]=A.charCodeAt(u);return c}function U(A){return A instanceof ArrayBuffer&&(A=new Uint8Array(A)),String.fromCharCode.apply(String,A)}function H(A){var c={name:(A.name||A||"").toUpperCase().replace("V","v")};switch(c.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":A.length&&(c.length=A.length);break;case"HMAC":A.hash&&(c.hash=H(A.hash)),A.length&&(c.length=A.length);break;case"RSAES-PKCS1-v1_5":A.publicExponent&&(c.publicExponent=new Uint8Array(A.publicExponent)),A.modulusLength&&(c.modulusLength=A.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":A.hash&&(c.hash=H(A.hash)),A.publicExponent&&(c.publicExponent=new Uint8Array(A.publicExponent)),A.modulusLength&&(c.modulusLength=A.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return c}function Q(A){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[A.name][(A.hash||{}).name||A.length||""]}function $t(A){(A instanceof ArrayBuffer||A instanceof Uint8Array)&&(A=JSON.parse(decodeURIComponent(escape(U(A)))));var c={kty:A.kty,alg:A.alg,ext:A.ext||A.extractable};switch(c.kty){case"oct":c.k=A.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(u){u in A&&(c[u]=A[u])});break;default:throw new TypeError("Unsupported key type")}return c}function Dt(A){var c=$t(A);return g&&(c.extractable=c.ext,delete c.ext),I(unescape(encodeURIComponent(JSON.stringify(c)))).buffer}function xt(A){var c=ae(A),u=!1;c.length>2&&(u=!0,c.shift());var l={ext:!0};switch(c[0][0]){case"1.2.840.113549.1.1.1":var h=["n","e","d","p","q","dp","dq","qi"],d=ae(c[1]);u&&d.shift();for(var y=0;y<d.length;y++)d[y][0]||(d[y]=d[y].subarray(1)),l[h[y]]=B(U(d[y]));l.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return l}function Ut(A){var c,u=[["",null]],l=!1;switch(A.kty){case"RSA":for(var h=["n","e","d","p","q","dp","dq","qi"],d=[],y=0;y<h.length&&h[y]in A;y++){var C=d[y]=I(N(A[h[y]]));C[0]&128&&(d[y]=new Uint8Array(C.length+1),d[y].set(C,1))}d.length>2&&(l=!0,d.unshift(new Uint8Array([0]))),u[0][0]="1.2.840.113549.1.1.1",c=d;break;default:throw new TypeError("Unsupported key type")}return u.push(new Uint8Array(Yt(c)).buffer),l?u.unshift(new Uint8Array([0])):u[1]={tag:3,value:u[1]},new Uint8Array(Yt(u)).buffer}var we={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},Mt={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};function ae(A,c){if(A instanceof ArrayBuffer&&(A=new Uint8Array(A)),c||(c={pos:0,end:A.length}),c.end-c.pos<2||c.end>A.length)throw new RangeError("Malformed DER");var u=A[c.pos++],l=A[c.pos++];if(l>=128){if(l&=127,c.end-c.pos<l)throw new RangeError("Malformed DER");for(var h=0;l--;)h<<=8,h|=A[c.pos++];l=h}if(c.end-c.pos<l)throw new RangeError("Malformed DER");var d;switch(u){case 2:d=A.subarray(c.pos,c.pos+=l);break;case 3:if(A[c.pos++])throw new Error("Unsupported bit string");l--;case 4:d=new Uint8Array(A.subarray(c.pos,c.pos+=l)).buffer;break;case 5:d=null;break;case 6:var y=btoa(U(A.subarray(c.pos,c.pos+=l)));if(!(y in we))throw new Error("Unsupported OBJECT ID "+y);d=we[y];break;case 48:d=[];for(var C=c.pos+l;c.pos<C;)d.push(ae(A,c));break;default:throw new Error("Unsupported DER tag 0x"+u.toString(16))}return d}function Yt(A,c){c||(c=[]);var u=0,l=0,h=c.length+2;if(c.push(0,0),A instanceof Uint8Array){u=2,l=A.length;for(var d=0;d<l;d++)c.push(A[d])}else if(A instanceof ArrayBuffer){u=4,l=A.byteLength,A=new Uint8Array(A);for(var d=0;d<l;d++)c.push(A[d])}else if(A===null)u=5,l=0;else if(typeof A=="string"&&A in Mt){var y=I(atob(Mt[A]));u=6,l=y.length;for(var d=0;d<l;d++)c.push(y[d])}else if(A instanceof Array){for(var d=0;d<A.length;d++)Yt(A[d],c);u=48,l=c.length-h}else if(typeof A=="object"&&A.tag===3&&A.value instanceof ArrayBuffer){A=new Uint8Array(A.value),u=3,l=A.byteLength,c.push(0);for(var d=0;d<l;d++)c.push(A[d]);l++}else throw new Error("Unsupported DER value "+A);if(l>=128){var C=l,l=4;for(c.splice(h,0,C>>24&255,C>>16&255,C>>8&255,C&255);l>1&&!(C>>24);)C<<=8,l--;l<4&&c.splice(h,4-l),l|=128}return c.splice(h-2,2,u,l),c}function ve(A,c,u,l){Object.defineProperties(this,{_key:{value:A},type:{value:A.type,enumerable:!0},extractable:{value:u===void 0?A.extractable:u,enumerable:!0},algorithm:{value:c===void 0?A.algorithm:c,enumerable:!0},usages:{value:l===void 0?A.usages:l,enumerable:!0}})}function ne(A){return A==="verify"||A==="encrypt"||A==="wrapKey"}function At(A){return A==="sign"||A==="decrypt"||A==="unwrapKey"}if(["generateKey","importKey","unwrapKey"].forEach(function(A){var c=n[A];n[A]=function(u,l,h){var d=[].slice.call(arguments),y,C,m;switch(A){case"generateKey":y=H(u),C=l,m=h;break;case"importKey":y=H(h),C=d[3],m=d[4],u==="jwk"&&(l=$t(l),l.alg||(l.alg=Q(y)),l.key_ops||(l.key_ops=l.kty!=="oct"?"d"in l?m.filter(At):m.filter(ne):m.slice()),d[1]=Dt(l));break;case"unwrapKey":y=d[4],C=d[5],m=d[6],d[2]=h._key;break}if(A==="generateKey"&&y.name==="HMAC"&&y.hash)return y.length=y.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[y.hash.name],n.importKey("raw",e.getRandomValues(new Uint8Array(y.length+7>>3)),y,C,m);if(b&&A==="generateKey"&&y.name==="RSASSA-PKCS1-v1_5"&&(!y.modulusLength||y.modulusLength>=2048))return u=H(u),u.name="RSAES-PKCS1-v1_5",delete u.hash,n.generateKey(u,!0,["encrypt","decrypt"]).then(function(v){return Promise.all([n.exportKey("jwk",v.publicKey),n.exportKey("jwk",v.privateKey)])}).then(function(v){return v[0].alg=v[1].alg=Q(y),v[0].key_ops=m.filter(ne),v[1].key_ops=m.filter(At),Promise.all([n.importKey("jwk",v[0],y,!0,v[0].key_ops),n.importKey("jwk",v[1],y,C,v[1].key_ops)])}).then(function(v){return{publicKey:v[0],privateKey:v[1]}});if((b||g&&(y.hash||{}).name==="SHA-1")&&A==="importKey"&&u==="jwk"&&y.name==="HMAC"&&l.kty==="oct")return n.importKey("raw",I(N(l.k)),h,d[3],d[4]);if(b&&A==="importKey"&&(u==="spki"||u==="pkcs8"))return n.importKey("jwk",xt(l),h,d[3],d[4]);if(g&&A==="unwrapKey")return n.decrypt(d[3],h,l).then(function(v){return n.importKey(u,v,d[4],d[5],d[6])});var f;try{f=c.apply(n,d)}catch(v){return Promise.reject(v)}return g&&(f=new Promise(function(v,E){f.onabort=f.onerror=function(F){E(F)},f.oncomplete=function(F){v(F.target.result)}})),f=f.then(function(v){return y.name==="HMAC"&&(y.length||(y.length=8*v.algorithm.length)),y.name.search("RSA")==0&&(y.modulusLength||(y.modulusLength=(v.publicKey||v).algorithm.modulusLength),y.publicExponent||(y.publicExponent=(v.publicKey||v).algorithm.publicExponent)),v.publicKey&&v.privateKey?v={publicKey:new ve(v.publicKey,y,C,m.filter(ne)),privateKey:new ve(v.privateKey,y,C,m.filter(At))}:v=new ve(v,y,C,m),v}),f}}),["exportKey","wrapKey"].forEach(function(A){var c=n[A];n[A]=function(u,l,h){var d=[].slice.call(arguments);switch(A){case"exportKey":d[1]=l._key;break;case"wrapKey":d[1]=l._key,d[2]=h._key;break}if((b||g&&(l.algorithm.hash||{}).name==="SHA-1")&&A==="exportKey"&&u==="jwk"&&l.algorithm.name==="HMAC"&&(d[0]="raw"),b&&A==="exportKey"&&(u==="spki"||u==="pkcs8")&&(d[0]="jwk"),g&&A==="wrapKey")return n.exportKey(u,l).then(function(C){return u==="jwk"&&(C=I(unescape(encodeURIComponent(JSON.stringify($t(C)))))),n.encrypt(d[3],h,C)});var y;try{y=c.apply(n,d)}catch(C){return Promise.reject(C)}return g&&(y=new Promise(function(C,m){y.onabort=y.onerror=function(f){m(f)},y.oncomplete=function(f){C(f.target.result)}})),A==="exportKey"&&u==="jwk"&&(y=y.then(function(C){return(b||g&&(l.algorithm.hash||{}).name==="SHA-1")&&l.algorithm.name==="HMAC"?{kty:"oct",alg:Q(l.algorithm),key_ops:l.usages.slice(),ext:!0,k:B(U(C))}:(C=$t(C),C.alg||(C.alg=Q(l.algorithm)),C.key_ops||(C.key_ops=l.type==="public"?l.usages.filter(ne):l.type==="private"?l.usages.filter(At):l.usages.slice()),C)})),b&&A==="exportKey"&&(u==="spki"||u==="pkcs8")&&(y=y.then(function(C){return C=Ut($t(C)),C})),y}}),["encrypt","decrypt","sign","verify"].forEach(function(A){var c=n[A];n[A]=function(u,l,h,d){if(g&&(!h.byteLength||d&&!d.byteLength))throw new Error("Empy input is not allowed");var y=[].slice.call(arguments),C=H(u);if(g&&A==="decrypt"&&C.name==="AES-GCM"){var m=u.tagLength>>3;y[2]=(h.buffer||h).slice(0,h.byteLength-m),u.tag=(h.buffer||h).slice(h.byteLength-m)}y[1]=l._key;var f;try{f=c.apply(n,y)}catch(v){return Promise.reject(v)}return g&&(f=new Promise(function(v,E){f.onabort=f.onerror=function(F){E(F)},f.oncomplete=function(K){var K=K.target.result;if(A==="encrypt"&&K instanceof AesGcmEncryptResult){var X=K.ciphertext,tt=K.tag;K=new Uint8Array(X.byteLength+tt.byteLength),K.set(new Uint8Array(X),0),K.set(new Uint8Array(tt),X.byteLength),K=K.buffer}v(K)}})),f}}),g){var me=n.digest;n.digest=function(A,c){if(!c.byteLength)throw new Error("Empy input is not allowed");var u;try{u=me.call(n,A,c)}catch(l){return Promise.reject(l)}return u=new Promise(function(l,h){u.onabort=u.onerror=function(d){h(d)},u.oncomplete=function(d){l(d.target.result)}}),u},r.crypto=Object.create(e,{getRandomValues:{value:function(A){return e.getRandomValues(A)}},subtle:{value:n}}),r.CryptoKey=ve}b&&(e.subtle=n,r.Crypto=s,r.SubtleCrypto=a,r.CryptoKey=ve)});const browser=window.crypto,browser$1=Object.freeze(Object.defineProperty({__proto__:null,default:browser},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(browser$1),BN$i=bnExports$2,nacl$5=naclFastExports,ethunit=lib,isCryptoAvailable=typeof self<"u"&&self.crypto&&self.crypto.subtle;let myCrypto=null;isCryptoAvailable||(myCrypto=require$$3);function sha256$3(r){return isCryptoAvailable?crypto.subtle.digest("SHA-256",r):myCrypto.subtle.digest({name:"SHA-256"},r)}function toNano$3(r){if(!BN$i.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return ethunit.toWei(r,"gwei")}function fromNano$1(r){if(!BN$i.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return ethunit.fromWei(r,"gwei")}const to_hex_array=[],to_byte_map={};for(let r=0;r<=255;r++){let e=r.toString(16);e.length<2&&(e="0"+e),to_hex_array.push(e),to_byte_map[e]=r}function bytesToHex$d(r){const e=[];for(let n=0;n<r.byteLength;n++)e.push(to_hex_array[r[n]]);return e.join("")}function hexToBytes$8(r){r=r.toLowerCase();const e=r.length;if(e%2!==0)throw"hex string must have length a multiple of 2";const n=e/2,s=new Uint8Array(n);for(let a=0;a<n;a++){const o=a*2,g=r.substring(o,o+2);if(!to_byte_map.hasOwnProperty(g))throw new Error("invalid hex character "+g);s[a]=to_byte_map[g]}return s}function stringToBytes$4(r,e=1){let n,s;e===1&&(n=new ArrayBuffer(r.length),s=new Uint8Array(n)),e===2&&(n=new ArrayBuffer(r.length*2),s=new Uint16Array(n)),e===4&&(n=new ArrayBuffer(r.length*4),s=new Uint32Array(n));for(let a=0,o=r.length;a<o;a++)s[a]=r.charCodeAt(a);return new Uint8Array(s.buffer)}function _crc32c(r,e){r^=4294967295;for(let s=0;s<e.length;s++)r^=e[s],r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1;return r^4294967295}function crc32c$2(r){const e=_crc32c(0,r),n=new ArrayBuffer(4);return new DataView(n).setUint32(0,e,!1),new Uint8Array(n).reverse()}function crc16$2(r){let n=0;const s=new Uint8Array(r.length+2);s.set(r);for(let a of s){let o=128;for(;o>0;)n<<=1,a&o&&(n+=1),o>>=1,n>65535&&(n&=65535,n^=4129)}return new Uint8Array([Math.floor(n/256),n%256])}function concatBytes$2(r,e){const n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}function compareBytes$2(r,e){return r.toString()===e.toString()}const base64abc=(()=>{const r=[],e="A".charCodeAt(0),n="a".charCodeAt(0),s="0".charCodeAt(0);for(let a=0;a<26;++a)r.push(String.fromCharCode(e+a));for(let a=0;a<26;++a)r.push(String.fromCharCode(n+a));for(let a=0;a<10;++a)r.push(String.fromCharCode(s+a));return r.push("+"),r.push("/"),r})();function bytesToBase64$8(r){let e="",n;const s=r.length;for(n=2;n<s;n+=3)e+=base64abc[r[n-2]>>2],e+=base64abc[(r[n-2]&3)<<4|r[n-1]>>4],e+=base64abc[(r[n-1]&15)<<2|r[n]>>6],e+=base64abc[r[n]&63];return n===s+1&&(e+=base64abc[r[n-2]>>2],e+=base64abc[(r[n-2]&3)<<4],e+="=="),n===s&&(e+=base64abc[r[n-2]>>2],e+=base64abc[(r[n-2]&3)<<4|r[n-1]>>4],e+=base64abc[(r[n-1]&15)<<2],e+="="),e}function base64toString$2(r){return typeof self>"u"?Buffer.from(r,"base64").toString("binary"):atob(r)}function stringToBase64$2(r){return typeof self>"u"?Buffer.from(r,"binary").toString("base64"):btoa(r)}function base64ToBytes$4(r){const e=base64toString$2(r),n=e.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=e.charCodeAt(a);return s}function readNBytesUIntFromArray$2(r,e){let n=0;for(let s=0;s<r;s++)n*=256,n+=e[s];return n}function keyPairFromSeed$1(r){return nacl$5.sign.keyPair.fromSeed(r)}function newKeyPair$1(){return nacl$5.sign.keyPair()}function newSeed$1(){return nacl$5.sign.keyPair().secretKey.slice(0,32)}var Utils={BN:BN$i,nacl:nacl$5,sha256:sha256$3,fromNano:fromNano$1,toNano:toNano$3,bytesToHex:bytesToHex$d,hexToBytes:hexToBytes$8,stringToBytes:stringToBytes$4,crc32c:crc32c$2,crc16:crc16$2,concatBytes:concatBytes$2,bytesToBase64:bytesToBase64$8,base64ToBytes:base64ToBytes$4,base64toString:base64toString$2,stringToBase64:stringToBase64$2,compareBytes:compareBytes$2,readNBytesUIntFromArray:readNBytesUIntFromArray$2,keyPairFromSeed:keyPairFromSeed$1,newKeyPair:newKeyPair$1,newSeed:newSeed$1},Address$f={};const{crc16:crc16$1,hexToBytes:hexToBytes$7,bytesToHex:bytesToHex$c,stringToBytes:stringToBytes$3,base64toString:base64toString$1,stringToBase64:stringToBase64$1}=Utils,bounceable_tag=17,non_bounceable_tag=81,test_flag=128;function parseFriendlyAddress(r){if(r.length!==48)throw new Error("User-friendly address should contain strictly 48 characters");const e=stringToBytes$3(base64toString$1(r));if(e.length!==36)throw"Unknown address type: byte length is not equal to 36";const n=e.slice(0,34),s=e.slice(34,36),a=crc16$1(n);if(!(a[0]===s[0]&&a[1]===s[1]))throw"Wrong crc16 hashsum";let o=n[0],g=!1,b=!1;if(o&test_flag&&(g=!0,o=o^test_flag),o!==bounceable_tag&&o!==non_bounceable_tag)throw"Unknown address tag";b=o===bounceable_tag;let B=null;if(n[1]===255?B=-1:B=n[1],B!==0&&B!==-1)throw new Error("Invalid address wc "+B);const N=n.slice(2,34);return{isTestOnly:g,isBounceable:b,workchain:B,hashPart:N}}let Address$e=class{static isValid(e){try{return new Address$e(e),!0}catch{return!1}}constructor(e){if(e==null)throw"Invalid address";if(e instanceof Address$e){this.wc=e.wc,this.hashPart=e.hashPart,this.isTestOnly=e.isTestOnly,this.isUserFriendly=e.isUserFriendly,this.isBounceable=e.isBounceable,this.isUrlSafe=e.isUrlSafe;return}if(e.search(/\-/)>0||e.search(/_/)>0?(this.isUrlSafe=!0,e=e.replace(/\-/g,"+").replace(/_/g,"/")):this.isUrlSafe=!1,e.indexOf(":")>-1){const n=e.split(":");if(n.length!==2)throw new Error("Invalid address "+e);const s=parseInt(n[0]);if(s!==0&&s!==-1)throw new Error("Invalid address wc "+e);const a=n[1];if(a.length!==64)throw new Error("Invalid address hex "+e);this.isUserFriendly=!1,this.wc=s,this.hashPart=hexToBytes$7(a),this.isTestOnly=!1,this.isBounceable=!1}else{this.isUserFriendly=!0;const n=parseFriendlyAddress(e);this.wc=n.workchain,this.hashPart=n.hashPart,this.isTestOnly=n.isTestOnly,this.isBounceable=n.isBounceable}}toString(e,n,s,a){if(e===void 0&&(e=this.isUserFriendly),n===void 0&&(n=this.isUrlSafe),s===void 0&&(s=this.isBounceable),a===void 0&&(a=this.isTestOnly),e){let o=s?bounceable_tag:non_bounceable_tag;a&&(o|=test_flag);const g=new Int8Array(34);g[0]=o,g[1]=this.wc,g.set(this.hashPart,2);const b=new Uint8Array(36);b.set(g),b.set(crc16$1(g),34);let B=stringToBase64$1(String.fromCharCode.apply(null,new Uint8Array(b)));return n&&(B=B.replace(/\+/g,"-").replace(/\//g,"_")),B}else return this.wc+":"+bytesToHex$c(this.hashPart)}};Address$f.default=Address$e;var AdnlAddress$3={};const{hexToBytes:hexToBytes$6,bytesToHex:bytesToHex$b}=Utils;let AdnlAddress$2=class{static isValid(e){try{return new AdnlAddress$2(e),!0}catch{return!1}}constructor(e){if(e==null)throw"Invalid address";if(e instanceof AdnlAddress$2)this.bytes=e.bytes;else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("invalid adnl bytes length");this.bytes=e}else if(typeof e=="string"){if(e.length!==64)throw new Error("invalid adnl hex length");this.bytes=hexToBytes$6(e)}else throw new Error("unsupported type")}toHex(){let e=bytesToHex$b(this.bytes);for(;e.length<64;)e="0"+e;return e}};AdnlAddress$3.default=AdnlAddress$2;var StorageBagId$3={};const{hexToBytes:hexToBytes$5,bytesToHex:bytesToHex$a}=Utils;let StorageBagId$2=class{static isValid(e){try{return new StorageBagId$2(e),!0}catch{return!1}}constructor(e){if(e==null)throw"Invalid address";if(e instanceof StorageBagId$2)this.bytes=e.bytes;else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("invalid bag id bytes length");this.bytes=e}else if(typeof e=="string"){if(e.length!==64)throw new Error("invalid bag id hex length");this.bytes=hexToBytes$5(e)}else throw new Error("unsupported type")}toHex(){let e=bytesToHex$a(this.bytes);for(;e.length<64;)e="0"+e;return e}};StorageBagId$3.default=StorageBagId$2;const{BN:BN$h,nacl:nacl$4,sha256:sha256$2,fromNano,toNano:toNano$2,bytesToHex:bytesToHex$9,hexToBytes:hexToBytes$4,stringToBytes:stringToBytes$2,crc32c:crc32c$1,crc16,concatBytes:concatBytes$1,bytesToBase64:bytesToBase64$7,base64ToBytes:base64ToBytes$3,base64toString,stringToBase64,compareBytes:compareBytes$1,readNBytesUIntFromArray:readNBytesUIntFromArray$1,keyPairFromSeed,newKeyPair,newSeed}=Utils,Address$d=Address$f.default,AdnlAddress$1=AdnlAddress$3.default,StorageBagId$1=StorageBagId$3.default;function parseTransferUrl(r){const e="ton://transfer/";if(!r.startsWith(e))throw new Error("must starts with "+e);const n=r.substring(e.length).split("?");if(n.length>2)throw new Error('multiple "?"');const s=n[0];if(!Address$d.isValid(s))throw new Error("invalid address format "+s);const a={address:s},o=n[1];if(o&&o.length){const g=o.split("&").map(b=>b.split("="));for(const b of g){if(b.length!==2)throw new Error("invalid url pair");const B=b[0],N=b[1];if(B==="amount"){if(a.amount)throw new Error("amount already set");if(new BN$h(N).isNeg())throw new Error("negative amount");a.amount=N}else if(B==="text"){if(a.text)throw new Error("text already set");a.text=decodeURIComponent(N)}else throw new Error("unknown url var "+B)}}return a}function formatTransferUrl(r,e,n){let s="ton://transfer/"+r;const a=[];return e&&a.push("amount="+e),n&&a.push("text="+encodeURIComponent(n)),a.length===0?s:s+"?"+a.join("&")}var utils$1={Address:Address$d,AdnlAddress:AdnlAddress$1,StorageBagId:StorageBagId$1,BN:BN$h,nacl:nacl$4,sha256:sha256$2,fromNano,toNano:toNano$2,bytesToHex:bytesToHex$9,hexToBytes:hexToBytes$4,stringToBytes:stringToBytes$2,crc32c:crc32c$1,crc16,concatBytes:concatBytes$1,bytesToBase64:bytesToBase64$7,base64ToBytes:base64ToBytes$3,base64toString,stringToBase64,compareBytes:compareBytes$1,readNBytesUIntFromArray:readNBytesUIntFromArray$1,parseTransferUrl,formatTransferUrl,keyPairFromSeed,newKeyPair,newSeed};const{BN:BN$g,bytesToHex:bytesToHex$8}=utils$1;let BitString$3=class{constructor(e){this.array=Uint8Array.from({length:Math.ceil(e/8)},()=>0),this.cursor=0,this.length=e}getFreeBits(){return this.length-this.cursor}getUsedBits(){return this.cursor}getUsedBytes(){return Math.ceil(this.cursor/8)}get(e){return(this.array[e/8|0]&1<<7-e%8)>0}checkRange(e){if(e>this.length)throw Error("BitString overflow")}on(e){this.checkRange(e),this.array[e/8|0]|=1<<7-e%8}off(e){this.checkRange(e),this.array[e/8|0]&=~(1<<7-e%8)}toggle(e){this.checkRange(e),this.array[e/8|0]^=1<<7-e%8}forEach(e){const n=this.cursor;for(let s=0;s<n;s++)e(this.get(s))}writeBit(e){e&&e>0?this.on(this.cursor):this.off(this.cursor),this.cursor=this.cursor+1}writeBitArray(e){for(let n=0;n<e.length;n++)this.writeBit(e[n])}writeUint(e,n){if(e=new BN$g(e),n==0||e.toString(2).length>n){if(e==0)return;throw Error("bitLength is too small for number, got number="+e+",bitLength="+n)}const s=e.toString(2,n);for(let a=0;a<n;a++)this.writeBit(s[a]==1)}writeInt(e,n){if(e=new BN$g(e),n==1){if(e==-1){this.writeBit(!0);return}if(e==0){this.writeBit(!1);return}throw Error("Bitlength is too small for number")}else if(e.isNeg()){this.writeBit(!0);const a=new BN$g(2).pow(new BN$g(n-1));this.writeUint(a.add(e),n-1)}else this.writeBit(!1),this.writeUint(e,n-1)}writeUint8(e){this.writeUint(e,8)}writeBytes(e){for(let n=0;n<e.length;n++)this.writeUint8(e[n])}writeString(e){this.writeBytes(new TextEncoder().encode(e))}writeGrams(e){if(e==0)this.writeUint(0,4);else{e=new BN$g(e);const n=Math.ceil(e.toString(16).length/2);this.writeUint(n,4),this.writeUint(e,n*8)}}writeCoins(e){this.writeGrams(e)}writeAddress(e){e==null?this.writeUint(0,2):(this.writeUint(2,2),this.writeUint(0,1),this.writeInt(e.wc,8),this.writeBytes(e.hashPart))}writeBitString(e){e.forEach(n=>{this.writeBit(n)})}clone(){const e=new BitString$3(0);return e.array=this.array.slice(0),e.length=this.length,e.cursor=this.cursor,e}toString(){return this.toHex()}getTopUppedArray(){const e=this.clone();let n=Math.ceil(e.cursor/8)*8-e.cursor;if(n>0)for(n=n-1,e.writeBit(!0);n>0;)n=n-1,e.writeBit(!1);return e.array=e.array.slice(0,Math.ceil(e.cursor/8)),e.array}toHex(){if(this.cursor%4===0){const e=bytesToHex$8(this.array.slice(0,Math.ceil(this.cursor/8))).toUpperCase();return this.cursor%8===0?e:e.substr(0,e.length-1)}else{const e=this.clone();for(e.writeBit(1);e.cursor%4!==0;)e.writeBit(0);return e.toHex().toUpperCase()+"_"}}setTopUppedArray(e,n=!0){if(this.length=e.length*8,this.array=e,this.cursor=this.length,!(n||!this.length)){let s=!1;for(let a=0;a<7;a++)if(this.cursor-=1,this.get(this.cursor)){s=!0,this.off(this.cursor);break}if(!s)throw console.log(e,n),new Error("Incorrect TopUppedArray")}}};var BitString_1={BitString:BitString$3};const{BN:BN$f,Address:Address$c,bytesToHex:bytesToHex$7}=utils$1,{BitString:BitString$2}=BitString_1;let Slice$2=class{constructor(e,n,s){this.array=e,this.length=n,this.readCursor=0,this.refs=s,this.refCursor=0}getFreeBits(){return this.length-this.readCursor}checkRange(e){if(e>this.length)throw Error("BitString overflow")}get(e){return this.checkRange(e),(this.array[e/8|0]&1<<7-e%8)>0}loadBit(){const e=this.get(this.readCursor);return this.readCursor++,e}loadBits(e){const n=new BitString$2(e);for(let s=0;s<e;s++)n.writeBit(this.loadBit());return n.array}loadUint(e){if(e<1)throw"Incorrect bitLength";let n="";for(let s=0;s<e;s++)n+=this.loadBit()?"1":"0";return new BN$f(n,2)}loadInt(e){if(e<1)throw"Incorrect bitLength";const n=this.loadBit();if(e===1)return n?new BN$f(-1):new BN$f(0);let s=this.loadUint(e-1);if(n){const o=new BN$f(2).pow(new BN$f(e-1));s-=o}return s}loadVarUint(e){const n=this.loadUint(new BN$f(e).toString(2).length-1);return n.toNumber()===0?new BN$f(0):this.loadUint(n*8)}loadCoins(){return this.loadVarUint(16)}loadAddress(){const e=this.loadUint(2);if(e.toNumber()===0)return null;if(e.toNumber()!==2)throw new Error("unsupported address type");if(this.loadBit())throw new Error("unsupported address type");const n=this.loadInt(8).toNumber(),s=this.loadBits(256);return new Address$c(n+":"+bytesToHex$7(s))}loadRef(){if(this.refCursor>=4)throw new Error("refs overflow");const e=this.refs[this.refCursor];return this.refCursor++,e}};var Slice_1={Slice:Slice$2};const{BitString:BitString$1}=BitString_1,{bytesToBase64:bytesToBase64$6,compareBytes,concatBytes,crc32c,hexToBytes:hexToBytes$3,readNBytesUIntFromArray,sha256:sha256$1,bytesToHex:bytesToHex$6}=utils$1,{Slice:Slice$1}=Slice_1,reachBocMagicPrefix=hexToBytes$3("B5EE9C72"),leanBocMagicPrefix=hexToBytes$3("68ff65f3"),leanBocMagicPrefixCRC=hexToBytes$3("acc3a728");let Cell$p=class{constructor(){this.bits=new BitString$1(1023),this.refs=[],this.isExotic=!1}static fromBoc(e){return deserializeBoc(e)}static oneFromBoc(e){const n=deserializeBoc(e);if(n.length!==1)throw new Error("expected 1 root cell but have "+n.length);return n[0]}writeCell(e){this.bits.writeBitString(e.bits),this.refs=this.refs.concat(e.refs)}getMaxLevel(){let e=0;for(let n in this.refs){const s=this.refs[n];s.getMaxLevel()>e&&(e=s.getMaxLevel())}return e}isExplicitlyStoredHashes(){return 0}getMaxDepth(){let e=0;if(this.refs.length>0){for(let n in this.refs){const s=this.refs[n];s.getMaxDepth()>e&&(e=s.getMaxDepth())}e=e+1}return e}getMaxDepthAsArray(){const e=this.getMaxDepth(),n=Uint8Array.from({length:2},()=>0);return n[1]=e%256,n[0]=Math.floor(e/256),n}getRefsDescriptor(){const e=Uint8Array.from({length:1},()=>0);return e[0]=this.refs.length+this.isExotic*8+this.getMaxLevel()*32,e}getBitsDescriptor(){const e=Uint8Array.from({length:1},()=>0);return e[0]=Math.ceil(this.bits.cursor/8)+Math.floor(this.bits.cursor/8),e}getDataWithDescriptors(){const e=this.getRefsDescriptor(),n=this.getBitsDescriptor(),s=this.bits.getTopUppedArray();return concatBytes(concatBytes(e,n),s)}async getRepr(){const e=[];e.push(this.getDataWithDescriptors());for(let s in this.refs){const a=this.refs[s];e.push(a.getMaxDepthAsArray())}for(let s in this.refs){const a=this.refs[s];e.push(await a.hash())}let n=new Uint8Array;for(let s in e){const a=e[s];n=concatBytes(n,a)}return n}async hash(){return new Uint8Array(await sha256$1(await this.getRepr()))}beginParse(){const e=this.refs.map(n=>n.beginParse());return new Slice$1(this.bits.array.slice(),this.bits.length,e)}print(e){e=e||"";let n=e+"x{"+this.bits.toHex()+`}
`;for(let s in this.refs){const a=this.refs[s];n+=a.print(e+" ")}return n}async toBoc(e=!0,n=!0,s=!1,a=0){const g=await this.treeWalk(),b=g[0],B=g[1],N=b.length,I=N.toString(2).length,U=Math.min(Math.ceil(I/8),1);let H=0,Q=[];for(let we of b)Q.push(H),H=H+await we[1].bocSerializationSize(B,U);const $t=H.toString(2).length,Dt=Math.max(Math.ceil($t/8),1),xt=new BitString$1((1023+32*4+32*3)*b.length);xt.writeBytes(reachBocMagicPrefix),xt.writeBitArray([e,n,s]),xt.writeUint(a,2),xt.writeUint(U,3),xt.writeUint8(Dt),xt.writeUint(N,U*8),xt.writeUint(1,U*8),xt.writeUint(0,U*8),xt.writeUint(H,Dt*8),xt.writeUint(0,U*8),e&&b.forEach((we,Mt)=>xt.writeUint(Q[Mt],Dt*8));for(let we of b){const Mt=await we[1].serializeForBoc(B,U);xt.writeBytes(Mt)}let Ut=xt.getTopUppedArray();return n&&(Ut=concatBytes(Ut,crc32c(Ut))),Ut}async serializeForBoc(e,n){const s=[];if(s.push(this.getDataWithDescriptors()),this.isExplicitlyStoredHashes())throw new Error("Cell hashes explicit storing is not implemented");for(let o in this.refs){const b=await this.refs[o].hash();let N=e[b].toString(16);N.length%2&&(N="0"+N);const I=hexToBytes$3(N);s.push(I)}let a=new Uint8Array;for(let o in s){const g=s[o];a=concatBytes(a,g)}return a}async bocSerializationSize(e,n){return(await this.serializeForBoc(e,n)).length}async treeWalk(){return treeWalk(this,[],{})}};async function moveToTheEnd(r,e,n){const s=r[n];for(let o in r)r[o]>s&&(r[o]=r[o]-1);r[n]=e.length-1;const a=e.splice(s,1)[0];e.push(a);for(let o of a[1].refs)await moveToTheEnd(r,e,await o.hash())}async function treeWalk(r,e,n,s=null){const a=await r.hash();if(a in n)return s&&n[s]>n[a]&&await moveToTheEnd(n,e,a),[e,n];n[a]=e.length,e.push([a,r]);for(let o of r.refs){const g=await treeWalk(o,e,n,a);e=g[0],n=g[1]}return[e,n]}function parseBocHeader(r){if(r.length<4+1)throw"Not enough bytes for magic prefix";const e=r,n=r.slice(0,4);r=r.slice(4);let s,a,o,g,b;if(compareBytes(n,reachBocMagicPrefix)){const xt=r[0];s=xt&128,a=xt&64,o=xt&32,g=(xt&16)*2+(xt&8),b=xt%8}if(compareBytes(n,leanBocMagicPrefix)&&(s=1,a=0,o=0,g=0,b=r[0]),compareBytes(n,leanBocMagicPrefixCRC)&&(s=1,a=1,o=0,g=0,b=r[0]),r=r.slice(1),r.length<1+5*b)throw"Not enough bytes for encoding cells counters";const B=r[0];r=r.slice(1);const N=readNBytesUIntFromArray(b,r);r=r.slice(b);const I=readNBytesUIntFromArray(b,r);r=r.slice(b);const U=readNBytesUIntFromArray(b,r);r=r.slice(b);const H=readNBytesUIntFromArray(B,r);if(r=r.slice(B),r.length<I*b)throw"Not enough bytes for encoding root cells hashes";let Q=[];for(let xt=0;xt<I;xt++)Q.push(readNBytesUIntFromArray(b,r)),r=r.slice(b);let $t=!1;if(s){if($t=[],r.length<B*N)throw"Not enough bytes for index encoding";for(let xt=0;xt<N;xt++)$t.push(readNBytesUIntFromArray(B,r)),r=r.slice(B)}if(r.length<H)throw"Not enough bytes for cells data";const Dt=r.slice(0,H);if(r=r.slice(H),a){if(r.length<4)throw"Not enough bytes for crc32c hashsum";const xt=e.length;if(!compareBytes(crc32c(e.slice(0,xt-4)),r.slice(0,4)))throw"Crc32c hashsum mismatch";r=r.slice(4)}if(r.length)throw"Too much bytes in BoC serialization";return{has_idx:s,hash_crc32:a,has_cache_bits:o,flags:g,size_bytes:b,off_bytes:B,cells_num:N,roots_num:I,absent_num:U,tot_cells_size:H,root_list:Q,index:$t,cells_data:Dt}}function deserializeCellData(r,e){if(r.length<2)throw"Not enough bytes to encode cell descriptors";const n=r[0],s=r[1];r=r.slice(2);const a=n&8,o=n%8,g=Math.ceil(s/2),b=!(s%2);let B=new Cell$p;if(B.isExotic=a,r.length<g+e*o)throw"Not enough bytes to encode cell data";B.bits.setTopUppedArray(r.slice(0,g),b),r=r.slice(g);for(let N=0;N<o;N++)B.refs.push(readNBytesUIntFromArray(e,r)),r=r.slice(e);return{cell:B,residue:r}}function deserializeBoc(r){typeof r=="string"&&(r=hexToBytes$3(r));const e=parseBocHeader(r);let n=e.cells_data,s=[];for(let o=0;o<e.cells_num;o++){let g=deserializeCellData(n,e.size_bytes);n=g.residue,s.push(g.cell)}for(let o=e.cells_num-1;o>=0;o--){let g=s[o];for(let b=0;b<g.refs.length;b++){const B=g.refs[b];if(B<o)throw"Topological order is broken";g.refs[b]=s[B]}}let a=[];for(let o of e.root_list)a.push(s[o]);return a}var Cell_1={Cell:Cell$p};const{BitString}=BitString_1,{Cell:Cell$o}=Cell_1,{Slice}=Slice_1;var boc$1={BitString,Cell:Cell$o,Slice};const{Cell:Cell$n}=boc$1,{Address:Address$b,bytesToBase64:bytesToBase64$5,bytesToHex:bytesToHex$5,BN:BN$e}=utils$1;let Contract$e=class{constructor(e,n){this.provider=e,this.options=n,this.address=n.address?new Address$b(n.address):null,n.wc||(n.wc=this.address?this.address.wc:0),this.methods={}}async getAddress(){return this.address||(this.address=(await this.createStateInit()).address),this.address}createCodeCell(){if(!this.options.code)throw new Error("Contract: options.code is not defined");return this.options.code}createDataCell(){return new Cell$n}async createStateInit(){const e=this.createCodeCell(),n=this.createDataCell(),s=Contract$e.createStateInit(e,n),a=await s.hash(),o=new Address$b(this.options.wc+":"+bytesToHex$5(a));return{stateInit:s,address:o,code:e,data:n}}static createStateInit(e,n,s=null,a=null,o=null){if(s)throw"Library in state init is not implemented";if(a)throw"Split depth in state init is not implemented";if(o)throw"Ticktock in state init is not implemented";const g=new Cell$n;return g.bits.writeBitArray([Boolean(a),Boolean(o),Boolean(e),Boolean(n),Boolean(s)]),e&&g.refs.push(e),n&&g.refs.push(n),s&&g.refs.push(s),g}static createInternalMessageHeader(e,n=0,s=!0,a=null,o=!1,g=null,b=null,B=0,N=0,I=0,U=0){const H=new Cell$n;if(H.bits.writeBit(!1),H.bits.writeBit(s),a!==null?H.bits.writeBit(a):H.bits.writeBit(new Address$b(e).isBounceable),H.bits.writeBit(o),H.bits.writeAddress(g?new Address$b(g):null),H.bits.writeAddress(new Address$b(e)),H.bits.writeGrams(n),b)throw"Currency collections are not implemented yet";return H.bits.writeBit(Boolean(b)),H.bits.writeGrams(B),H.bits.writeGrams(N),H.bits.writeUint(I,64),H.bits.writeUint(U,32),H}static createExternalMessageHeader(e,n=null,s=0){const a=new Cell$n;return a.bits.writeUint(2,2),a.bits.writeAddress(n?new Address$b(n):null),a.bits.writeAddress(new Address$b(e)),a.bits.writeGrams(s),a}static createOutMsg(e,n,s,a=null){let o=new Cell$n;s&&(s.refs?o=s:typeof s=="string"?s.length>0&&(o.bits.writeUint(0,32),o.bits.writeString(s)):o.bits.writeBytes(s));const g=Contract$e.createInternalMessageHeader(new Address$b(e),new BN$e(n));return Contract$e.createCommonMsgInfo(g,a,o)}static createCommonMsgInfo(e,n=null,s=null){const a=new Cell$n;return a.writeCell(e),n?(a.bits.writeBit(!0),a.bits.writeBit(!0),a.refs.push(n)):a.bits.writeBit(!1),s?a.bits.getFreeBits()>=s.bits.getUsedBits()&&a.refs.length+s.refs.length<=4?(a.bits.writeBit(!1),a.writeCell(s)):(a.bits.writeBit(!0),a.refs.push(s)):a.bits.writeBit(!1),a}static createMethod(e,n){return{getQuery:async()=>(await n).message,send:async()=>{const s=await n,a=bytesToBase64$5(await s.message.toBoc(!1));return e.sendBoc(a)},estimateFee:async()=>{const s=await n,a=s.code?{address:s.address.toString(!0,!0,!1),body:bytesToBase64$5(await s.body.toBoc(!1)),init_code:bytesToBase64$5(await s.code.toBoc(!1)),init_data:bytesToBase64$5(await s.data.toBoc(!1))}:{address:s.address.toString(!0,!0,!0),body:bytesToBase64$5(await s.body.toBoc(!1))};return e.getEstimateFee(a)}}}};var contract={Contract:Contract$e};const{Cell:Cell$m}=boc$1,{Address:Address$a,BN:BN$d,bytesToHex:bytesToHex$4}=utils$1,{Contract:Contract$d}=contract;let AppTon$1=class{constructor(e,n){this.transport=e,this.ton=n,this.ADDRESS_FORMAT_HEX=0,this.ADDRESS_FORMAT_USER_FRIENDLY=1,this.ADDRESS_FORMAT_URL_SAFE=2,this.ADDRESS_FORMAT_BOUNCEABLE=4,this.ADDRESS_FORMAT_TEST_ONLY=8}async getAppConfiguration(){const e=await this.transport.send(224,1,0,0);return{version:""+e[0]+"."+e[1]+"."+e[2]}}async getPublicKey(e,n){const s=Buffer.alloc(4);s.writeInt32BE(e);const a=await this.transport.send(224,2,n?1:0,0,s),o=a[0];return{publicKey:new Uint8Array(a.slice(1,1+o))}}async getAddress(e,n,s){const a=Buffer.alloc(4);a.writeInt32BE(e);const o=await this.transport.send(224,5,n?1:0,s,a),g=o[0],b=new Uint8Array(o.slice(1,1+g));return{address:new Address$a("0:"+bytesToHex$4(b))}}async sign(e,n){const s=Buffer.alloc(4);s.writeInt32BE(e);const a=Buffer.concat([s,Buffer.from(n)]),o=await this.transport.send(224,3,0,0,a),g=o[0];return{signature:o.slice(1,1+g)}}async transfer(e,n,s,a,o,g){const B=await n.createTransferMessage(null,s,a,o,null,3,!0),N=Buffer.alloc(4);N.writeInt32BE(e);const I=Buffer.concat([N,Buffer.from(await B.signingMessage.toBoc())]),U=await this.transport.send(224,4,g,0,I),H=U[0],Q=U.slice(1,1+H),$t=new Uint8Array(Q),Dt=new Cell$m;Dt.bits.writeBytes($t),Dt.writeCell(B.signingMessage);let xt=null,Ut=null,we=null;if(o===0){const ne=await n.createStateInit();xt=ne.stateInit,Ut=ne.code,we=ne.data}const Mt=await n.getAddress(),ae=Contract$d.createExternalMessageHeader(Mt),Yt=Contract$d.createCommonMsgInfo(ae,xt,Dt),ve=new Promise(ne=>{ne({address:Mt,message:Yt,body:Dt,signature:$t,signingMessage:B.signingMessage,stateInit:xt,code:Ut,data:we})});return Contract$d.createMethod(this.ton.provider,ve)}};var AppTon_1=AppTon$1,providers={},HttpProviderUtils$2={};const{BN:BN$c,base64ToBytes:base64ToBytes$2}=utils$1,{Cell:Cell$l}=boc$1;let HttpProviderUtils$1=class{static parseObject(e){const n=e["@type"];switch(n){case"tvm.list":case"tvm.tuple":return e.elements.map(HttpProviderUtils$1.parseObject);case"tvm.cell":return Cell$l.oneFromBoc(base64ToBytes$2(e.bytes));case"tvm.stackEntryCell":return HttpProviderUtils$1.parseObject(e.cell);case"tvm.stackEntryTuple":return HttpProviderUtils$1.parseObject(e.tuple);case"tvm.stackEntryNumber":return HttpProviderUtils$1.parseObject(e.number);case"tvm.numberDecimal":return new BN$c(e.number,10);default:throw new Error("unknown type "+n)}}static parseResponseStack(e){const n=e[0],s=e[1];switch(n){case"num":return new BN$c(s.replace(/0x/,""),16);case"list":case"tuple":return HttpProviderUtils$1.parseObject(s);case"cell":const a=base64ToBytes$2(s.bytes);return Cell$l.oneFromBoc(a);default:throw new Error("unknown type "+n)}}static parseResponse(e){if(e.exit_code!==0){const s=new Error("http provider parse response error");throw s.result=e,s}const n=e.stack.map(HttpProviderUtils$1.parseResponseStack);return n.length===1?n[0]:n}static makeArg(e){if(e instanceof BN$c||e instanceof Number)return["num",e];throw new Error("unknown arg type "+e)}static makeArgs(e){return e.map(this.makeArg)}};HttpProviderUtils$2.default=HttpProviderUtils$1;const{Cell:Cell$k}=boc$1,{base64ToBytes:base64ToBytes$1}=utils$1,HttpProviderUtils=HttpProviderUtils$2.default;typeof fetch>"u"&&(fetch=require$$3$1);const SHARD_ID_ALL="-9223372036854775808";let HttpProvider$1=class{constructor(e,n){this.host=e||"https://toncenter.com/api/v2/jsonRPC",this.options=n||{}}sendImpl(e,n){const s={"Content-Type":"application/json"};return this.options.apiKey&&(s["X-API-Key"]=this.options.apiKey),fetch(e,{method:"POST",headers:s,body:JSON.stringify(n)}).then(a=>a.json()).then(({result:a,error:o})=>a||Promise.reject(o))}send(e,n){return this.sendImpl(this.host,{id:1,jsonrpc:"2.0",method:e,params:n})}async getAddressInfo(e){return this.send("getAddressInformation",{address:e})}async getExtendedAddressInfo(e){return this.send("getExtendedAddressInformation",{address:e})}async getWalletInfo(e){return this.send("getWalletInformation",{address:e})}async getTransactions(e,n=20,s=void 0,a=void 0,o=void 0,g=void 0){return this.send("getTransactions",{address:e,limit:n,lt:s,hash:a,to_lt:o,archival:g})}async getBalance(e){return this.send("getAddressBalance",{address:e})}async sendBoc(e){return this.send("sendBoc",{boc:e})}async sendQuery(e){return this.send("sendQuerySimple",e)}async getEstimateFee(e){return this.send("estimateFee",e)}async call(e,n,s=[]){return this.send("runGetMethod",{address:e,method:n,stack:s})}async call2(e,n,s=[]){const a=await this.send("runGetMethod",{address:e,method:n,stack:s});return HttpProviderUtils.parseResponse(a)}async getConfigParam(e){const n=await this.send("getConfigParam",{config_id:e});if(n["@type"]!=="configInfo")throw new Error("getConfigParam expected type configInfo");if(!n.config)throw new Error("getConfigParam expected config");if(n.config["@type"]!=="tvm.cell")throw new Error("getConfigParam expected type tvm.cell");if(!n.config.bytes)throw new Error("getConfigParam expected bytes");return Cell$k.oneFromBoc(base64ToBytes$1(n.config.bytes))}async getMasterchainInfo(){return this.send("getMasterchainInfo",{})}async getBlockShards(e){return this.send("shards",{seqno:e})}async getBlockTransactions(e,n,s){return this.send("getBlockTransactions",{workchain:e,shard:n,seqno:s})}async getMasterchainBlockTransactions(e){return this.getBlockTransactions(-1,SHARD_ID_ALL,e)}async getBlockHeader(e,n,s){return this.send("getBlockHeader",{workchain:e,shard:n,seqno:s})}async getMasterchainBlockHeader(e){return this.getBlockHeader(-1,SHARD_ID_ALL,e)}};HttpProvider$1.SHARD_ID_ALL=SHARD_ID_ALL;providers.default=HttpProvider$1;var wallet={};const{Contract:Contract$c}=contract,{Cell:Cell$j}=boc$1,{nacl:nacl$3,stringToBytes:stringToBytes$1,Address:Address$9,BN:BN$b}=utils$1;let WalletContract$6=class extends Contract$c{constructor(e,n){if(!n.publicKey&&!n.address)throw new Error("WalletContract required publicKey or address in options");super(e,n),this.methods={transfer:s=>Contract$c.createMethod(e,this.createTransferMessage(s.secretKey,s.toAddress,s.amount,s.seqno,s.payload,s.sendMode,!Boolean(s.secretKey),s.stateInit,s.expireAt)),transfers:s=>Contract$c.createMethod(e,this.createTransferMessages(s.secretKey,s.seqno,s.messages,!Boolean(s.secretKey),s.expireAt)),seqno:()=>({call:async()=>{const s=await this.getAddress();let a=null;try{a=(await e.call2(s.toString(),"seqno")).toNumber()}catch{}return a}})},this.deploy=s=>Contract$c.createMethod(e,this.createInitExternalMessage(s))}getName(){throw new Error("override me")}createDataCell(){const e=new Cell$j;return e.bits.writeUint(0,32),e.bits.writeBytes(this.options.publicKey),e}createSigningMessage(e){e=e||0;const n=new Cell$j;return n.bits.writeUint(e,32),n}async createInitExternalMessage(e){if(!this.options.publicKey){const U=nacl$3.sign.keyPair.fromSecretKey(e);this.options.publicKey=U.publicKey}const{stateInit:n,address:s,code:a,data:o}=await this.createStateInit(),g=this.createSigningMessage(),b=nacl$3.sign.detached(await g.hash(),e),B=new Cell$j;B.bits.writeBytes(b),B.writeCell(g);const N=Contract$c.createExternalMessageHeader(s),I=Contract$c.createCommonMsgInfo(N,n,B);return{address:s,message:I,body:B,signingMessage:g,stateInit:n,code:a,data:o}}async createExternalMessage(e,n,s,a=!1){const o=a?new Uint8Array(64):nacl$3.sign.detached(await e.hash(),n),g=new Cell$j;g.bits.writeBytes(o),g.writeCell(e);let b=null,B=null,N=null;if(s===0){if(!this.options.publicKey){const $t=nacl$3.sign.keyPair.fromSecretKey(n);this.options.publicKey=$t.publicKey}const Q=await this.createStateInit();b=Q.stateInit,B=Q.code,N=Q.data}const I=await this.getAddress(),U=Contract$c.createExternalMessageHeader(I),H=Contract$c.createCommonMsgInfo(U,b,g);return{address:I,message:H,body:g,signature:o,signingMessage:e,stateInit:b,code:B,data:N}}async createTransferMessage(e,n,s,a,o="",g=3,b=!1,B=null,N=void 0){if(a==null||a<0)throw new Error("seqno must be number >= 0");const I=this.createSigningMessage(a,N);return g==null&&(g=3),I.bits.writeUint8(g),I.refs.push(Contract$c.createOutMsg(n,s,o,B)),this.createExternalMessage(I,e,a,b)}async createTransferMessages(e,n,s,a=!1,o=void 0){if(n==null||n<0)throw new Error("seqno must be number >= 0");const g=this.createSigningMessage(n,o);if(s.length<1||s.length>4)throw new Error("put 1-4 messages");for(let b of s){let B=b.sendMode;B==null&&(B=3),g.bits.writeUint8(B),g.refs.push(Contract$c.createOutMsg(b.toAddress,b.amount,b.payload,b.stateInit))}return this.createExternalMessage(g,e,n,a)}};var WalletContract_1={WalletContract:WalletContract$6};const{Cell:Cell$i}=boc$1,{WalletContract:WalletContract$5}=WalletContract_1;let SimpleWalletContractR1$1=class extends WalletContract$5{constructor(e,n){n.code=Cell$i.oneFromBoc("B5EE9C72410101010044000084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5441FDF089"),super(e,n)}getName(){return"simpleR1"}},SimpleWalletContractR2$1=class extends WalletContract$5{constructor(e,n){n.code=Cell$i.oneFromBoc("B5EE9C724101010100530000A2FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54D0E2786F"),super(e,n)}getName(){return"simpleR2"}},SimpleWalletContractR3$1=class extends WalletContract$5{constructor(e,n){n.code=Cell$i.oneFromBoc("B5EE9C7241010101005F0000BAFF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54B5B86E42"),super(e,n)}getName(){return"simpleR3"}};var WalletContractSimple={SimpleWalletContractR1:SimpleWalletContractR1$1,SimpleWalletContractR2:SimpleWalletContractR2$1,SimpleWalletContractR3:SimpleWalletContractR3$1};const{Cell:Cell$h}=boc$1,{WalletContract:WalletContract$4}=WalletContract_1;class WalletV2ContractBase extends WalletContract$4{createSigningMessage(e,n){e=e||0,n=n||Math.floor(Date.now()/1e3)+60;const s=new Cell$h;if(s.bits.writeUint(e,32),e===0)for(let a=0;a<32;a++)s.bits.writeBit(1);else s.bits.writeUint(n,32);return s}}let WalletV2ContractR1$1=class extends WalletV2ContractBase{constructor(e,n){n.code=Cell$h.oneFromBoc("B5EE9C724101010100570000AAFF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54A1370BB6"),super(e,n)}getName(){return"v2R1"}},WalletV2ContractR2$1=class extends WalletV2ContractBase{constructor(e,n){n.code=Cell$h.oneFromBoc("B5EE9C724101010100630000C2FF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54044CD7A1"),super(e,n)}getName(){return"v2R2"}};var WalletContractV2={WalletV2ContractR1:WalletV2ContractR1$1,WalletV2ContractR2:WalletV2ContractR2$1};const{BN:BN$a}=utils$1;function parseWalletV3TransferBody$3(r){if(r.loadBits(512),r.loadUint(32).toNumber()!==698983191)throw new Error("invalid walletId");const n=r.loadUint(32).toNumber(),s=r.loadUint(32).toNumber();if(r.loadUint(8).toNumber()!==3)throw new Error("invalid sendMode");let o=r.loadRef();if(o.loadBit())throw Error("invalid internal header");if(!o.loadBit())throw Error("invalid ihrDisabled");const g=o.loadBit();if(o.loadBit())throw Error("invalid bounced");if(o.loadAddress()!==null)throw Error("invalid externalSourceAddress");const B=o.loadAddress(),N=o.loadCoins();if(o.loadBit())throw Error("invalid currencyCollection");if(!o.loadCoins().eq(new BN$a(0)))throw new Error("invalid ihrFees");if(!o.loadCoins().eq(new BN$a(0)))throw new Error("invalid fwdFees");if(!o.loadUint(64).eq(new BN$a(0)))throw new Error("invalid createdLt");if(!o.loadUint(32).eq(new BN$a(0)))throw new Error("invalid createdAt");o.loadBit()&&o.loadRef();let $t=null;if(o.getFreeBits()>0&&(o.loadBit()&&(o=o.loadRef()),o.getFreeBits()>32)){const Dt=o.loadUint(32),xt=o.loadBits(o.getFreeBits());$t=Dt.eq(new BN$a(0))?new TextDecoder().decode(xt):""}return{toAddress:B,value:N,bounce:g,seqno:s,expireAt:n,payload:$t}}function parseWalletV3TransferQuery$3(r){const e=r.beginParse();if(e.loadUint(2).toNumber()!==2)throw Error("invalid header");if(e.loadAddress()!==null)throw Error("invalid externalSourceAddress");const s=e.loadAddress();if(!e.loadCoins().eq(new BN$a(0)))throw new Error("invalid externalImportFee");e.loadBit()&&e.loadBit()&&e.loadRef();const o=e.loadBit()?e.loadRef():e;return{fromAddress:s,...parseWalletV3TransferBody$3(o)}}var WalletQueryParser={parseWalletV3TransferQuery:parseWalletV3TransferQuery$3,parseWalletV3TransferBody:parseWalletV3TransferBody$3};const{Cell:Cell$g}=boc$1,{WalletContract:WalletContract$3}=WalletContract_1,{parseWalletV3TransferQuery:parseWalletV3TransferQuery$2,parseWalletV3TransferBody:parseWalletV3TransferBody$2}=WalletQueryParser;class WalletV3ContractBase extends WalletContract$3{createSigningMessage(e,n){e=e||0,n=n||Math.floor(Date.now()/1e3)+60;const s=new Cell$g;if(s.bits.writeUint(this.options.walletId,32),e===0)for(let a=0;a<32;a++)s.bits.writeBit(1);else s.bits.writeUint(n,32);return s.bits.writeUint(e,32),s}createDataCell(){const e=new Cell$g;return e.bits.writeUint(0,32),e.bits.writeUint(this.options.walletId,32),e.bits.writeBytes(this.options.publicKey),e}}let WalletV3ContractR1$1=class extends WalletV3ContractBase{constructor(e,n){n.code=Cell$g.oneFromBoc("B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0"),super(e,n),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R1"}};WalletV3ContractR1$1.parseTransferQuery=parseWalletV3TransferQuery$2;WalletV3ContractR1$1.parseTransferBody=parseWalletV3TransferBody$2;let WalletV3ContractR2$1=class extends WalletV3ContractBase{constructor(e,n){n.code=Cell$g.oneFromBoc("B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD"),super(e,n),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R2"}};WalletV3ContractR2$1.parseTransferQuery=parseWalletV3TransferQuery$2;WalletV3ContractR2$1.parseTransferBody=parseWalletV3TransferBody$2;var WalletContractV3={WalletV3ContractR1:WalletV3ContractR1$1,WalletV3ContractR2:WalletV3ContractR2$1};const{Cell:Cell$f}=boc$1,{WalletContract:WalletContract$2}=WalletContract_1,{parseWalletV3TransferQuery:parseWalletV3TransferQuery$1,parseWalletV3TransferBody:parseWalletV3TransferBody$1}=WalletQueryParser;let WalletV4ContractR1$1=class extends WalletContract$2{constructor(e,n){n.code=Cell$f.oneFromBoc("B5EE9C72410215010002F5000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF263ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1112131403EED001D0D3030171B0915BE021D749C120915BE001D31F218210706C7567BD228210626C6E63BDB022821064737472BDB0925F03E002FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F05E004D33FC8258210706C7567BA9131E30D248210626C6E63BAE30004060708020120090A005001FA00F404308210706C7567831EB17080185005CB0527CF165003FA02F40012CB69CB1F5210CB3F0052F8276F228210626C6E63831EB17080185005CB0527CF1624FA0214CB6A13CB1F5230CB3F01FA02F4000092821064737472BA8E3504810108F45930ED44D0810140D720C801CF16F400C9ED54821064737472831EB17080185004CB0558CF1622FA0212CB6ACB1FCB3F9410345F04E2C98040FB000201200B0C0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580D0E0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200F100019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC971FB00C84014810108F451F2A702006C810108D718C8542025810108F451F2A782106E6F746570748018C8CB05CB025004CF16821005F5E100FA0213CB6A12CB1FC971FB00020072810108D718305202810108F459F2A7F82582106473747270748018C8CB05CB025005CF16821005F5E100FA0214CB6A13CB1F12CB3FC973FB00000AF400C9ED5446A9F34F"),super(e,n),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this)}getName(){return"v4R1"}createSigningMessage(e,n,s){e=e||0,n=n||Math.floor(Date.now()/1e3)+60;const a=new Cell$f;if(a.bits.writeUint(this.options.walletId,32),e===0)for(let o=0;o<32;o++)a.bits.writeBit(1);else a.bits.writeUint(n,32);return a.bits.writeUint(e,32),s||a.bits.writeUint(0,8),a}createDataCell(){const e=new Cell$f;return e.bits.writeUint(0,32),e.bits.writeUint(this.options.walletId,32),e.bits.writeBytes(this.options.publicKey),e.bits.writeUint(0,1),e}async getPublicKey(){const e=await this.getAddress();return this.provider.call2(e.toString(),"get_public_key")}};WalletV4ContractR1$1.parseTransferQuery=parseWalletV3TransferQuery$1;WalletV4ContractR1$1.parseTransferBody=parseWalletV3TransferBody$1;var WalletContractV4={WalletV4ContractR1:WalletV4ContractR1$1};const{Cell:Cell$e}=boc$1,{Contract:Contract$b}=contract,{Address:Address$8,bytesToHex:bytesToHex$3,BN:BN$9,toNano:toNano$1}=utils$1,{WalletContract:WalletContract$1}=WalletContract_1,{parseWalletV3TransferQuery,parseWalletV3TransferBody}=WalletQueryParser;let WalletV4ContractR2$1=class extends WalletContract$1{constructor(e,n){n.code=Cell$e.oneFromBoc("B5EE9C72410214010002D4000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF264ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1011121302E6D001D0D3032171B0925F04E022D749C120925F04E002D31F218210706C7567BD22821064737472BDB0925F05E003FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F07E005D33FC8258210706C7567BA923830E30D03821064737472BA925F06E30D06070201200809007801FA00F40430F8276F2230500AA121BEF2E0508210706C7567831EB17080185004CB0526CF1658FA0219F400CB6917CB1F5260CB3F20C98040FB0006008A5004810108F45930ED44D0810140D720C801CF16F400C9ED540172B08E23821064737472831EB17080185005CB055003CF1623FA0213CB6ACB1FCB3FC98040FB00925F03E20201200A0B0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580C0D0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200E0F0019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC973FB00C84014810108F451F2A7020070810108D718FA00D33FC8542047810108F451F2A782106E6F746570748018C8CB05CB025006CF165004FA0214CB6A12CB1FCB3FC973FB0002006C810108D718FA00D33F305224810108F459F2A782106473747270748018C8CB05CB025005CF165003FA0213CB6ACB1F12CB3FC973FB00000AF400C9ED54696225E5"),super(e,n),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.deployAndInstallPlugin=s=>Contract$b.createMethod(e,this.deployAndInstallPlugin(s)),this.methods.installPlugin=s=>Contract$b.createMethod(e,this.installPlugin(s)),this.methods.removePlugin=s=>Contract$b.createMethod(e,this.removePlugin(s)),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.isPluginInstalled=this.isPluginInstalled.bind(this),this.methods.getPluginsList=this.getPluginsList.bind(this)}getName(){return"v4R2"}createSigningMessage(e,n,s){e=e||0,n=n||Math.floor(Date.now()/1e3)+60;const a=new Cell$e;if(a.bits.writeUint(this.options.walletId,32),e===0)for(let o=0;o<32;o++)a.bits.writeBit(1);else a.bits.writeUint(n,32);return a.bits.writeUint(e,32),s||a.bits.writeUint(0,8),a}createDataCell(){const e=new Cell$e;return e.bits.writeUint(0,32),e.bits.writeUint(this.options.walletId,32),e.bits.writeBytes(this.options.publicKey),e.bits.writeUint(0,1),e}async deployAndInstallPlugin(e){const{secretKey:n,seqno:s,pluginWc:a,amount:o,stateInit:g,body:b,expireAt:B}=e,N=this.createSigningMessage(s,B,!0);return N.bits.writeUint(1,8),N.bits.writeInt(a,8),N.bits.writeGrams(o),N.refs.push(g),N.refs.push(b),this.createExternalMessage(N,n,s,!1)}async _setPlugin(e,n){const{secretKey:s,seqno:a,amount:o,queryId:g,expireAt:b}=e,B=new Address$8(e.pluginAddress),N=this.createSigningMessage(a,b,!0);return N.bits.writeUint(n?2:3,8),N.bits.writeInt(B.wc,8),N.bits.writeBytes(B.hashPart),N.bits.writeGrams(o||toNano$1("0.1")),N.bits.writeUint(g||0,64),this.createExternalMessage(N,s,a,!1)}async installPlugin(e){return this._setPlugin(e,!0)}async removePlugin(e){return this._setPlugin(e,!1)}async getWalletId(){const e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const e=await this.getAddress();return this.provider.call2(e.toString(),"get_public_key")}async isPluginInstalled(e){e=new Address$8(e);const n="0x"+bytesToHex$3(e.hashPart),s=await this.getAddress();return!(await this.provider.call2(s.toString(),"is_plugin_installed",[["num",e.wc],["num",n]])).isZero()}async getPluginsList(){const e=a=>a[0].toNumber()+":"+a[1].toString(16),n=await this.getAddress();return(await this.provider.call2(n.toString(),"get_plugin_list")).map(e)}};WalletV4ContractR2$1.parseTransferQuery=parseWalletV3TransferQuery;WalletV4ContractR2$1.parseTransferBody=parseWalletV3TransferBody;var WalletContractV4R2={WalletV4ContractR2:WalletV4ContractR2$1};const{SimpleWalletContractR1,SimpleWalletContractR2,SimpleWalletContractR3}=WalletContractSimple,{WalletV2ContractR1,WalletV2ContractR2}=WalletContractV2,{WalletV3ContractR1,WalletV3ContractR2}=WalletContractV3,{WalletV4ContractR1}=WalletContractV4,{WalletV4ContractR2}=WalletContractV4R2,ALL={simpleR1:SimpleWalletContractR1,simpleR2:SimpleWalletContractR2,simpleR3:SimpleWalletContractR3,v2R1:WalletV2ContractR1,v2R2:WalletV2ContractR2,v3R1:WalletV3ContractR1,v3R2:WalletV3ContractR2,v4R1:WalletV4ContractR1,v4R2:WalletV4ContractR2},LIST=[SimpleWalletContractR1,SimpleWalletContractR2,SimpleWalletContractR3,WalletV2ContractR1,WalletV2ContractR2,WalletV3ContractR1,WalletV3ContractR2,WalletV4ContractR1,WalletV4ContractR2];let Wallets$1=class{constructor(e){this.provider=e,this.all=ALL,this.list=LIST,this.defaultVersion="v3R1",this.default=this.all[this.defaultVersion]}create(e){return new this.default(this.provider,e)}};Wallets$1.all=ALL;Wallets$1.list=LIST;wallet.default=Wallets$1;var lockup={};const{Cell:Cell$d}=boc$1,{Address:Address$7,BN:BN$8,toNano,bytesToHex:bytesToHex$2,hexToBytes:hexToBytes$2,nacl:nacl$2,stringToBytes,bytesToBase64:bytesToBase64$4,base64ToBytes}=utils$1,{WalletContract}=WalletContract_1,WALLET_ID_BASE=698983191;class LockupWalletV1 extends WalletContract{constructor(e,n){n.code=Cell$d.oneFromBoc("B5EE9C7241021E01000261000114FF00F4A413F4BCF2C80B010201200203020148040501F2F28308D71820D31FD31FD31F802403F823BB13F2F2F003802251A9BA1AF2F4802351B7BA1BF2F4801F0BF9015410C5F9101AF2F4F8005057F823F0065098F823F0062071289320D74A8E8BD30731D4511BDB3C12B001E8309229A0DF72FB02069320D74A96D307D402FB00E8D103A4476814154330F004ED541D0202CD0607020120131402012008090201200F100201200A0B002D5ED44D0D31FD31FD3FFD3FFF404FA00F404FA00F404D1803F7007434C0C05C6C2497C0F83E900C0871C02497C0F80074C7C87040A497C1383C00D46D3C00608420BABE7114AC2F6C2497C338200A208420BABE7106EE86BCBD20084AE0840EE6B2802FBCBD01E0C235C62008087E4055040DBE4404BCBD34C7E00A60840DCEAA7D04EE84BCBD34C034C7CC0078C3C412040DD78CA00C0D0E00130875D27D2A1BE95B0C60000C1039480AF00500161037410AF0050810575056001010244300F004ED540201201112004548E1E228020F4966FA520933023BB9131E2209835FA00D113A14013926C21E2B3E6308003502323287C5F287C572FFC4F2FFFD00007E80BD00007E80BD00326000431448A814C4E0083D039BE865BE803444E800A44C38B21400FE809004E0083D10C06002012015160015BDE9F780188242F847800C02012017180201481B1C002DB5187E006D88868A82609E00C6207E00C63F04EDE20B30020158191A0017ADCE76A268699F98EB85FFC00017AC78F6A268698F98EB858FC00011B325FB513435C2C7E00017B1D1BE08E0804230FB50F620002801D0D3030178B0925B7FE0FA4031FA403001F001A80EDAA4"),super(e,n),this.options.walletId||(this.options.walletId=WALLET_ID_BASE+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLiquidBalance=this.getLiquidBalance.bind(this),this.methods.getNominalRestrictedBalance=this.getNominalRestrictedBalance.bind(this),this.methods.getNominalLockedBalance=this.getNominalLockedBalance.bind(this)}getName(){return"lockup-0.1"}createSigningMessage(e,n){e=e||0;const s=new Cell$d;if(s.bits.writeUint(this.options.walletId,32),e===0)for(let a=0;a<32;a++)s.bits.writeBit(1);else{const a=new Date,o=Math.floor(a.getTime()/1e3);s.bits.writeUint(o+60,32)}return s.bits.writeUint(e,32),s}createDataCell(){const e=new Cell$d;return e.bits.writeUint(0,32),e.bits.writeUint(this.options.walletId,32),e.bits.writeBytes(this.options.publicKey),e.bits.writeBytes(base64ToBytes(this.options.config.config_public_key)),this.options.config.allowed_destinations?(e.bits.writeUint(1,1),e.refs.push(Cell$d.oneFromBoc(base64ToBytes(this.options.config.allowed_destinations)))):e.bits.writeUint(0,1),e.bits.writeGrams(0),e.bits.writeUint(0,1),e.bits.writeGrams(0),e.bits.writeUint(0,1),e}async getWalletId(){const e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const e=await this.getAddress();return this.provider.call2(e.toString(),"get_public_key")}async getLiquidBalance(){const e=await this.getBalances();return e[0]-e[1]-e[2]}async getNominalRestrictedBalance(){return await this.getBalances()[1]}async getNominalLockedBalance(){return await this.getBalances()[2]}async getBalances(){const e=await this.getAddress();return this.provider.call2(e.toString(),"get_balances")}}lockup.default={LockupWalletV1,all:{"lockup-0.1":LockupWalletV1},list:[LockupWalletV1]};var nft={};const{Address:Address$6}=utils$1,{Cell:Cell$c}=boc$1,SNAKE_DATA_PREFIX=0,CHUNK_DATA_PREFIX=1,ONCHAIN_CONTENT_PREFIX=0,OFFCHAIN_CONTENT_PREFIX=1,serializeUri$1=r=>new TextEncoder().encode(encodeURI(r)),parseUri=r=>new TextDecoder().decode(r),createOffchainUriCell$2=r=>{const e=new Cell$c;return e.bits.writeUint(OFFCHAIN_CONTENT_PREFIX,8),e.bits.writeBytes(serializeUri$1(r)),e},parseOffchainUriCell$4=r=>{if(r.bits.array[0]!==OFFCHAIN_CONTENT_PREFIX)throw new Error("no OFFCHAIN_CONTENT_PREFIX");let e=0,n=r;for(;n;)e+=n.bits.array.length,n=n.refs[0];const s=new Uint8Array(e);for(e=0,n=r;n;)s.set(n.bits.array,e),e+=n.bits.array.length,n=n.refs[0];return parseUri(s.slice(1))},readIntFromBitString=(r,e,n)=>{let s=BigInt(0);for(let a=0;a<n;a++)s*=BigInt(2),s+=BigInt(r.get(e+a));return s},parseAddress$9=r=>{let e=readIntFromBitString(r.bits,3,8);e>BigInt(127)&&(e=e-BigInt(256));const n=readIntFromBitString(r.bits,3+8,256);if(e.toString(10)+":"+n.toString(16)=="0:0")return null;const s=e.toString(10)+":"+n.toString(16).padStart(64,"0");return new Address$6(s)},getRoyaltyParams$2=async(r,e)=>{const n=await r.call2(e,"royalty_params"),s=n[0].toNumber(),a=n[1].toNumber(),o=s/a,g=parseAddress$9(n[2]);return{royalty:o,royaltyBase:a,royaltyFactor:s,royaltyAddress:g}};var NftUtils={SNAKE_DATA_PREFIX,CHUNK_DATA_PREFIX,ONCHAIN_CONTENT_PREFIX,OFFCHAIN_CONTENT_PREFIX,parseAddress:parseAddress$9,serializeUri:serializeUri$1,parseUri,createOffchainUriCell:createOffchainUriCell$2,parseOffchainUriCell:parseOffchainUriCell$4,getRoyaltyParams:getRoyaltyParams$2};const{Contract:Contract$a}=contract,{Cell:Cell$b}=boc$1,{Address:Address$5,bytesToBase64:bytesToBase64$3,BN:BN$7}=utils$1,{parseAddress:parseAddress$8}=NftUtils,{createOffchainUriCell:createOffchainUriCell$1,serializeUri,parseOffchainUriCell:parseOffchainUriCell$3,getRoyaltyParams:getRoyaltyParams$1}=NftUtils;let NftCollection$1=class extends Contract$a{constructor(e,n){if(n.wc=0,n.code=n.code||Cell$b.oneFromBoc("B5EE9C724102140100021F000114FF00F4A413F4BCF2C80B0102016202030202CD04050201200E0F04E7D10638048ADF000E8698180B8D848ADF07D201800E98FE99FF6A2687D20699FEA6A6A184108349E9CA829405D47141BAF8280E8410854658056B84008646582A802E78B127D010A65B509E58FE59F80E78B64C0207D80701B28B9E382F970C892E000F18112E001718112E001F181181981E0024060708090201200A0B00603502D33F5313BBF2E1925313BA01FA00D43028103459F0068E1201A44343C85005CF1613CB3FCCCCCCC9ED54925F05E200A6357003D4308E378040F4966FA5208E2906A4208100FABE93F2C18FDE81019321A05325BBF2F402FA00D43022544B30F00623BA9302A402DE04926C21E2B3E6303250444313C85005CF1613CB3FCCCCCCC9ED54002C323401FA40304144C85005CF1613CB3FCCCCCCC9ED54003C8E15D4D43010344130C85005CF1613CB3FCCCCCCC9ED54E05F04840FF2F00201200C0D003D45AF0047021F005778018C8CB0558CF165004FA0213CB6B12CCCCC971FB008002D007232CFFE0A33C5B25C083232C044FD003D0032C03260001B3E401D3232C084B281F2FFF2742002012010110025BC82DF6A2687D20699FEA6A6A182DE86A182C40043B8B5D31ED44D0FA40D33FD4D4D43010245F04D0D431D430D071C8CB0701CF16CCC980201201213002FB5DAFDA89A1F481A67FA9A9A860D883A1A61FA61FF480610002DB4F47DA89A1F481A67FA9A9A86028BE09E008E003E00B01A500C6E"),n.royalty>1)throw new Error("royalty > 1");n.royaltyBase=1e3,n.royaltyFactor=Math.floor(n.royalty*n.royaltyBase),super(e,n),this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.getRoyaltyParams=this.getRoyaltyParams.bind(this)}createContentCell(e){const n=createOffchainUriCell$1(e.collectionContentUri),s=new Cell$b;s.bits.writeBytes(serializeUri(e.nftItemContentBaseUri));const a=new Cell$b;return a.refs[0]=n,a.refs[1]=s,a}createRoyaltyCell(e){const n=new Cell$b;return n.bits.writeUint(e.royaltyFactor,16),n.bits.writeUint(e.royaltyBase,16),n.bits.writeAddress(e.royaltyAddress),n}createDataCell(){const e=new Cell$b;return e.bits.writeAddress(this.options.ownerAddress),e.bits.writeUint(0,64),e.refs[0]=this.createContentCell(this.options),e.refs[1]=Cell$b.oneFromBoc(this.options.nftItemCodeHex),e.refs[2]=this.createRoyaltyCell(this.options),e}createMintBody(e){const n=new Cell$b;n.bits.writeUint(1,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeUint(e.itemIndex,64),n.bits.writeCoins(e.amount);const s=new Cell$b;s.bits.writeAddress(e.itemOwnerAddress);const a=new Cell$b;return a.bits.writeBytes(serializeUri(e.itemContentUri)),s.refs[0]=a,n.refs[0]=s,n}createGetRoyaltyParamsBody(e){const n=new Cell$b;return n.bits.writeUint(1765620048,32),n.bits.writeUint(e.queryId||0,64),n}createChangeOwnerBody(e){if(e.newOwnerAddress===void 0)throw new Error("Specify newOwnerAddress");const n=new Cell$b;return n.bits.writeUint(3,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeAddress(e.newOwnerAddress),n}createEditContentBody(e){if(e.royalty>1)throw new Error("royalty > 1");e.royaltyBase=1e3,e.royaltyFactor=Math.floor(e.royalty*e.royaltyBase);const n=new Cell$b;return n.bits.writeUint(4,32),n.bits.writeUint(e.queryId||0,64),n.refs[0]=this.createContentCell(e),n.refs[1]=this.createRoyaltyCell(e),n}async getCollectionData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_collection_data"),s=n[0];let a=NaN;try{a=s.toNumber()}catch{}const o=n[1];let g=null;try{g=parseOffchainUriCell$3(o)}catch{}const b=parseAddress$8(n[2]);return{nextItemIndex:a,itemsCount:s,ownerAddress:b,collectionContentCell:o,collectionContentUri:g}}async getNftItemContent(e){const n=await this.getAddress(),s=await e.getData();if(s.isInitialized){const a=await this.provider.call2(n.toString(),"get_nft_content",[["num",s.itemIndex.toString(10)],["tvm.Cell",bytesToBase64$3(await s.contentCell.toBoc(!1))]]);s.contentUri=null;try{s.contentUri=parseOffchainUriCell$3(a)}catch{}}return s}async getNftItemAddressByIndex(e){e=new BN$7(e);const n=await this.getAddress(),s=await this.provider.call2(n.toString(),"get_nft_address_by_index",[["num",e.toString(10)]]);return parseAddress$8(s)}async getRoyaltyParams(){const e=await this.getAddress();return getRoyaltyParams$1(this.provider,e.toString())}};var NftCollection_1={NftCollection:NftCollection$1};const{Contract:Contract$9}=contract,{Cell:Cell$a}=boc$1,{Address:Address$4,BN:BN$6}=utils$1,{parseAddress:parseAddress$7,getRoyaltyParams}=NftUtils,{parseOffchainUriCell:parseOffchainUriCell$2}=NftUtils,NFT_ITEM_CODE_HEX="B5EE9C7241020D010001D0000114FF00F4A413F4BCF2C80B0102016202030202CE04050009A11F9FE00502012006070201200B0C02D70C8871C02497C0F83434C0C05C6C2497C0F83E903E900C7E800C5C75C87E800C7E800C3C00812CE3850C1B088D148CB1C17CB865407E90350C0408FC00F801B4C7F4CFE08417F30F45148C2EA3A1CC840DD78C9004F80C0D0D0D4D60840BF2C9A884AEB8C097C12103FCBC20080900113E910C1C2EBCB8536001F65135C705F2E191FA4021F001FA40D20031FA00820AFAF0801BA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C85009CF16500BCF16712449145446A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00104794102A375BE20A00727082108B77173505C8CBFF5004CF1610248040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB000082028E3526F0018210D53276DB103744006D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB0093303234E25502F003003B3B513434CFFE900835D27080269FC07E90350C04090408F80C1C165B5B60001D00F232CFD633C58073C5B3327B5520BF75041B";let NftItem$1=class extends Contract$9{constructor(e,n){n.wc=0,n.code=n.code||Cell$a.oneFromBoc(NFT_ITEM_CODE_HEX),super(e,n),this.methods.getData=this.getData.bind(this)}createDataCell(){const e=new Cell$a;return e.bits.writeUint(this.options.index,64),e.bits.writeAddress(this.options.collectionAddress),e}async getData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_nft_data"),s=n[0].toNumber()===-1,a=n[1];let o=NaN;try{o=a.toNumber()}catch{}const g=parseAddress$7(n[2]),b=s?parseAddress$7(n[3]):null,B=n[4];let N=null;try{N=s&&g===null?parseOffchainUriCell$2(B):null}catch{}return{isInitialized:s,index:o,itemIndex:a,collectionAddress:g,ownerAddress:b,contentCell:B,contentUri:N}}async createTransferBody(e){const n=new Cell$a;return n.bits.writeUint(1607220500,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeAddress(e.newOwnerAddress),n.bits.writeAddress(e.responseAddress),n.bits.writeBit(!1),n.bits.writeCoins(e.forwardAmount||new BN$6(0)),n.bits.writeBit(!1),e.forwardPayload&&n.bits.writeBytes(e.forwardPayload),n}createGetStaticDataBody(e){const n=new Cell$a;return n.bits.writeUint(801842850,32),n.bits.writeUint(e.queryId||0,64),n}async getRoyaltyParams(){const e=await this.getAddress();return getRoyaltyParams(this.provider,e.toString())}};NftItem$1.codeHex=NFT_ITEM_CODE_HEX;var NftItem_1={NftItem:NftItem$1};const{Contract:Contract$8}=contract,{Cell:Cell$9}=boc$1;let NftMarketplace$1=class extends Contract$8{constructor(e,n){n.wc=0,n.code=n.code||Cell$9.oneFromBoc("B5EE9C7241010401006D000114FF00F4A413F4BCF2C80B01020120020300AAD23221C700915BE0D0D3030171B0915BE0FA40ED44D0FA403012C705F2E19101D31F01C0018E2BFA003001D4D43021F90070C8CA07CBFFC9D077748018C8CB05CB0258CF165004FA0213CB6BCCCCC971FB00915BE20004F2308EF7CCE7"),super(e,n)}createDataCell(){const e=new Cell$9;return e.bits.writeAddress(this.options.ownerAddress),e}};var NftMarketplace_1={NftMarketplace:NftMarketplace$1};const{Contract:Contract$7}=contract,{Cell:Cell$8}=boc$1,{parseAddress:parseAddress$6}=NftUtils,NFT_SALE_HEX_CODE="B5EE9C7241020A010001B4000114FF00F4A413F4BCF2C80B01020120020302014804050004F2300202CD0607002FA03859DA89A1F481F481F481F401A861A1F401F481F4006101F7D00E8698180B8D8492F82707D201876A2687D207D207D207D006A18116BA4E10159C71D991B1B2990E382C92F837028916382F970FA01698FC1080289C6C8895D7970FAE99F98FD2018201A642802E78B2801E78B00E78B00FD016664F6AA701363804C9B081B2299823878027003698FE99F9810E000C92F857010C0801F5D41081DCD650029285029185F7970E101E87D007D207D0018384008646582A804E78B28B9D090D0A85AD08A500AFD010AE5B564B8FD80384008646582AC678B2803FD010B65B564B8FD80384008646582A802E78B00FD0109E5B564B8FD80381041082FE61E8A10C00C646582A802E78B117D010A65B509E58F8A40900C8C0029A3110471036454012F004E032363704C0038E4782103B9ACA0015BEF2E1C95312C70559C705B1F2E1CA702082105FCC3D14218010C8CB055006CF1622FA0215CB6A14CB1F14CB3F21CF1601CF16CA0021FA02CA00C98100A0FB00E05F06840FF2F0002ACB3F22CF1658CF16CA0021FA02CA00C98100A0FB00AECABAD1";let NftSale$1=class extends Contract$7{constructor(e,n){n.wc=0,n.code=n.code||Cell$8.oneFromBoc(NFT_SALE_HEX_CODE),super(e,n),this.methods.getData=this.getData.bind(this)}createDataCell(){const e=new Cell$8;e.bits.writeAddress(this.options.marketplaceAddress),e.bits.writeAddress(this.options.nftAddress),e.bits.writeAddress(null),e.bits.writeCoins(this.options.fullPrice);const n=new Cell$8;return n.bits.writeCoins(this.options.marketplaceFee),n.bits.writeAddress(this.options.royaltyAddress),n.bits.writeCoins(this.options.royaltyAmount),e.refs[0]=n,e}async getData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_sale_data"),s=parseAddress$6(n[0]),a=parseAddress$6(n[1]),o=parseAddress$6(n[2]),g=n[3],b=n[4],B=parseAddress$6(n[5]),N=n[6];return{marketplaceAddress:s,nftAddress:a,nftOwnerAddress:o,fullPrice:g,marketplaceFee:b,royaltyAddress:B,royaltyAmount:N}}async createCancelBody(e){const n=new Cell$8;return n.bits.writeUint(3,32),n.bits.writeUint(e.queryId||0,64),n}};NftSale$1.codeHex=NFT_SALE_HEX_CODE;var NftSale_1={NftSale:NftSale$1};const{NftCollection}=NftCollection_1,{NftItem}=NftItem_1,{NftMarketplace}=NftMarketplace_1,{NftSale}=NftSale_1;nft.default={NftCollection,NftItem,NftMarketplace,NftSale};var ft={};const{Contract:Contract$6}=contract,{Cell:Cell$7}=boc$1,{createOffchainUriCell,parseOffchainUriCell:parseOffchainUriCell$1,parseAddress:parseAddress$5}=NftUtils,{Address:Address$3,BN:BN$5,bytesToBase64:bytesToBase64$2}=utils$1;let JettonMinter$1=class extends Contract$6{constructor(e,n){n.wc=0,n.code=n.code||Cell$7.oneFromBoc("B5EE9C7241020B010001ED000114FF00F4A413F4BCF2C80B0102016202030202CC040502037A60090A03EFD9910E38048ADF068698180B8D848ADF07D201800E98FE99FF6A2687D007D206A6A18400AA9385D47181A9AA8AAE382F9702480FD207D006A18106840306B90FD001812881A28217804502A906428027D012C678B666664F6AA7041083DEECBEF29385D71811A92E001F1811802600271812F82C207F97840607080093DFC142201B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064907C80383A6465816503E5FFE4E83BC00C646582AC678B28027D0109E5B589666664B8FD80400FE3603FA00FA40F82854120870542013541403C85004FA0258CF1601CF16CCC922C8CB0112F400F400CB00C9F9007074C8CB02CA07CBFFC9D05008C705F2E04A12A1035024C85004FA0258CF16CCCCC9ED5401FA403020D70B01C3008E1F8210D53276DB708010C8CB055003CF1622FA0212CB6ACB1FCB3FC98042FB00915BE200303515C705F2E049FA403059C85004FA0258CF16CCCCC9ED54002E5143C705F2E049D43001C85004FA0258CF16CCCCC9ED54007DADBCF6A2687D007D206A6A183618FC1400B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064FC80383A6465816503E5FFE4E840001FAF16F6A2687D007D206A6A183FAA904051007F09"),super(e,n)}createDataCell(){const e=new Cell$7;return e.bits.writeCoins(0),e.bits.writeAddress(this.options.adminAddress),e.refs[0]=createOffchainUriCell(this.options.jettonContentUri),e.refs[1]=Cell$7.oneFromBoc(this.options.jettonWalletCodeHex),e}createMintBody(e){const n=new Cell$7;n.bits.writeUint(21,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeAddress(e.destination),n.bits.writeCoins(e.amount);const s=new Cell$7;return s.bits.writeUint(395134233,32),s.bits.writeUint(e.queryId||0,64),s.bits.writeCoins(e.jettonAmount),s.bits.writeAddress(null),s.bits.writeAddress(null),s.bits.writeCoins(new BN$5(0)),s.bits.writeBit(!1),n.refs[0]=s,n}createChangeAdminBody(e){if(e.newAdminAddress===void 0)throw new Error("Specify newAdminAddress");const n=new Cell$7;return n.bits.writeUint(3,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeAddress(e.newAdminAddress),n}createEditContentBody(e){const n=new Cell$7;return n.bits.writeUint(4,32),n.bits.writeUint(e.queryId||0,64),n.refs[0]=createOffchainUriCell(e.jettonContentUri),n}async getJettonData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_jetton_data"),s=n[0],a=n[1].toNumber()===-1,o=parseAddress$5(n[2]),g=n[3];let b=null;try{b=parseOffchainUriCell$1(g)}catch{}const B=n[4];return{totalSupply:s,isMutable:a,adminAddress:o,jettonContentCell:g,jettonContentUri:b,jettonWalletCode:B}}async getJettonWalletAddress(e){const n=await this.getAddress(),s=new Cell$7;s.bits.writeAddress(e);const a=await this.provider.call2(n.toString(),"get_wallet_address",[["tvm.Slice",bytesToBase64$2(await s.toBoc(!1))]]);return parseAddress$5(a)}};var JettonMinter_1={JettonMinter:JettonMinter$1};const{Contract:Contract$5}=contract,{Cell:Cell$6}=boc$1,{parseAddress:parseAddress$4}=NftUtils,{BN:BN$4}=utils$1,JETTON_WALLET_CODE_HEX="B5EE9C7241021201000328000114FF00F4A413F4BCF2C80B0102016202030202CC0405001BA0F605DA89A1F401F481F481A8610201D40607020148080900BB0831C02497C138007434C0C05C6C2544D7C0FC02F83E903E900C7E800C5C75C87E800C7E800C00B4C7E08403E29FA954882EA54C4D167C0238208405E3514654882EA58C511100FC02780D60841657C1EF2EA4D67C02B817C12103FCBC2000113E910C1C2EBCB853600201200A0B020120101101F500F4CFFE803E90087C007B51343E803E903E90350C144DA8548AB1C17CB8B04A30BFFCB8B0950D109C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C032483E401C1D3232C0B281F2FFF274013E903D010C7E801DE0063232C1540233C59C3E8085F2DAC4F3208405E351467232C7C6600C03F73B51343E803E903E90350C0234CFFE80145468017E903E9014D6F1C1551CDB5C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C0327E401C1D3232C0B281F2FFF274140371C1472C7CB8B0C2BE80146A2860822625A020822625A004AD822860822625A028062849F8C3C975C2C070C008E00D0E0F009ACB3F5007FA0222CF165006CF1625FA025003CF16C95005CC2391729171E25008A813A08208989680AA008208989680A0A014BCF2E2C504C98040FB001023C85004FA0258CF1601CF16CCC9ED5400705279A018A182107362D09CC8CB1F5230CB3F58FA025007CF165007CF16C9718018C8CB0524CF165006FA0215CB6A14CCC971FB0010241023000E10491038375F040076C200B08E218210D53276DB708010C8CB055008CF165004FA0216CB6A12CB1F12CB3FC972FB0093356C21E203C85004FA0258CF1601CF16CCC9ED5400DB3B51343E803E903E90350C01F4CFFE803E900C145468549271C17CB8B049F0BFFCB8B0A0822625A02A8005A805AF3CB8B0E0841EF765F7B232C7C572CFD400FE8088B3C58073C5B25C60063232C14933C59C3E80B2DAB33260103EC01004F214013E809633C58073C5B3327B55200083200835C87B51343E803E903E90350C0134C7E08405E3514654882EA0841EF765F784EE84AC7CB8B174CFCC7E800C04E81408F214013E809633C58073C5B3327B55205ECCF23D";let JettonWallet$1=class extends Contract$5{constructor(e,n){n.wc=0,n.code=n.code||Cell$6.oneFromBoc(JETTON_WALLET_CODE_HEX),super(e,n)}async createTransferBody(e){const n=new Cell$6;return n.bits.writeUint(260734629,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeCoins(e.jettonAmount),n.bits.writeAddress(e.toAddress),n.bits.writeAddress(e.responseAddress),n.bits.writeBit(!1),n.bits.writeCoins(e.forwardAmount||new BN$4(0)),n.bits.writeBit(!1),e.forwardPayload&&n.bits.writeBytes(e.forwardPayload),n}async createBurnBody(e){const n=new Cell$6;return n.bits.writeUint(1499400124,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeCoins(e.jettonAmount),n.bits.writeAddress(e.responseAddress),n}async getData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_wallet_data"),s=n[0],a=parseAddress$4(n[1]),o=parseAddress$4(n[2]),g=n[3];return{balance:s,ownerAddress:a,jettonMinterAddress:o,jettonWalletCode:g}}};JettonWallet$1.codeHex=JETTON_WALLET_CODE_HEX;var JettonWallet_1={JettonWallet:JettonWallet$1};const{JettonMinter}=JettonMinter_1,{JettonWallet}=JettonWallet_1;ft.default={JettonMinter,JettonWallet};const MC_INTERVAL=10*1e3,SHARDS_INTERVAL=1*1e3,parseShardBlockNumber=r=>({workchain:r.workchain,shardId:r.shard,shardBlockNumber:r.seqno});let BlockSubscription$2=class{constructor(e,n,s,a){this.provider=e,this.storage=n,this.onBlock=s,this.startMcBlockNumber=a?a.startMcBlockNumber:void 0,this.mcInterval=(a?a.mcInterval:void 0)||MC_INTERVAL,this.shardsInterval=(a?a.shardsInterval:void 0)||SHARDS_INTERVAL}async start(){if(this.stop(),!this.startMcBlockNumber&&(this.startMcBlockNumber=(await this.provider.getMasterchainInfo()).last.seqno,!this.startMcBlockNumber))throw new Error("Cannot get start mc block number from provider");const e=await this.provider.getMasterchainBlockHeader(this.startMcBlockNumber);if(this.startLT=e.end_lt,!this.startLT)throw new Error("Cannot get startLT from provider");let n=!1;const s=async()=>{if(!n){n=!0;try{const g=await this.storage.getLastMasterchainBlockNumber()||this.startMcBlockNumber;if(!g)throw new Error("no init masterchain block in storage");const b=(await this.provider.getMasterchainInfo()).last.seqno;if(!b)throw new Error("invalid last masterchain block from provider");for(let B=g+1;B<b;B++){const N=await this.provider.getBlockShards(B),I=await this.provider.getMasterchainBlockHeader(B);await this.onBlock(I,N),await this.storage.insertBlocks(B,N.shards.map(parseShardBlockNumber))}}catch(g){console.error(g)}n=!1}};this.mcIntervalId=setInterval(()=>s(),this.mcInterval),s();let a=!1;const o=async()=>{if(!a){a=!0;try{const g=await this.storage.getUnprocessedShardBlock();if(g){const{workchain:b,shardId:B,shardBlockNumber:N}=g,I=await this.provider.getBlockHeader(b,B,N);if(I.end_lt<this.startLT)await this.storage.setBlockProcessed(b,B,N,[]);else{await this.onBlock(I);const U=I.prev_blocks.map(parseShardBlockNumber);await this.storage.setBlockProcessed(b,B,N,U)}}}catch(g){console.log(g)}a=!1}};this.shardsIntervalId=setInterval(()=>o(),this.shardsInterval)}stop(){clearInterval(this.mcIntervalId),clearInterval(this.shardsIntervalId)}};var BlockSubscription_1={BlockSubscription:BlockSubscription$2};let InMemoryBlockStorage$2=class{constructor(e){this.masterchainBlocks={},this.shardchainBlocks={},this.logFunction=e}async insertShardBlocks(e){for(const{workchain:n,shardId:s,shardBlockNumber:a}of e)this.shardchainBlocks[n+"_"+s+"_"+a]===void 0&&(this.logFunction&&this.logFunction("insert shard "+n+" "+s+" "+a),this.shardchainBlocks[n+"_"+s+"_"+a]=!1)}async insertBlocks(e,n){if(this.logFunction&&this.logFunction("mc processed "+e),this.masterchainBlocks[e]!==void 0)throw new Error("mc already exists "+e);this.masterchainBlocks[e]=!0,await this.insertShardBlocks(n)}async getLastMasterchainBlockNumber(){return Object.keys(this.masterchainBlocks).map(n=>Number(n)).sort((n,s)=>s-n)[0]}async setBlockProcessed(e,n,s,a){if(this.logFunction&&this.logFunction("shard processed "+e+" "+n+" "+s),this.shardchainBlocks[e+"_"+n+"_"+s]===void 0)throw new Error("shard not exists "+e+"_"+n+"_"+s);this.shardchainBlocks[e+"_"+n+"_"+s]=!0,await this.insertShardBlocks(a)}async getUnprocessedShardBlock(){for(let e in this.shardchainBlocks)if(this.shardchainBlocks[e]===!1){const n=e.split("_");return{workchain:Number(n[0]),shardId:n[1],shardBlockNumber:Number(n[2])}}}};var InMemoryBlockStorage_1={InMemoryBlockStorage:InMemoryBlockStorage$2};const{BlockSubscription:BlockSubscription$1}=BlockSubscription_1,{InMemoryBlockStorage:InMemoryBlockStorage$1}=InMemoryBlockStorage_1;var blockSubscription={BlockSubscription:BlockSubscription$1,InMemoryBlockStorage:InMemoryBlockStorage$1};const{Contract:Contract$4}=contract,{Cell:Cell$5}=boc$1,{hexToBytes:hexToBytes$1,BN:BN$3,nacl:nacl$1,bytesToBase64:bytesToBase64$1}=utils$1;let SubscriptionContract$1=class extends Contract$4{constructor(e,n){n.code=Cell$5.oneFromBoc("B5EE9C7241020F01000262000114FF00F4A413F4BCF2C80B0102012002030201480405036AF230DB3C5335A127A904F82327A128A90401BC5135A0F823B913B0F29EF800725210BE945387F0078E855386DB3CA4E2F82302DB3C0B0C0D0202CD06070121A0D0C9B67813F488DE0411F488DE0410130B048FD6D9E05E8698198FD201829846382C74E2F841999E98F9841083239BA395D497803F018B841083AB735BBED9E702984E382D9C74688462F863841083AB735BBED9E70156BA4E09040B0A0A080269F10FD22184093886D9E7C12C1083239BA39384008646582A803678B2801FD010A65B5658F89659FE4B9FD803FC1083239BA396D9E40E0A04F08E8D108C5F0C708210756E6B77DB3CE00AD31F308210706C7567831EB15210BA8F48305324A126A904F82326A127A904BEF27109FA4430A619F833D078D721D70B3F5260A11BBE8E923036F82370708210737562732759DB3C5077DE106910581047103645135042DB3CE0395F076C2232821064737472BA0A0A0D09011A8E897F821064737472DB3CE0300A006821B39982100400000072FB02DE70F8276F118010C8CB055005CF1621FA0214F40013CB6912CB1F830602948100A032DEC901FB000030ED44D0FA40FA40FA00D31FD31FD31FD31FD31FD307D31F30018021FA443020813A98DB3C01A619F833D078D721D70B3FA070F8258210706C7567228018C8CB055007CF165004FA0215CB6A12CB1F13CB3F01FA02CB00C973FB000E0040C8500ACF165008CF165006FA0214CB1F12CB1FCB1FCB1FCB1FCB07CB1FC9ED54005801A615F833D020D70B078100D1BA95810088D721DED307218100DDBA028100DEBA12B1F2E047D33F30A8AB0FE5855AB4"),super(e,n),this.methods.pay=()=>Contract$4.createMethod(e,this.createPayExternalMessage()),this.methods.getSubscriptionData=this.getSubscriptionData.bind(this)}createDataCell(){const e=new Cell$5;return e.bits.writeAddress(this.options.wallet),e.bits.writeAddress(this.options.beneficiary),e.bits.writeGrams(this.options.amount),e.bits.writeUint(this.options.period,32),e.bits.writeUint(this.options.startAt,32),e.bits.writeUint(this.options.timeout,32),e.bits.writeUint(0,32),e.bits.writeUint(0,32),e.bits.writeUint(0,8),e.bits.writeUint(this.options.subscriptionId,32),e}createBody(){const e=new Cell$5;return e.bits.writeUint(new BN$3(1886156135).add(new BN$3(2147483648)),32),e}createSelfDestructBody(){const e=new Cell$5;return e.bits.writeUint(1685288050,32),e}async getSubscriptionData(){const e=$t=>$t[0].toNumber()+":"+$t[1].toString(16),n=await this.getAddress(),s=await this.provider.call2(n.toString(),"get_subscription_data"),a=e(s[0]),o=e(s[1]),g=s[2],b=s[3].toNumber(),B=s[4].toNumber(),N=s[5].toNumber(),I=s[6].toNumber(),U=s[7].toNumber(),H=s[8].toNumber(),Q=s[9].toNumber();return{wallet:a,beneficiary:o,amount:g,period:b,startAt:B,timeout:N,lastPayment:I,lastRequest:U,failedAttempts:H,subscriptionId:Q}}async createPayExternalMessage(){const e=await this.getAddress(),n=Contract$4.createExternalMessageHeader(e),s=Contract$4.createCommonMsgInfo(n,null,null),a=new Cell$5;return a.bits.writeUint(Math.floor(Date.now()/1e3),64),{address:e,message:s,body:a}}};var subscription={SubscriptionContract:SubscriptionContract$1};const{Cell:Cell$4}=boc$1,writePublicKey$1=(r,e)=>{if(e.length!==256/8)throw new Error("invalid publicKey length");r.bits.writeBytes(e)},writeSignature$1=(r,e)=>{if(e.length!==512/8)throw new Error("invalid signature length");r.bits.writeBytes(e)},createSignatureCell$1=r=>{const e=new Cell$4;return writeSignature$1(e,r),e},writeMayBe=(r,e)=>{if(e){if(r.bits.writeBit(1),r.refs.length>=4)throw new Error("refs overflow");r.refs.push(e)}else r.bits.writeBit(0)},writeDict=writeMayBe,tag_init$1=1768843636,tag_cooperative_close$1=1131179891,tag_cooperative_commit$1=1128492404,tag_start_uncooperative_close$1=1433289580,tag_challenge_state$1=1130915665,tag_settle_conditionals$1=1131168622,tag_state$1=1130910580,op_top_up_balance$1=1741148801,op_init_channel$1=235282626,op_cooperative_close$1=1433884798,op_cooperative_commit$1=2040604399,op_start_uncooperative_close$1=521476815,op_challenge_quarantined_state$1=143567410,op_settle_conditionals$1=1727459433,op_finish_uncooperative_close$1=625158801,op_channel_closed$1=-572749638,createTopUpBalance$1=r=>{const e=new Cell$4;return e.bits.writeUint(op_top_up_balance$1,32),e.bits.writeCoins(r.coinsA),e.bits.writeCoins(r.coinsB),e},createInitChannelBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_init$1,32),e.bits.writeUint(r.channelId,128),e.bits.writeCoins(r.balanceA),e.bits.writeCoins(r.balanceB),e},createCooperativeCloseChannelBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_cooperative_close$1,32),e.bits.writeUint(r.channelId,128),e.bits.writeCoins(r.balanceA),e.bits.writeCoins(r.balanceB),e.bits.writeUint(r.seqnoA,64),e.bits.writeUint(r.seqnoB,64),e},createCooperativeCommitBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_cooperative_commit$1,32),e.bits.writeUint(r.channelId,128),e.bits.writeUint(r.seqnoA,64),e.bits.writeUint(r.seqnoB,64),e},createConditionalPayment$1=r=>{const e=new Cell$4;return e.bits.writeCoins(r.amount),e.writeCell(r.condition),e},createSemiChannelBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(r.seqno,64),e.bits.writeCoins(r.sentCoins),writeDict(e,r.conditionals),e},createSemiChannelState$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_state$1,32),e.bits.writeUint(r.channelId,128),e.writeCell(r.semiChannelBody),writeMayBe(e,r.counterpartySemiChannelBody),e},createSignedSemiChannelState$1=r=>{const e=new Cell$4;return writeSignature$1(e,r.signature),e.writeCell(r.state),e},createStartUncooperativeCloseBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_start_uncooperative_close$1,32),e.bits.writeUint(r.channelId,128),e.refs[0]=r.signedSemiChannelStateA,e.refs[1]=r.signedSemiChannelStateB,e},createChallengeQuarantinedStateBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_challenge_state$1,32),e.bits.writeUint(r.channelId,128),e.refs[0]=r.signedSemiChannelStateA,e.refs[1]=r.signedSemiChannelStateB,e},createSettleConditionalsBody$1=r=>{const e=new Cell$4;return e.bits.writeUint(tag_settle_conditionals$1,32),e.bits.writeUint(r.channelId,128),writeDict(e,r.conditionalsToSettle),e},createFinishUncooperativeClose$1=()=>{const r=new Cell$4;return r.bits.writeUint(op_finish_uncooperative_close$1,32),r},createOneSignature$1=r=>{const e=new Cell$4;return e.bits.writeUint(r.op,32),e.bits.writeBit(r.isA),writeSignature$1(e,r.signature),e.writeCell(r.cell),e},createTwoSignature$1=r=>{const e=new Cell$4;return e.bits.writeUint(r.op,32),e.refs[0]=createSignatureCell$1(r.signatureA),e.refs[1]=createSignatureCell$1(r.signatureB),e.writeCell(r.cell),e};var PaymentUtils={writePublicKey:writePublicKey$1,writeSignature:writeSignature$1,createSignatureCell:createSignatureCell$1,tag_init:tag_init$1,tag_cooperative_close:tag_cooperative_close$1,tag_cooperative_commit:tag_cooperative_commit$1,tag_start_uncooperative_close:tag_start_uncooperative_close$1,tag_challenge_state:tag_challenge_state$1,tag_settle_conditionals:tag_settle_conditionals$1,tag_state:tag_state$1,op_top_up_balance:op_top_up_balance$1,op_init_channel:op_init_channel$1,op_cooperative_close:op_cooperative_close$1,op_cooperative_commit:op_cooperative_commit$1,op_start_uncooperative_close:op_start_uncooperative_close$1,op_challenge_quarantined_state:op_challenge_quarantined_state$1,op_settle_conditionals:op_settle_conditionals$1,op_finish_uncooperative_close:op_finish_uncooperative_close$1,op_channel_closed:op_channel_closed$1,createTopUpBalance:createTopUpBalance$1,createInitChannelBody:createInitChannelBody$1,createCooperativeCloseChannelBody:createCooperativeCloseChannelBody$1,createCooperativeCommitBody:createCooperativeCommitBody$1,createConditionalPayment:createConditionalPayment$1,createSemiChannelBody:createSemiChannelBody$1,createSemiChannelState:createSemiChannelState$1,createSignedSemiChannelState:createSignedSemiChannelState$1,createStartUncooperativeCloseBody:createStartUncooperativeCloseBody$1,createChallengeQuarantinedStateBody:createChallengeQuarantinedStateBody$1,createSettleConditionalsBody:createSettleConditionalsBody$1,createFinishUncooperativeClose:createFinishUncooperativeClose$1,createOneSignature:createOneSignature$1,createTwoSignature:createTwoSignature$1};const{Contract:Contract$3}=contract,{Cell:Cell$3}=boc$1,{nacl,hexToBytes,BN:BN$2}=utils$1,{parseAddress:parseAddress$3}=NftUtils,{writePublicKey,writeSignature,createSignatureCell,tag_init,tag_cooperative_close,tag_cooperative_commit,tag_start_uncooperative_close,tag_challenge_state,tag_settle_conditionals,tag_state,op_top_up_balance,op_init_channel,op_cooperative_close,op_cooperative_commit,op_start_uncooperative_close,op_challenge_quarantined_state,op_settle_conditionals,op_finish_uncooperative_close,op_channel_closed,createTopUpBalance,createInitChannelBody,createCooperativeCloseChannelBody,createCooperativeCommitBody,createConditionalPayment,createSemiChannelBody,createSemiChannelState,createSignedSemiChannelState,createStartUncooperativeCloseBody,createChallengeQuarantinedStateBody,createSettleConditionalsBody,createFinishUncooperativeClose,createOneSignature,createTwoSignature}=PaymentUtils,PAYMENT_CHANNEL_CODE_HEX="B5EE9C72410230010007FB000114FF00F4A413F4BCF2C80B0102012002030201480405000AF26C21F0190202CB06070201202E2F020120080902012016170201200A0B0201200C0D0009D3610F80CC001D6B5007434C7FE8034C7CC1BC0FE19E0201580E0F0201201011002D3E11DBC4BE11DBC43232C7FE11DBC47E80B2C7F2407320008B083E1B7B51343480007E187E80007E18BE80007E18F4FFC07E1934FFC07E1974DFC07E19BC01887080A7F4C7C07E1A34C7C07E1A7D01007E1AB7807080E535007E1AF7BE1B2002012012130201201415008D3E13723E11BE117E113E10540132803E10BE80BE10FE8084F2FFC4B2FFF2DFFC02887080A7FE12BE127E121400F2C7C4B2C7FD0037807080E53E12C073253E1333C5B8B27B5520004D1C3C02FE106CFCB8193E803E800C3E1096283E18BE10C0683E18FE10BE10E8006EFCB819BC032000CF1D3C02FE106CFCB819348020C235C6083E4040E4BE1124BE117890CC3E443CB81974C7C060841A5B9A5D2EBCB81A3E118074DFD66EBCB81CBE803E800C3E1094882FBE10D4882FAC3CB819807E18BE18FE12F43E800C3E10BE10E80068006E7CB8199FFE187C0320004120843777222E9C20043232C15401B3C594013E808532DA84B2C7F2DFF2407EC02002012018190201D42B2C0201201A1B0201201E1F0201201C1D00E5473F00BD401D001D401D021F90102D31F01821043436D74BAF2E068F84601D37F59BAF2E072F844544355F910F8454330F910B0F2E065D33FD33F30F84822B9F84922B9B0F2E06C21F86820F869F84A6E915B8E19F84AD0D33FFA003171D721D33F305033BC02BCB1936DF86ADEE2F800F00C8006F3E12F43E800C7E903E900C3E09DBC41CBE10D62F24CC20C1B7BE10FE11963C03FE10BE11A04020BC03DC3E185C3E189C3E18DB7E1ABC032000B51D3C02F5007400750074087E4040B4C7C0608410DB1BDCEEBCB81A3E118074DFD66EBCB81CBE111510D57E443E1150CC3E442C3CB8197E80007E18BE80007E18F4CFF4CFCC3E1208AE7E1248AE6C3CB81B007E1A3E1A7E003C042001C1573F00BF84A6EF2E06AD2008308D71820F9012392F84492F845E24130F910F2E065D31F018210556E436CBAF2E068F84601D37F59BAF2E072D401D08308D71820F901F8444130F910F2E06501D430D08308D71820F901F8454130F910F2E06501820020120222301FED31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE23032F8485280BEF8495250BEB0524BBE1AB0527ABE19210064B05215BE14B05248BE17B0F2E06970F82305C8CB3F5004FA0215F40015CB3F5004FA0212F400CB1F12CA00CA00C9F86AF00C01C31CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DA19D46EBCB81A3E118074DFD66EBCB81CB5007420C235C6083E407E11104C3E443CB81940750C3420C235C6083E407E11504C3E443CB81940602403F71CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DB10DBAEBCB81A3E118074DFD66EBCB81CBD010C3E12B434CFFE803D0134CFFE803D0134C7FE11DBC4148828083E08EE7CB81BBE11DBC4A83E08EF3CB81C34800C151D5A64D6D4C8F7A2B98E82A49B08B8C3816028292A01FCD31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE230325339BE5381BEB0F8495250BEB0F8485290BEB02502FE5237BE16B05262BEB0F2E06927C20097F84918BEF2E0699137E222C20097F84813BEF2E0699132E2F84AD0D33FFA00F404D33FFA00F404D31FF8476F105220A0F823BCF2E06FD200D20030B3F2E073209C3537373A5274BC5263BC12B18E11323939395250BC5299BC18B14650134440E25319BAB3F2E06D9130E30D7F05C82627002496F8476F1114A098F8476F1117A00603E203003ECB3F5004FA0215F40012CB3F5004FA0213F400CB1F12CA00CA00C9F86AF00C00620A8020F4966FA5208E213050038020F4666FA1208E1001FA00ED1E15DA119450C3A00B9133E2923430E202926C21E2B31B000C3535075063140038C8CB3F5004FA0212F400CB3F5003FA0213F400CB1FCA00C9F86AF00C00D51D3C02FE129BACFCB81AFE12B434CFFE803D010C74CFFE803D010C74C7CC3E11DBC4283E11DBC4A83E08EE7CB81C7E003E10886808E87E18BE10D400E816287E18FE10F04026BE10BE10E83E189C3E18F7BE10B04026BE10FE10A83E18DC3E18F780693E1A293E1A7C042001F53B7EF4C7C8608419F1F4A06EA4CC7C037808608403818830AEA54C7C03B6CC780C882084155DD61FAEA54C3C0476CC780820841E6849BBEEA54C3C04B6CC7808208407C546B3EEA54C3C0576CC780820840223AA8CAEA54C3C05B6CC7808208419BDBC1A6EA54C3C05F6CC780C60840950CAA46EA53C0636CC78202D0008840FF2F00075BC7FE3A7805FC25E87D007D207D20184100D0CAF6A1EC7C217C21B7817C227C22B7817C237C23FC247C24B7817C2524C3B7818823881B22A021984008DBD0CABA7805FC20C8B870FC253748B8F07C256840206B90FD0018C020EB90FD0018B8EB90E98F987C23B7882908507C11DE491839707C23B788507C23B789507C11DE48B9F03A4331C4966";var je;let PaymentChannel$2=(je=class extends Contract$3{constructor(e,n){n.publicKeyA=n.isA?n.myKeyPair.publicKey:n.hisPublicKey,n.publicKeyB=n.isA?n.hisPublicKey:n.myKeyPair.publicKey,n.wc=n.wc||0,n.code=n.code||Cell$3.oneFromBoc(PAYMENT_CHANNEL_CODE_HEX),super(e,n)}createDataCell(){var a,o,g;const e=new Cell$3;e.bits.writeBit(0),e.bits.writeCoins(0),e.bits.writeCoins(0),writePublicKey(e,this.options.publicKeyA),writePublicKey(e,this.options.publicKeyB),e.bits.writeUint(this.options.channelId,128);const n=new Cell$3;n.bits.writeUint(((a=this.options.closingConfig)==null?void 0:a.quarantineDuration)||0,32),n.bits.writeCoins(((o=this.options.closingConfig)==null?void 0:o.misbehaviorFine)||new BN$2(0)),n.bits.writeUint(((g=this.options.closingConfig)==null?void 0:g.conditionalCloseDuration)||0,32),e.refs[0]=n,e.bits.writeUint(0,32),e.bits.writeUint(0,32),e.bits.writeBit(!1);const s=new Cell$3;return s.bits.writeCoins(this.options.excessFee||new BN$2(0)),s.bits.writeAddress(this.options.addressA),s.bits.writeAddress(this.options.addressB),e.refs[1]=s,e}async createOneSignature(e,n){const s=nacl.sign.detached(await n.hash(),this.options.myKeyPair.secretKey);return{cell:createOneSignature({op:e,isA:this.options.isA,signature:s,cell:n}),signature:s}}async createTwoSignature(e,n,s){const a=nacl.sign.detached(await s.hash(),this.options.myKeyPair.secretKey),o=this.options.isA?a:n,g=this.options.isA?n:a;return{cell:createTwoSignature({op:e,signatureA:o,signatureB:g,cell:s}),signature:a}}async createTopUpBalance(e){return createTopUpBalance(e)}async createInitChannel(e){return this.createOneSignature(op_init_channel,createInitChannelBody({...e,channelId:this.options.channelId}))}async createCooperativeCloseChannel(e){return e.hisSignature||(e.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(op_cooperative_close,e.hisSignature,createCooperativeCloseChannelBody({...e,channelId:this.options.channelId}))}async createCooperativeCommit(e){return e.hisSignature||(e.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(op_cooperative_commit,e.hisSignature,createCooperativeCommitBody({...e,channelId:this.options.channelId}))}async createSignedSemiChannelState(e){const n=createSemiChannelState({channelId:this.options.channelId,semiChannelBody:createSemiChannelBody({seqno:e.mySeqno,sentCoins:e.mySentCoins,conditionals:null}),counterpartySemiChannelBody:e.hisSeqno===void 0?null:createSemiChannelBody({seqno:e.hisSeqno,sentCoins:e.hisSentCoins,conditionals:null})}),s=nacl.sign.detached(await n.hash(),this.options.myKeyPair.secretKey);return{cell:createSignedSemiChannelState({signature:s,state:n}),signature:s}}async signState(e){const n=this.options.isA?e.seqnoA:e.seqnoB,s=this.options.isA?e.seqnoB:e.seqnoA,a=this.options.initBalanceA.gt(e.balanceA)?this.options.initBalanceA.sub(e.balanceA):new BN$2(0),o=this.options.initBalanceB.gt(e.balanceB)?this.options.initBalanceB.sub(e.balanceB):new BN$2(0),g=this.options.isA?a:o,b=this.options.isA?o:a,{cell:B,signature:N}=await this.createSignedSemiChannelState({mySeqno:n,mySentCoins:g,hisSeqno:s,hisSentCoins:b});return N}async verifyState(e,n){const s=this.options.isA?e.seqnoB:e.seqnoA,a=this.options.isA?e.seqnoA:e.seqnoB,o=this.options.initBalanceA.gt(e.balanceA)?this.options.initBalanceA.sub(e.balanceA):new BN$2(0),g=this.options.initBalanceB.gt(e.balanceB)?this.options.initBalanceB.sub(e.balanceB):new BN$2(0),b=this.options.isA?g:o,B=this.options.isA?o:g,I=await createSemiChannelState({channelId:this.options.channelId,semiChannelBody:createSemiChannelBody({seqno:s,sentCoins:b,conditionals:null}),counterpartySemiChannelBody:a===void 0?null:createSemiChannelBody({seqno:a,sentCoins:B,conditionals:null})}).hash();return nacl.sign.detached.verify(I,n,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async signClose(e){const{cell:n,signature:s}=await this.createCooperativeCloseChannel(e);return s}async verifyClose(e,n){const a=await(await createCooperativeCloseChannelBody({...e,channelId:this.options.channelId})).hash();return nacl.sign.detached.verify(a,n,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async createStartUncooperativeClose(e){return this.createOneSignature(op_start_uncooperative_close,createStartUncooperativeCloseBody({...e,channelId:this.options.channelId}))}async createChallengeQuarantinedState(e){return this.createOneSignature(op_challenge_quarantined_state,createChallengeQuarantinedStateBody({...e,channelId:this.options.channelId}))}async createSettleConditionals(e){return this.createOneSignature(op_settle_conditionals,createSettleConditionalsBody({...e,channelId:this.options.channelId}))}async createFinishUncooperativeClose(){return createFinishUncooperativeClose()}async getChannelState(){const e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_channel_state",[])).toNumber()}async getData(){const e=Mt=>{let ae=Mt.toString(16);return ae.length%2!==0&&(ae="0"+ae),hexToBytes(ae)},n=await this.getAddress(),s=await this.provider.call2(n.toString(),"get_channel_data",[]),a=s[0].toNumber(),o=s[1][0],g=s[1][1],b=e(s[2][0]),B=e(s[2][1]),N=s[3],I=s[4][0].toNumber(),U=s[4][1],H=s[4][2].toNumber(),Q=s[5][0],$t=s[5][1],Dt=s[6],xt=s[7][0],Ut=parseAddress$3(s[7][1]),we=parseAddress$3(s[7][2]);return{state:a,balanceA:o,balanceB:g,publicKeyA:b,publicKeyB:B,channelId:N,quarantineDuration:I,misbehaviorFine:U,conditionalCloseDuration:H,seqnoA:Q,seqnoB:$t,quarantine:Dt,excessFee:xt,addressA:Ut,addressB:we}}fromWallet(e){const{wallet:n,secretKey:s}=e,a=(o,g)=>{const b=async B=>{const N=g?(await this.createStateInit()).stateInit:null,I=await this.getAddress(),U=await n.methods.seqno().call()||0,H=await o;return n.methods.transfer({secretKey:s,toAddress:I.toString(!0,!0,!0),amount:B,seqno:U,payload:H,stateInit:N,sendMode:3})};return{send:B=>b(B).then(N=>N.send()),estimateFee:B=>b(B).then(N=>N.estimateFee())}};return{deploy:()=>a(null,!0),init:o=>a(this.createInitChannel(o).then(g=>g.cell)),topUp:o=>a(this.createTopUpBalance(o)),close:o=>a(this.createCooperativeCloseChannel(o).then(g=>g.cell)),commit:o=>a(this.createCooperativeCommit(o).then(g=>g.cell)),startUncooperativeClose:o=>a(this.createStartUncooperativeClose(o).then(g=>g.cell)),challengeQuarantinedState:o=>a(this.createChallengeQuarantinedState(o).then(g=>g.cell)),settleConditionals:o=>a(this.createSettleConditionals(o).then(g=>g.cell)),finishUncooperativeClose:()=>a(this.createFinishUncooperativeClose())}}},We(je,"STATE_UNINITED",0),We(je,"STATE_OPEN",1),We(je,"STATE_CLOSURE_STARTED",2),We(je,"STATE_SETTLING_CONDITIONALS",3),We(je,"STATE_AWAITING_FINALIZATION",4),je);PaymentChannel$2.codeHex=PAYMENT_CHANNEL_CODE_HEX;var PaymentChannel_1={PaymentChannel:PaymentChannel$2};const{PaymentChannel:PaymentChannel$1}=PaymentChannel_1;let Payments$1=class{constructor(e){this.provider=e}createChannel(e){return new PaymentChannel$1(this.provider,e)}};var payments={Payments:Payments$1,PaymentChannel:PaymentChannel$1},eventsExports={},events={get exports(){return eventsExports},set exports(r){eventsExports=r}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function r(e,n,s){return Function.prototype.apply.call(e,n,s)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(r){console&&console.warn&&console.warn(r)}var NumberIsNaN=Number.isNaN||function r(e){return e!==e};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;eventsExports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(r){if(typeof r!="number"||r<0||NumberIsNaN(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");defaultMaxListeners=r}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function r(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(r){return r._maxListeners===void 0?EventEmitter.defaultMaxListeners:r._maxListeners}EventEmitter.prototype.getMaxListeners=function r(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function r(e){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var a=e==="error",o=this._events;if(o!==void 0)a=a&&o.error===void 0;else if(!a)return!1;if(a){var g;if(n.length>0&&(g=n[0]),g instanceof Error)throw g;var b=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw b.context=g,b}var B=o[e];if(B===void 0)return!1;if(typeof B=="function")ReflectApply(B,this,n);else for(var N=B.length,I=arrayClone(B,N),s=0;s<N;++s)ReflectApply(I[s],this,n);return!0};function _addListener(r,e,n,s){var a,o,g;if(checkListener(n),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,n.listener?n.listener:n),o=r._events),g=o[e]),g===void 0)g=o[e]=n,++r._eventsCount;else if(typeof g=="function"?g=o[e]=s?[n,g]:[g,n]:s?g.unshift(n):g.push(n),a=_getMaxListeners(r),a>0&&g.length>a&&!g.warned){g.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=r,b.type=e,b.count=g.length,ProcessEmitWarning(b)}return r}EventEmitter.prototype.addListener=function r(e,n){return _addListener(this,e,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function r(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(r,e,n){var s={fired:!1,wrapFn:void 0,target:r,type:e,listener:n},a=onceWrapper.bind(s);return a.listener=n,s.wrapFn=a,a}EventEmitter.prototype.once=function r(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter.prototype.prependOnceListener=function r(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter.prototype.removeListener=function r(e,n){var s,a,o,g,b;if(checkListener(n),a=this._events,a===void 0)return this;if(s=a[e],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,s.listener||n));else if(typeof s!="function"){for(o=-1,g=s.length-1;g>=0;g--)if(s[g]===n||s[g].listener===n){b=s[g].listener,o=g;break}if(o<0)return this;o===0?s.shift():spliceOne(s,o),s.length===1&&(a[e]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",e,b||n)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function r(e){var n,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var o=Object.keys(s),g;for(a=0;a<o.length;++a)g=o[a],g!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(e,n[a]);return this};function _listeners(r,e,n){var s=r._events;if(s===void 0)return[];var a=s[e];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?unwrapListeners(a):arrayClone(a,a.length)}EventEmitter.prototype.listeners=function r(e){return _listeners(this,e,!0)};EventEmitter.prototype.rawListeners=function r(e){return _listeners(this,e,!1)};EventEmitter.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):listenerCount.call(r,e)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(r){var e=this._events;if(e!==void 0){var n=e[r];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter.prototype.eventNames=function r(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(r,e){for(var n=new Array(e),s=0;s<e;++s)n[s]=r[s];return n}function spliceOne(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function unwrapListeners(r){for(var e=new Array(r.length),n=0;n<e.length;++n)e[n]=r[n].listener||r[n];return e}function once(r,e){return new Promise(function(n,s){function a(g){r.removeListener(e,o),s(g)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",a),n([].slice.call(arguments))}eventTargetAgnosticAddListener(r,e,o,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(r,a,{once:!0})})}function addErrorHandlerIfEventEmitter(r,e,n){typeof r.on=="function"&&eventTargetAgnosticAddListener(r,"error",e,n)}function eventTargetAgnosticAddListener(r,e,n,s){if(typeof r.on=="function")s.once?r.once(e,n):r.on(e,n);else if(typeof r.addEventListener=="function")r.addEventListener(e,function a(o){s.once&&r.removeEventListener(e,a),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var errorClasses={},deserializers={},addCustomErrorDeserializer=function(r,e){deserializers[r]=e},createCustomErrorClass=function(r){var e=function(s,a){Object.assign(this,a),this.name=r,this.message=s||r,this.stack=new Error().stack};return e.prototype=new Error,errorClasses[r]=e,e},deserializeError=function(r){if(typeof r=="object"&&r){try{var e=JSON.parse(r.message);e.message&&e.name&&(r=e)}catch{}var n=void 0;if(typeof r.name=="string"){var s=r.name,a=deserializers[s];if(a)n=a(r);else{var o=s==="Error"?Error:errorClasses[s];o||(console.warn("deserializing an unknown class '"+s+"'"),o=createCustomErrorClass(s)),n=Object.create(o.prototype);try{for(var g in r)r.hasOwnProperty(g)&&(n[g]=r[g])}catch{}}}else n=new Error(r.message);return!n.stack&&Error.captureStackTrace&&Error.captureStackTrace(n,deserializeError),n}return new Error(String(r))},serializeError=function(r){return r&&(typeof r=="object"?destroyCircular(r,[]):typeof r=="function"?"[Function: "+(r.name||"anonymous")+"]":r)};function destroyCircular(r,e){var n={};e.push(r);for(var s=0,a=Object.keys(r);s<a.length;s++){var o=a[s],g=r[o];if(typeof g!="function"){if(!g||typeof g!="object"){n[o]=g;continue}if(e.indexOf(r[o])===-1){n[o]=destroyCircular(r[o],e.slice(0));continue}n[o]="[Circular]"}}return typeof r.name=="string"&&(n.name=r.name),typeof r.message=="string"&&(n.message=r.message),typeof r.stack=="string"&&(n.stack=r.stack),n}var AccountNameRequiredError=createCustomErrorClass("AccountNameRequired"),AccountNotSupported=createCustomErrorClass("AccountNotSupported"),AmountRequired=createCustomErrorClass("AmountRequired"),BluetoothRequired=createCustomErrorClass("BluetoothRequired"),BtcUnmatchedApp=createCustomErrorClass("BtcUnmatchedApp"),CantOpenDevice=createCustomErrorClass("CantOpenDevice"),CashAddrNotSupported=createCustomErrorClass("CashAddrNotSupported"),CurrencyNotSupported=createCustomErrorClass("CurrencyNotSupported"),DeviceAppVerifyNotSupported=createCustomErrorClass("DeviceAppVerifyNotSupported"),DeviceGenuineSocketEarlyClose=createCustomErrorClass("DeviceGenuineSocketEarlyClose"),DeviceNotGenuineError=createCustomErrorClass("DeviceNotGenuine"),DeviceOnDashboardExpected=createCustomErrorClass("DeviceOnDashboardExpected"),DeviceOnDashboardUnexpected=createCustomErrorClass("DeviceOnDashboardUnexpected"),DeviceInOSUExpected=createCustomErrorClass("DeviceInOSUExpected"),DeviceHalted=createCustomErrorClass("DeviceHalted"),DeviceNameInvalid=createCustomErrorClass("DeviceNameInvalid"),DeviceSocketFail=createCustomErrorClass("DeviceSocketFail"),DeviceSocketNoBulkStatus=createCustomErrorClass("DeviceSocketNoBulkStatus"),DisconnectedDevice=createCustomErrorClass("DisconnectedDevice"),DisconnectedDeviceDuringOperation=createCustomErrorClass("DisconnectedDeviceDuringOperation"),EnpointConfigError=createCustomErrorClass("EnpointConfig"),EthAppPleaseEnableContractData=createCustomErrorClass("EthAppPleaseEnableContractData"),FeeEstimationFailed=createCustomErrorClass("FeeEstimationFailed"),FirmwareNotRecognized=createCustomErrorClass("FirmwareNotRecognized"),HardResetFail=createCustomErrorClass("HardResetFail"),InvalidXRPTag=createCustomErrorClass("InvalidXRPTag"),InvalidAddress=createCustomErrorClass("InvalidAddress"),InvalidAddressBecauseDestinationIsAlsoSource=createCustomErrorClass("InvalidAddressBecauseDestinationIsAlsoSource"),LatestMCUInstalledError=createCustomErrorClass("LatestMCUInstalledError"),UnknownMCU=createCustomErrorClass("UnknownMCU"),LedgerAPIError=createCustomErrorClass("LedgerAPIError"),LedgerAPIErrorWithMessage=createCustomErrorClass("LedgerAPIErrorWithMessage"),LedgerAPINotAvailable=createCustomErrorClass("LedgerAPINotAvailable"),ManagerAppAlreadyInstalledError=createCustomErrorClass("ManagerAppAlreadyInstalled"),ManagerAppRelyOnBTCError=createCustomErrorClass("ManagerAppRelyOnBTC"),ManagerAppDepInstallRequired=createCustomErrorClass("ManagerAppDepInstallRequired"),ManagerAppDepUninstallRequired=createCustomErrorClass("ManagerAppDepUninstallRequired"),ManagerDeviceLockedError=createCustomErrorClass("ManagerDeviceLocked"),ManagerFirmwareNotEnoughSpaceError=createCustomErrorClass("ManagerFirmwareNotEnoughSpace"),ManagerNotEnoughSpaceError=createCustomErrorClass("ManagerNotEnoughSpace"),ManagerUninstallBTCDep=createCustomErrorClass("ManagerUninstallBTCDep"),NetworkDown=createCustomErrorClass("NetworkDown"),NoAddressesFound=createCustomErrorClass("NoAddressesFound"),NotEnoughBalance=createCustomErrorClass("NotEnoughBalance"),NotEnoughBalanceToDelegate=createCustomErrorClass("NotEnoughBalanceToDelegate"),NotEnoughBalanceInParentAccount=createCustomErrorClass("NotEnoughBalanceInParentAccount"),NotEnoughSpendableBalance=createCustomErrorClass("NotEnoughSpendableBalance"),NotEnoughBalanceBecauseDestinationNotCreated=createCustomErrorClass("NotEnoughBalanceBecauseDestinationNotCreated"),NoAccessToCamera=createCustomErrorClass("NoAccessToCamera"),NotEnoughGas=createCustomErrorClass("NotEnoughGas"),NotSupportedLegacyAddress=createCustomErrorClass("NotSupportedLegacyAddress"),GasLessThanEstimate=createCustomErrorClass("GasLessThanEstimate"),PasswordsDontMatchError=createCustomErrorClass("PasswordsDontMatch"),PasswordIncorrectError=createCustomErrorClass("PasswordIncorrect"),RecommendSubAccountsToEmpty=createCustomErrorClass("RecommendSubAccountsToEmpty"),RecommendUndelegation=createCustomErrorClass("RecommendUndelegation"),TimeoutTagged=createCustomErrorClass("TimeoutTagged"),UnexpectedBootloader=createCustomErrorClass("UnexpectedBootloader"),MCUNotGenuineToDashboard=createCustomErrorClass("MCUNotGenuineToDashboard"),RecipientRequired=createCustomErrorClass("RecipientRequired"),UnavailableTezosOriginatedAccountReceive=createCustomErrorClass("UnavailableTezosOriginatedAccountReceive"),UnavailableTezosOriginatedAccountSend=createCustomErrorClass("UnavailableTezosOriginatedAccountSend"),UpdateFetchFileFail=createCustomErrorClass("UpdateFetchFileFail"),UpdateIncorrectHash=createCustomErrorClass("UpdateIncorrectHash"),UpdateIncorrectSig=createCustomErrorClass("UpdateIncorrectSig"),UpdateYourApp=createCustomErrorClass("UpdateYourApp"),UserRefusedDeviceNameChange=createCustomErrorClass("UserRefusedDeviceNameChange"),UserRefusedAddress=createCustomErrorClass("UserRefusedAddress"),UserRefusedFirmwareUpdate=createCustomErrorClass("UserRefusedFirmwareUpdate"),UserRefusedAllowManager=createCustomErrorClass("UserRefusedAllowManager"),UserRefusedOnDevice=createCustomErrorClass("UserRefusedOnDevice"),TransportOpenUserCancelled=createCustomErrorClass("TransportOpenUserCancelled"),TransportInterfaceNotAvailable=createCustomErrorClass("TransportInterfaceNotAvailable"),TransportRaceCondition=createCustomErrorClass("TransportRaceCondition"),TransportWebUSBGestureRequired=createCustomErrorClass("TransportWebUSBGestureRequired"),DeviceShouldStayInApp=createCustomErrorClass("DeviceShouldStayInApp"),WebsocketConnectionError=createCustomErrorClass("WebsocketConnectionError"),WebsocketConnectionFailed=createCustomErrorClass("WebsocketConnectionFailed"),WrongDeviceForAccount=createCustomErrorClass("WrongDeviceForAccount"),WrongAppForCurrency=createCustomErrorClass("WrongAppForCurrency"),ETHAddressNonEIP=createCustomErrorClass("ETHAddressNonEIP"),CantScanQRCode=createCustomErrorClass("CantScanQRCode"),FeeNotLoaded=createCustomErrorClass("FeeNotLoaded"),FeeRequired=createCustomErrorClass("FeeRequired"),FeeTooHigh=createCustomErrorClass("FeeTooHigh"),SyncError=createCustomErrorClass("SyncError"),PairingFailed=createCustomErrorClass("PairingFailed"),GenuineCheckFailed=createCustomErrorClass("GenuineCheckFailed"),LedgerAPI4xx=createCustomErrorClass("LedgerAPI4xx"),LedgerAPI5xx=createCustomErrorClass("LedgerAPI5xx"),FirmwareOrAppUpdateRequired=createCustomErrorClass("FirmwareOrAppUpdateRequired"),NoDBPathGiven=createCustomErrorClass("NoDBPathGiven"),DBWrongPassword=createCustomErrorClass("DBWrongPassword"),DBNotReset=createCustomErrorClass("DBNotReset");function TransportError(r,e){this.name="TransportError",this.message=r,this.stack=new Error().stack,this.id=e}TransportError.prototype=new Error;addCustomErrorDeserializer("TransportError",function(r){return new TransportError(r.message,r.id)});var StatusCodes={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function getAltStatusMessage(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=r&&r<=28671)return"Internal error, please report"}function TransportStatusError(r){this.name="TransportStatusError";var e=Object.keys(StatusCodes).find(function(a){return StatusCodes[a]===r})||"UNKNOWN_ERROR",n=getAltStatusMessage(r)||e,s=r.toString(16);this.message="Ledger device: "+n+" (0x"+s+")",this.stack=new Error().stack,this.statusCode=r,this.statusText=e}TransportStatusError.prototype=new Error;addCustomErrorDeserializer("TransportStatusError",function(r){return new TransportStatusError(r.statusCode)});const dist=Object.freeze(Object.defineProperty({__proto__:null,AccountNameRequiredError,AccountNotSupported,AmountRequired,BluetoothRequired,BtcUnmatchedApp,CantOpenDevice,CantScanQRCode,CashAddrNotSupported,CurrencyNotSupported,DBNotReset,DBWrongPassword,DeviceAppVerifyNotSupported,DeviceGenuineSocketEarlyClose,DeviceHalted,DeviceInOSUExpected,DeviceNameInvalid,DeviceNotGenuineError,DeviceOnDashboardExpected,DeviceOnDashboardUnexpected,DeviceShouldStayInApp,DeviceSocketFail,DeviceSocketNoBulkStatus,DisconnectedDevice,DisconnectedDeviceDuringOperation,ETHAddressNonEIP,EnpointConfigError,EthAppPleaseEnableContractData,FeeEstimationFailed,FeeNotLoaded,FeeRequired,FeeTooHigh,FirmwareNotRecognized,FirmwareOrAppUpdateRequired,GasLessThanEstimate,GenuineCheckFailed,HardResetFail,InvalidAddress,InvalidAddressBecauseDestinationIsAlsoSource,InvalidXRPTag,LatestMCUInstalledError,LedgerAPI4xx,LedgerAPI5xx,LedgerAPIError,LedgerAPIErrorWithMessage,LedgerAPINotAvailable,MCUNotGenuineToDashboard,ManagerAppAlreadyInstalledError,ManagerAppDepInstallRequired,ManagerAppDepUninstallRequired,ManagerAppRelyOnBTCError,ManagerDeviceLockedError,ManagerFirmwareNotEnoughSpaceError,ManagerNotEnoughSpaceError,ManagerUninstallBTCDep,NetworkDown,NoAccessToCamera,NoAddressesFound,NoDBPathGiven,NotEnoughBalance,NotEnoughBalanceBecauseDestinationNotCreated,NotEnoughBalanceInParentAccount,NotEnoughBalanceToDelegate,NotEnoughGas,NotEnoughSpendableBalance,NotSupportedLegacyAddress,PairingFailed,PasswordIncorrectError,PasswordsDontMatchError,RecipientRequired,RecommendSubAccountsToEmpty,RecommendUndelegation,StatusCodes,SyncError,TimeoutTagged,TransportError,TransportInterfaceNotAvailable,TransportOpenUserCancelled,TransportRaceCondition,TransportStatusError,TransportWebUSBGestureRequired,UnavailableTezosOriginatedAccountReceive,UnavailableTezosOriginatedAccountSend,UnexpectedBootloader,UnknownMCU,UpdateFetchFileFail,UpdateIncorrectHash,UpdateIncorrectSig,UpdateYourApp,UserRefusedAddress,UserRefusedAllowManager,UserRefusedDeviceNameChange,UserRefusedFirmwareUpdate,UserRefusedOnDevice,WebsocketConnectionError,WebsocketConnectionFailed,WrongAppForCurrency,WrongDeviceForAccount,addCustomErrorDeserializer,createCustomErrorClass,deserializeError,getAltStatusMessage,serializeError},Symbol.toStringTag,{value:"Module"}));class Transport{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new eventsExports,this.send=async(e,n,s,a,o=Buffer.alloc(0),g=[StatusCodes.OK])=>{if(o.length>=256)throw new TransportError("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");const b=await this.exchange(Buffer.concat([Buffer.from([e,n,s,a]),Buffer.from([o.length]),o])),B=b.readUInt16BE(b.length-2);if(!g.some(N=>N===B))throw new TransportStatusError(B);return b},this.exchangeBusyPromise=void 0,this.exchangeAtomicImpl=async e=>{if(this.exchangeBusyPromise)throw new TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");let n;const s=new Promise(g=>{n=g});this.exchangeBusyPromise=s;let a=!1;const o=setTimeout(()=>{a=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const g=await e();return a&&this.emit("responsive"),g}finally{clearTimeout(o),n&&n(),this.exchangeBusyPromise=null}},this._appAPIlock=null}exchange(e){throw new Error("exchange not implemented")}setScrambleKey(e){}close(){return Promise.resolve()}on(e,n){this._events.on(e,n)}off(e,n){this._events.removeListener(e,n)}emit(e,...n){this._events.emit(e,...n)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,n){return new Promise((s,a)=>{let o=!1;const g=this.listen({next:B=>{o=!0,g&&g.unsubscribe(),b&&clearTimeout(b),this.open(B.descriptor,e).then(s,a)},error:B=>{b&&clearTimeout(b),a(B)},complete:()=>{b&&clearTimeout(b),o||a(new TransportError(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),b=n?setTimeout(()=>{g.unsubscribe(),a(new TransportError(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},n):null})}decorateAppAPIMethods(e,n,s){for(let a of n)e[a]=this.decorateAppAPIMethod(a,e[a],e,s)}decorateAppAPIMethod(e,n,s,a){return async(...o)=>{const{_appAPIlock:g}=this;if(g)return Promise.reject(new TransportError("Ledger Device is busy (lock "+g+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(a),await n.apply(s,o)}finally{this._appAPIlock=null}}}}Transport.isSupported=void 0;Transport.list=void 0;Transport.listen=void 0;Transport.open=void 0;Transport.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";Transport.ErrorMessage_NoDeviceFound="No Ledger device found";var hidFraming={};const require$$0=getAugmentedNamespace(dist);Object.defineProperty(hidFraming,"__esModule",{value:!0});var default_1=hidFraming.default=void 0,_errors$1=require$$0;const Tag=5;function asUInt16BE(r){const e=Buffer.alloc(2);return e.writeUInt16BE(r,0),e}const initialAcc={data:Buffer.alloc(0),dataLength:0,sequence:0},createHIDframing=(r,e)=>({makeBlocks(n){let s=Buffer.concat([asUInt16BE(n.length),n]);const a=e-5,o=Math.ceil(s.length/a);s=Buffer.concat([s,Buffer.alloc(o*a-s.length+1).fill(0)]);const g=[];for(let b=0;b<o;b++){const B=Buffer.alloc(5);B.writeUInt16BE(r,0),B.writeUInt8(Tag,2),B.writeUInt16BE(b,3);const N=s.slice(b*a,(b+1)*a);g.push(Buffer.concat([B,N]))}return g},reduceResponse(n,s){let{data:a,dataLength:o,sequence:g}=n||initialAcc;if(s.readUInt16BE(0)!==r)throw new _errors$1.TransportError("Invalid channel","InvalidChannel");if(s.readUInt8(2)!==Tag)throw new _errors$1.TransportError("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==g)throw new _errors$1.TransportError("Invalid sequence","InvalidSequence");n||(o=s.readUInt16BE(5)),g++;const b=s.slice(n?5:7);return a=Buffer.concat([a,b]),a.length>o&&(a=a.slice(0,o)),{data:a,dataLength:o,sequence:g}},getReducedResult(n){if(n&&n.dataLength===n.data.length)return n.data}});var _default=createHIDframing;default_1=hidFraming.default=_default;var reExports={},re$3={get exports(){return reExports},set exports(r){reExports=r}};const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$2=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16;var constants$1={SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH$2,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH};const debug$1=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var debug_1=debug$1;(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:n}=constants$1,s=debug_1;e=r.exports={};const a=e.re=[],o=e.src=[],g=e.t={};let b=0;const B=(N,I,U)=>{const H=b++;s(N,H,I),g[N]=H,o[H]=I,a[H]=new RegExp(I,U?"g":void 0)};B("NUMERICIDENTIFIER","0|[1-9]\\d*"),B("NUMERICIDENTIFIERLOOSE","[0-9]+"),B("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),B("MAINVERSION",`(${o[g.NUMERICIDENTIFIER]})\\.(${o[g.NUMERICIDENTIFIER]})\\.(${o[g.NUMERICIDENTIFIER]})`),B("MAINVERSIONLOOSE",`(${o[g.NUMERICIDENTIFIERLOOSE]})\\.(${o[g.NUMERICIDENTIFIERLOOSE]})\\.(${o[g.NUMERICIDENTIFIERLOOSE]})`),B("PRERELEASEIDENTIFIER",`(?:${o[g.NUMERICIDENTIFIER]}|${o[g.NONNUMERICIDENTIFIER]})`),B("PRERELEASEIDENTIFIERLOOSE",`(?:${o[g.NUMERICIDENTIFIERLOOSE]}|${o[g.NONNUMERICIDENTIFIER]})`),B("PRERELEASE",`(?:-(${o[g.PRERELEASEIDENTIFIER]}(?:\\.${o[g.PRERELEASEIDENTIFIER]})*))`),B("PRERELEASELOOSE",`(?:-?(${o[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[g.PRERELEASEIDENTIFIERLOOSE]})*))`),B("BUILDIDENTIFIER","[0-9A-Za-z-]+"),B("BUILD",`(?:\\+(${o[g.BUILDIDENTIFIER]}(?:\\.${o[g.BUILDIDENTIFIER]})*))`),B("FULLPLAIN",`v?${o[g.MAINVERSION]}${o[g.PRERELEASE]}?${o[g.BUILD]}?`),B("FULL",`^${o[g.FULLPLAIN]}$`),B("LOOSEPLAIN",`[v=\\s]*${o[g.MAINVERSIONLOOSE]}${o[g.PRERELEASELOOSE]}?${o[g.BUILD]}?`),B("LOOSE",`^${o[g.LOOSEPLAIN]}$`),B("GTLT","((?:<|>)?=?)"),B("XRANGEIDENTIFIERLOOSE",`${o[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),B("XRANGEIDENTIFIER",`${o[g.NUMERICIDENTIFIER]}|x|X|\\*`),B("XRANGEPLAIN",`[v=\\s]*(${o[g.XRANGEIDENTIFIER]})(?:\\.(${o[g.XRANGEIDENTIFIER]})(?:\\.(${o[g.XRANGEIDENTIFIER]})(?:${o[g.PRERELEASE]})?${o[g.BUILD]}?)?)?`),B("XRANGEPLAINLOOSE",`[v=\\s]*(${o[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[g.XRANGEIDENTIFIERLOOSE]})(?:${o[g.PRERELEASELOOSE]})?${o[g.BUILD]}?)?)?`),B("XRANGE",`^${o[g.GTLT]}\\s*${o[g.XRANGEPLAIN]}$`),B("XRANGELOOSE",`^${o[g.GTLT]}\\s*${o[g.XRANGEPLAINLOOSE]}$`),B("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),B("COERCERTL",o[g.COERCE],!0),B("LONETILDE","(?:~>?)"),B("TILDETRIM",`(\\s*)${o[g.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",B("TILDE",`^${o[g.LONETILDE]}${o[g.XRANGEPLAIN]}$`),B("TILDELOOSE",`^${o[g.LONETILDE]}${o[g.XRANGEPLAINLOOSE]}$`),B("LONECARET","(?:\\^)"),B("CARETTRIM",`(\\s*)${o[g.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",B("CARET",`^${o[g.LONECARET]}${o[g.XRANGEPLAIN]}$`),B("CARETLOOSE",`^${o[g.LONECARET]}${o[g.XRANGEPLAINLOOSE]}$`),B("COMPARATORLOOSE",`^${o[g.GTLT]}\\s*(${o[g.LOOSEPLAIN]})$|^$`),B("COMPARATOR",`^${o[g.GTLT]}\\s*(${o[g.FULLPLAIN]})$|^$`),B("COMPARATORTRIM",`(\\s*)${o[g.GTLT]}\\s*(${o[g.LOOSEPLAIN]}|${o[g.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",B("HYPHENRANGE",`^\\s*(${o[g.XRANGEPLAIN]})\\s+-\\s+(${o[g.XRANGEPLAIN]})\\s*$`),B("HYPHENRANGELOOSE",`^\\s*(${o[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[g.XRANGEPLAINLOOSE]})\\s*$`),B("STAR","(<|>)?=?\\s*\\*"),B("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),B("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$3,reExports);const opts=["includePrerelease","loose","rtl"],parseOptions$2=r=>r?typeof r!="object"?{loose:!0}:opts.filter(e=>r[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};var parseOptions_1=parseOptions$2;const numeric=/^[0-9]+$/,compareIdentifiers$1=(r,e)=>{const n=numeric.test(r),s=numeric.test(e);return n&&s&&(r=+r,e=+e),r===e?0:n&&!s?-1:s&&!n?1:r<e?-1:1},rcompareIdentifiers=(r,e)=>compareIdentifiers$1(e,r);var identifiers$1={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug=debug_1,{MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER}=constants$1,{re:re$2,t:t$2}=reExports,parseOptions$1=parseOptions_1,{compareIdentifiers}=identifiers$1;let SemVer$d=class{constructor(e,n){if(n=parseOptions$1(n),e instanceof SemVer$d){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>MAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const s=e.trim().match(n.loose?re$2[t$2.LOOSE]:re$2[t$2.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const o=+a;if(o>=0&&o<MAX_SAFE_INTEGER)return o}return a}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(debug("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer$d)){if(typeof e=="string"&&e===this.version)return 0;e=new SemVer$d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer$d||(e=new SemVer$d(e,this.options)),compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer$d||(e=new SemVer$d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const s=this.prerelease[n],a=e.prerelease[n];if(debug("prerelease compare",n,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return compareIdentifiers(s,a)}while(++n)}compareBuild(e){e instanceof SemVer$d||(e=new SemVer$d(e,this.options));let n=0;do{const s=this.build[n],a=e.build[n];if(debug("prerelease compare",n,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return compareIdentifiers(s,a)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}n&&(compareIdentifiers(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var semver$1=SemVer$d;const{MAX_LENGTH}=constants$1,{re:re$1,t:t$1}=reExports,SemVer$c=semver$1,parseOptions=parseOptions_1,parse$6=(r,e)=>{if(e=parseOptions(e),r instanceof SemVer$c)return r;if(typeof r!="string"||r.length>MAX_LENGTH||!(e.loose?re$1[t$1.LOOSE]:re$1[t$1.FULL]).test(r))return null;try{return new SemVer$c(r,e)}catch{return null}};var parse_1=parse$6;const parse$5=parse_1,valid$2=(r,e)=>{const n=parse$5(r,e);return n?n.version:null};var valid_1=valid$2;const parse$4=parse_1,clean$1=(r,e)=>{const n=parse$4(r.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var clean_1=clean$1;const SemVer$b=semver$1,inc$1=(r,e,n,s)=>{typeof n=="string"&&(s=n,n=void 0);try{return new SemVer$b(r instanceof SemVer$b?r.version:r,n).inc(e,s).version}catch{return null}};var inc_1=inc$1;const SemVer$a=semver$1,compare$b=(r,e,n)=>new SemVer$a(r,n).compare(new SemVer$a(e,n));var compare_1=compare$b;const compare$a=compare_1,eq$3=(r,e,n)=>compare$a(r,e,n)===0;var eq_1=eq$3;const parse$3=parse_1,eq$2=eq_1,diff$1=(r,e)=>{if(eq$2(r,e))return null;{const n=parse$3(r),s=parse$3(e),a=n.prerelease.length||s.prerelease.length,o=a?"pre":"",g=a?"prerelease":"";for(const b in n)if((b==="major"||b==="minor"||b==="patch")&&n[b]!==s[b])return o+b;return g}};var diff_1=diff$1;const SemVer$9=semver$1,major$1=(r,e)=>new SemVer$9(r,e).major;var major_1=major$1;const SemVer$8=semver$1,minor$1=(r,e)=>new SemVer$8(r,e).minor;var minor_1=minor$1;const SemVer$7=semver$1,patch$1=(r,e)=>new SemVer$7(r,e).patch;var patch_1=patch$1;const parse$2=parse_1,prerelease$1=(r,e)=>{const n=parse$2(r,e);return n&&n.prerelease.length?n.prerelease:null};var prerelease_1=prerelease$1;const compare$9=compare_1,rcompare$1=(r,e,n)=>compare$9(e,r,n);var rcompare_1=rcompare$1;const compare$8=compare_1,compareLoose$1=(r,e)=>compare$8(r,e,!0);var compareLoose_1=compareLoose$1;const SemVer$6=semver$1,compareBuild$3=(r,e,n)=>{const s=new SemVer$6(r,n),a=new SemVer$6(e,n);return s.compare(a)||s.compareBuild(a)};var compareBuild_1=compareBuild$3;const compareBuild$2=compareBuild_1,sort$1=(r,e)=>r.sort((n,s)=>compareBuild$2(n,s,e));var sort_1=sort$1;const compareBuild$1=compareBuild_1,rsort$1=(r,e)=>r.sort((n,s)=>compareBuild$1(s,n,e));var rsort_1=rsort$1;const compare$7=compare_1,gt$4=(r,e,n)=>compare$7(r,e,n)>0;var gt_1=gt$4;const compare$6=compare_1,lt$3=(r,e,n)=>compare$6(r,e,n)<0;var lt_1=lt$3;const compare$5=compare_1,neq$2=(r,e,n)=>compare$5(r,e,n)!==0;var neq_1=neq$2;const compare$4=compare_1,gte$3=(r,e,n)=>compare$4(r,e,n)>=0;var gte_1=gte$3;const compare$3=compare_1,lte$3=(r,e,n)=>compare$3(r,e,n)<=0;var lte_1=lte$3;const eq$1=eq_1,neq$1=neq_1,gt$3=gt_1,gte$2=gte_1,lt$2=lt_1,lte$2=lte_1,cmp$1=(r,e,n,s)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof n=="object"&&(n=n.version),r===n;case"!==":return typeof r=="object"&&(r=r.version),typeof n=="object"&&(n=n.version),r!==n;case"":case"=":case"==":return eq$1(r,n,s);case"!=":return neq$1(r,n,s);case">":return gt$3(r,n,s);case">=":return gte$2(r,n,s);case"<":return lt$2(r,n,s);case"<=":return lte$2(r,n,s);default:throw new TypeError(`Invalid operator: ${e}`)}};var cmp_1=cmp$1;const SemVer$5=semver$1,parse$1=parse_1,{re,t}=reExports,coerce$1=(r,e)=>{if(r instanceof SemVer$5)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let n=null;if(!e.rtl)n=r.match(re[t.COERCE]);else{let s;for(;(s=re[t.COERCERTL].exec(r))&&(!n||n.index+n[0].length!==r.length);)(!n||s.index+s[0].length!==n.index+n[0].length)&&(n=s),re[t.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;re[t.COERCERTL].lastIndex=-1}return n===null?null:parse$1(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};var coerce_1=coerce$1,iterator$1,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator$1=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),iterator$1}var yallist=Yallist$1;Yallist$1.Node=Node;Yallist$1.create=Yallist$1;function Yallist$1(r){var e=this;if(e instanceof Yallist$1||(e=new Yallist$1),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(a){e.push(a)});else if(arguments.length>0)for(var n=0,s=arguments.length;n<s;n++)e.push(arguments[n]);return e}Yallist$1.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,n=r.prev;return e&&(e.prev=n),n&&(n.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=n),r.list.length--,r.next=null,r.prev=null,r.list=null,e};Yallist$1.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Yallist$1.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Yallist$1.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)push(this,arguments[r]);return this.length};Yallist$1.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)unshift(this,arguments[r]);return this.length};Yallist$1.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Yallist$1.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Yallist$1.prototype.forEach=function(r,e){e=e||this;for(var n=this.head,s=0;n!==null;s++)r.call(e,n.value,s,this),n=n.next};Yallist$1.prototype.forEachReverse=function(r,e){e=e||this;for(var n=this.tail,s=this.length-1;n!==null;s--)r.call(e,n.value,s,this),n=n.prev};Yallist$1.prototype.get=function(r){for(var e=0,n=this.head;n!==null&&e<r;e++)n=n.next;if(e===r&&n!==null)return n.value};Yallist$1.prototype.getReverse=function(r){for(var e=0,n=this.tail;n!==null&&e<r;e++)n=n.prev;if(e===r&&n!==null)return n.value};Yallist$1.prototype.map=function(r,e){e=e||this;for(var n=new Yallist$1,s=this.head;s!==null;)n.push(r.call(e,s.value,this)),s=s.next;return n};Yallist$1.prototype.mapReverse=function(r,e){e=e||this;for(var n=new Yallist$1,s=this.tail;s!==null;)n.push(r.call(e,s.value,this)),s=s.prev;return n};Yallist$1.prototype.reduce=function(r,e){var n,s=this.head;if(arguments.length>1)n=e;else if(this.head)s=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;s!==null;a++)n=r(n,s.value,a),s=s.next;return n};Yallist$1.prototype.reduceReverse=function(r,e){var n,s=this.tail;if(arguments.length>1)n=e;else if(this.tail)s=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;s!==null;a--)n=r(n,s.value,a),s=s.prev;return n};Yallist$1.prototype.toArray=function(){for(var r=new Array(this.length),e=0,n=this.head;n!==null;e++)r[e]=n.value,n=n.next;return r};Yallist$1.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,n=this.tail;n!==null;e++)r[e]=n.value,n=n.prev;return r};Yallist$1.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var n=new Yallist$1;if(e<r||e<0)return n;r<0&&(r=0),e>this.length&&(e=this.length);for(var s=0,a=this.head;a!==null&&s<r;s++)a=a.next;for(;a!==null&&s<e;s++,a=a.next)n.push(a.value);return n};Yallist$1.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var n=new Yallist$1;if(e<r||e<0)return n;r<0&&(r=0),e>this.length&&(e=this.length);for(var s=this.length,a=this.tail;a!==null&&s>e;s--)a=a.prev;for(;a!==null&&s>r;s--,a=a.prev)n.push(a.value);return n};Yallist$1.prototype.splice=function(r,e,...n){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var s=0,a=this.head;a!==null&&s<r;s++)a=a.next;for(var o=[],s=0;a&&s<e;s++)o.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var s=0;s<n.length;s++)a=insert(this,a,n[s]);return o};Yallist$1.prototype.reverse=function(){for(var r=this.head,e=this.tail,n=r;n!==null;n=n.prev){var s=n.prev;n.prev=n.next,n.next=s}return this.head=e,this.tail=r,this};function insert(r,e,n){var s=e===r.head?new Node(n,null,e,r):new Node(n,e,e.next,r);return s.next===null&&(r.tail=s),s.prev===null&&(r.head=s),r.length++,s}function push(r,e){r.tail=new Node(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function unshift(r,e){r.head=new Node(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Node(r,e,n,s){if(!(this instanceof Node))return new Node(r,e,n,s);this.list=s,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{requireIterator()(Yallist$1)}catch(r){}const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=e.max||1/0;const n=e.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof n!="function"?naiveLength:n,this[ALLOW_STALE]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=e.maxAge||0,this[DISPOSE]=e.dispose,this[NO_DISPOSE_ON_SET]=e.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[MAX]=e||1/0,trim(this)}get max(){return this[MAX]}set allowStale(e){this[ALLOW_STALE]=!!e}get allowStale(){return this[ALLOW_STALE]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=e,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(e){typeof e!="function"&&(e=naiveLength),e!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=e,this[LENGTH]=0,this[LRU_LIST].forEach(n=>{n.length=this[LENGTH_CALCULATOR](n.value,n.key),this[LENGTH]+=n.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(e,n){n=n||this;for(let s=this[LRU_LIST].tail;s!==null;){const a=s.prev;forEachStep(this,e,s,n),s=a}}forEach(e,n){n=n||this;for(let s=this[LRU_LIST].head;s!==null;){const a=s.next;forEachStep(this,e,s,n),s=a}}keys(){return this[LRU_LIST].toArray().map(e=>e.key)}values(){return this[LRU_LIST].toArray().map(e=>e.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(e=>this[DISPOSE](e.key,e.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(e=>isStale(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[LRU_LIST]}set(e,n,s){if(s=s||this[MAX_AGE],s&&typeof s!="number")throw new TypeError("maxAge must be a number");const a=s?Date.now():0,o=this[LENGTH_CALCULATOR](n,e);if(this[CACHE].has(e)){if(o>this[MAX])return del(this,this[CACHE].get(e)),!1;const B=this[CACHE].get(e).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](e,B.value)),B.now=a,B.maxAge=s,B.value=n,this[LENGTH]+=o-B.length,B.length=o,this.get(e),trim(this),!0}const g=new Entry(e,n,o,a,s);return g.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](e,n),!1):(this[LENGTH]+=g.length,this[LRU_LIST].unshift(g),this[CACHE].set(e,this[LRU_LIST].head),trim(this),!0)}has(e){if(!this[CACHE].has(e))return!1;const n=this[CACHE].get(e).value;return!isStale(this,n)}get(e){return get(this,e,!0)}peek(e){return get(this,e,!1)}pop(){const e=this[LRU_LIST].tail;return e?(del(this,e),e.value):null}del(e){del(this,this[CACHE].get(e))}load(e){this.reset();const n=Date.now();for(let s=e.length-1;s>=0;s--){const a=e[s],o=a.e||0;if(o===0)this.set(a.k,a.v);else{const g=o-n;g>0&&this.set(a.k,a.v,g)}}}prune(){this[CACHE].forEach((e,n)=>get(this,n,!1))}}const get=(r,e,n)=>{const s=r[CACHE].get(e);if(s){const a=s.value;if(isStale(r,a)){if(del(r,s),!r[ALLOW_STALE])return}else n&&(r[UPDATE_AGE_ON_GET]&&(s.value.now=Date.now()),r[LRU_LIST].unshiftNode(s));return a.value}},isStale=(r,e)=>{if(!e||!e.maxAge&&!r[MAX_AGE])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:r[MAX_AGE]&&n>r[MAX_AGE]},trim=r=>{if(r[LENGTH]>r[MAX])for(let e=r[LRU_LIST].tail;r[LENGTH]>r[MAX]&&e!==null;){const n=e.prev;del(r,e),e=n}},del=(r,e)=>{if(e){const n=e.value;r[DISPOSE]&&r[DISPOSE](n.key,n.value),r[LENGTH]-=n.length,r[CACHE].delete(n.key),r[LRU_LIST].removeNode(e)}};class Entry{constructor(e,n,s,a,o){this.key=e,this.value=n,this.length=s,this.now=a,this.maxAge=o||0}}const forEachStep=(r,e,n,s)=>{let a=n.value;isStale(r,a)&&(del(r,n),r[ALLOW_STALE]||(a=void 0)),a&&e.call(s,a.value,a.key,r)};var lruCache=LRUCache,range$1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range$1;hasRequiredRange=1;class r{constructor(u,l){if(l=s(l),u instanceof r)return u.loose===!!l.loose&&u.includePrerelease===!!l.includePrerelease?u:new r(u.raw,l);if(u instanceof a)return this.raw=u.value,this.set=[[u]],this.format(),this;if(this.options=l,this.loose=!!l.loose,this.includePrerelease=!!l.includePrerelease,this.raw=u,this.set=u.split("||").map(h=>this.parseRange(h.trim())).filter(h=>h.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${u}`);if(this.set.length>1){const h=this.set[0];if(this.set=this.set.filter(d=>!H(d[0])),this.set.length===0)this.set=[h];else if(this.set.length>1){for(const d of this.set)if(d.length===1&&Q(d[0])){this.set=[d];break}}}this.format()}format(){return this.range=this.set.map(u=>u.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(u){u=u.trim();const h=`parseRange:${Object.keys(this.options).join(",")}:${u}`,d=n.get(h);if(d)return d;const y=this.options.loose,C=y?b[B.HYPHENRANGELOOSE]:b[B.HYPHENRANGE];u=u.replace(C,me(this.options.includePrerelease)),o("hyphen replace",u),u=u.replace(b[B.COMPARATORTRIM],N),o("comparator trim",u),u=u.replace(b[B.TILDETRIM],I),u=u.replace(b[B.CARETTRIM],U),u=u.split(/\s+/).join(" ");let m=u.split(" ").map(F=>Dt(F,this.options)).join(" ").split(/\s+/).map(F=>At(F,this.options));y&&(m=m.filter(F=>(o("loose invalid filter",F,this.options),!!F.match(b[B.COMPARATORLOOSE])))),o("range list",m);const f=new Map,v=m.map(F=>new a(F,this.options));for(const F of v){if(H(F))return[F];f.set(F.value,F)}f.size>1&&f.has("")&&f.delete("");const E=[...f.values()];return n.set(h,E),E}intersects(u,l){if(!(u instanceof r))throw new TypeError("a Range is required");return this.set.some(h=>$t(h,l)&&u.set.some(d=>$t(d,l)&&h.every(y=>d.every(C=>y.intersects(C,l)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new g(u,this.options)}catch{return!1}for(let l=0;l<this.set.length;l++)if(A(this.set[l],u,this.options))return!0;return!1}}range$1=r;const e=lruCache,n=new e({max:1e3}),s=parseOptions_1,a=requireComparator(),o=debug_1,g=semver$1,{re:b,t:B,comparatorTrimReplace:N,tildeTrimReplace:I,caretTrimReplace:U}=reExports,H=c=>c.value==="<0.0.0-0",Q=c=>c.value==="",$t=(c,u)=>{let l=!0;const h=c.slice();let d=h.pop();for(;l&&h.length;)l=h.every(y=>d.intersects(y,u)),d=h.pop();return l},Dt=(c,u)=>(o("comp",c,u),c=Mt(c,u),o("caret",c),c=Ut(c,u),o("tildes",c),c=Yt(c,u),o("xrange",c),c=ne(c,u),o("stars",c),c),xt=c=>!c||c.toLowerCase()==="x"||c==="*",Ut=(c,u)=>c.trim().split(/\s+/).map(l=>we(l,u)).join(" "),we=(c,u)=>{const l=u.loose?b[B.TILDELOOSE]:b[B.TILDE];return c.replace(l,(h,d,y,C,m)=>{o("tilde",c,h,d,y,C,m);let f;return xt(d)?f="":xt(y)?f=`>=${d}.0.0 <${+d+1}.0.0-0`:xt(C)?f=`>=${d}.${y}.0 <${d}.${+y+1}.0-0`:m?(o("replaceTilde pr",m),f=`>=${d}.${y}.${C}-${m} <${d}.${+y+1}.0-0`):f=`>=${d}.${y}.${C} <${d}.${+y+1}.0-0`,o("tilde return",f),f})},Mt=(c,u)=>c.trim().split(/\s+/).map(l=>ae(l,u)).join(" "),ae=(c,u)=>{o("caret",c,u);const l=u.loose?b[B.CARETLOOSE]:b[B.CARET],h=u.includePrerelease?"-0":"";return c.replace(l,(d,y,C,m,f)=>{o("caret",c,d,y,C,m,f);let v;return xt(y)?v="":xt(C)?v=`>=${y}.0.0${h} <${+y+1}.0.0-0`:xt(m)?y==="0"?v=`>=${y}.${C}.0${h} <${y}.${+C+1}.0-0`:v=`>=${y}.${C}.0${h} <${+y+1}.0.0-0`:f?(o("replaceCaret pr",f),y==="0"?C==="0"?v=`>=${y}.${C}.${m}-${f} <${y}.${C}.${+m+1}-0`:v=`>=${y}.${C}.${m}-${f} <${y}.${+C+1}.0-0`:v=`>=${y}.${C}.${m}-${f} <${+y+1}.0.0-0`):(o("no pr"),y==="0"?C==="0"?v=`>=${y}.${C}.${m}${h} <${y}.${C}.${+m+1}-0`:v=`>=${y}.${C}.${m}${h} <${y}.${+C+1}.0-0`:v=`>=${y}.${C}.${m} <${+y+1}.0.0-0`),o("caret return",v),v})},Yt=(c,u)=>(o("replaceXRanges",c,u),c.split(/\s+/).map(l=>ve(l,u)).join(" ")),ve=(c,u)=>{c=c.trim();const l=u.loose?b[B.XRANGELOOSE]:b[B.XRANGE];return c.replace(l,(h,d,y,C,m,f)=>{o("xRange",c,h,d,y,C,m,f);const v=xt(y),E=v||xt(C),F=E||xt(m),K=F;return d==="="&&K&&(d=""),f=u.includePrerelease?"-0":"",v?d===">"||d==="<"?h="<0.0.0-0":h="*":d&&K?(E&&(C=0),m=0,d===">"?(d=">=",E?(y=+y+1,C=0,m=0):(C=+C+1,m=0)):d==="<="&&(d="<",E?y=+y+1:C=+C+1),d==="<"&&(f="-0"),h=`${d+y}.${C}.${m}${f}`):E?h=`>=${y}.0.0${f} <${+y+1}.0.0-0`:F&&(h=`>=${y}.${C}.0${f} <${y}.${+C+1}.0-0`),o("xRange return",h),h})},ne=(c,u)=>(o("replaceStars",c,u),c.trim().replace(b[B.STAR],"")),At=(c,u)=>(o("replaceGTE0",c,u),c.trim().replace(b[u.includePrerelease?B.GTE0PRE:B.GTE0],"")),me=c=>(u,l,h,d,y,C,m,f,v,E,F,K,X)=>(xt(h)?l="":xt(d)?l=`>=${h}.0.0${c?"-0":""}`:xt(y)?l=`>=${h}.${d}.0${c?"-0":""}`:C?l=`>=${l}`:l=`>=${l}${c?"-0":""}`,xt(v)?f="":xt(E)?f=`<${+v+1}.0.0-0`:xt(F)?f=`<${v}.${+E+1}.0-0`:K?f=`<=${v}.${E}.${F}-${K}`:c?f=`<${v}.${E}.${+F+1}-0`:f=`<=${f}`,`${l} ${f}`.trim()),A=(c,u,l)=>{for(let h=0;h<c.length;h++)if(!c[h].test(u))return!1;if(u.prerelease.length&&!l.includePrerelease){for(let h=0;h<c.length;h++)if(o(c[h].semver),c[h].semver!==a.ANY&&c[h].semver.prerelease.length>0){const d=c[h].semver;if(d.major===u.major&&d.minor===u.minor&&d.patch===u.patch)return!0}return!1}return!0};return range$1}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(I,U){if(U=n(U),I instanceof e){if(I.loose===!!U.loose)return I;I=I.value}g("comparator",I,U),this.options=U,this.loose=!!U.loose,this.parse(I),this.semver===r?this.value="":this.value=this.operator+this.semver.version,g("comp",this)}parse(I){const U=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],H=I.match(U);if(!H)throw new TypeError(`Invalid comparator: ${I}`);this.operator=H[1]!==void 0?H[1]:"",this.operator==="="&&(this.operator=""),H[2]?this.semver=new b(H[2],this.options.loose):this.semver=r}toString(){return this.value}test(I){if(g("Comparator.test",I,this.options.loose),this.semver===r||I===r)return!0;if(typeof I=="string")try{I=new b(I,this.options)}catch{return!1}return o(I,this.operator,this.semver,this.options)}intersects(I,U){if(!(I instanceof e))throw new TypeError("a Comparator is required");if((!U||typeof U!="object")&&(U={loose:!!U,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new B(I.value,U).test(this.value);if(I.operator==="")return I.value===""?!0:new B(this.value,U).test(I.semver);const H=(this.operator===">="||this.operator===">")&&(I.operator===">="||I.operator===">"),Q=(this.operator==="<="||this.operator==="<")&&(I.operator==="<="||I.operator==="<"),$t=this.semver.version===I.semver.version,Dt=(this.operator===">="||this.operator==="<=")&&(I.operator===">="||I.operator==="<="),xt=o(this.semver,"<",I.semver,U)&&(this.operator===">="||this.operator===">")&&(I.operator==="<="||I.operator==="<"),Ut=o(this.semver,">",I.semver,U)&&(this.operator==="<="||this.operator==="<")&&(I.operator===">="||I.operator===">");return H||Q||$t&&Dt||xt||Ut}}comparator=e;const n=parseOptions_1,{re:s,t:a}=reExports,o=cmp_1,g=debug_1,b=semver$1,B=requireRange();return comparator}const Range$9=requireRange(),satisfies$4=(r,e,n)=>{try{e=new Range$9(e,n)}catch{return!1}return e.test(r)};var satisfies_1=satisfies$4;const Range$8=requireRange(),toComparators$1=(r,e)=>new Range$8(r,e).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" "));var toComparators_1=toComparators$1;const SemVer$4=semver$1,Range$7=requireRange(),maxSatisfying$1=(r,e,n)=>{let s=null,a=null,o=null;try{o=new Range$7(e,n)}catch{return null}return r.forEach(g=>{o.test(g)&&(!s||a.compare(g)===-1)&&(s=g,a=new SemVer$4(s,n))}),s};var maxSatisfying_1=maxSatisfying$1;const SemVer$3=semver$1,Range$6=requireRange(),minSatisfying$1=(r,e,n)=>{let s=null,a=null,o=null;try{o=new Range$6(e,n)}catch{return null}return r.forEach(g=>{o.test(g)&&(!s||a.compare(g)===1)&&(s=g,a=new SemVer$3(s,n))}),s};var minSatisfying_1=minSatisfying$1;const SemVer$2=semver$1,Range$5=requireRange(),gt$2=gt_1,minVersion$1=(r,e)=>{r=new Range$5(r,e);let n=new SemVer$2("0.0.0");if(r.test(n)||(n=new SemVer$2("0.0.0-0"),r.test(n)))return n;n=null;for(let s=0;s<r.set.length;++s){const a=r.set[s];let o=null;a.forEach(g=>{const b=new SemVer$2(g.semver.version);switch(g.operator){case">":b.prerelease.length===0?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!o||gt$2(b,o))&&(o=b);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),o&&(!n||gt$2(n,o))&&(n=o)}return n&&r.test(n)?n:null};var minVersion_1=minVersion$1;const Range$4=requireRange(),validRange$1=(r,e)=>{try{return new Range$4(r,e).range||"*"}catch{return null}};var valid$1=validRange$1;const SemVer$1=semver$1,Comparator$2=requireComparator(),{ANY:ANY$1}=Comparator$2,Range$3=requireRange(),satisfies$3=satisfies_1,gt$1=gt_1,lt$1=lt_1,lte$1=lte_1,gte$1=gte_1,outside$3=(r,e,n,s)=>{r=new SemVer$1(r,s),e=new Range$3(e,s);let a,o,g,b,B;switch(n){case">":a=gt$1,o=lte$1,g=lt$1,b=">",B=">=";break;case"<":a=lt$1,o=gte$1,g=gt$1,b="<",B="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$3(r,e,s))return!1;for(let N=0;N<e.set.length;++N){const I=e.set[N];let U=null,H=null;if(I.forEach(Q=>{Q.semver===ANY$1&&(Q=new Comparator$2(">=0.0.0")),U=U||Q,H=H||Q,a(Q.semver,U.semver,s)?U=Q:g(Q.semver,H.semver,s)&&(H=Q)}),U.operator===b||U.operator===B||(!H.operator||H.operator===b)&&o(r,H.semver))return!1;if(H.operator===B&&g(r,H.semver))return!1}return!0};var outside_1=outside$3;const outside$2=outside_1,gtr$1=(r,e,n)=>outside$2(r,e,">",n);var gtr_1=gtr$1;const outside$1=outside_1,ltr$1=(r,e,n)=>outside$1(r,e,"<",n);var ltr_1=ltr$1;const Range$2=requireRange(),intersects$1=(r,e,n)=>(r=new Range$2(r,n),e=new Range$2(e,n),r.intersects(e));var intersects_1=intersects$1;const satisfies$2=satisfies_1,compare$2=compare_1;var simplify=(r,e,n)=>{const s=[];let a=null,o=null;const g=r.sort((I,U)=>compare$2(I,U,n));for(const I of g)satisfies$2(I,e,n)?(o=I,a||(a=I)):(o&&s.push([a,o]),o=null,a=null);a&&s.push([a,null]);const b=[];for(const[I,U]of s)I===U?b.push(I):!U&&I===g[0]?b.push("*"):U?I===g[0]?b.push(`<=${U}`):b.push(`${I} - ${U}`):b.push(`>=${I}`);const B=b.join(" || "),N=typeof e.raw=="string"?e.raw:String(e);return B.length<N.length?B:e};const Range$1=requireRange(),Comparator$1=requireComparator(),{ANY}=Comparator$1,satisfies$1=satisfies_1,compare$1=compare_1,subset$1=(r,e,n={})=>{if(r===e)return!0;r=new Range$1(r,n),e=new Range$1(e,n);let s=!1;t:for(const a of r.set){for(const o of e.set){const g=simpleSubset(a,o,n);if(s=s||g!==null,g)continue t}if(s)return!1}return!0},simpleSubset=(r,e,n)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===ANY){if(e.length===1&&e[0].semver===ANY)return!0;n.includePrerelease?r=[new Comparator$1(">=0.0.0-0")]:r=[new Comparator$1(">=0.0.0")]}if(e.length===1&&e[0].semver===ANY){if(n.includePrerelease)return!0;e=[new Comparator$1(">=0.0.0")]}const s=new Set;let a,o;for(const Q of r)Q.operator===">"||Q.operator===">="?a=higherGT(a,Q,n):Q.operator==="<"||Q.operator==="<="?o=lowerLT(o,Q,n):s.add(Q.semver);if(s.size>1)return null;let g;if(a&&o){if(g=compare$1(a.semver,o.semver,n),g>0)return null;if(g===0&&(a.operator!==">="||o.operator!=="<="))return null}for(const Q of s){if(a&&!satisfies$1(Q,String(a),n)||o&&!satisfies$1(Q,String(o),n))return null;for(const $t of e)if(!satisfies$1(Q,String($t),n))return!1;return!0}let b,B,N,I,U=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,H=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1;U&&U.prerelease.length===1&&o.operator==="<"&&U.prerelease[0]===0&&(U=!1);for(const Q of e){if(I=I||Q.operator===">"||Q.operator===">=",N=N||Q.operator==="<"||Q.operator==="<=",a){if(H&&Q.semver.prerelease&&Q.semver.prerelease.length&&Q.semver.major===H.major&&Q.semver.minor===H.minor&&Q.semver.patch===H.patch&&(H=!1),Q.operator===">"||Q.operator===">="){if(b=higherGT(a,Q,n),b===Q&&b!==a)return!1}else if(a.operator===">="&&!satisfies$1(a.semver,String(Q),n))return!1}if(o){if(U&&Q.semver.prerelease&&Q.semver.prerelease.length&&Q.semver.major===U.major&&Q.semver.minor===U.minor&&Q.semver.patch===U.patch&&(U=!1),Q.operator==="<"||Q.operator==="<="){if(B=lowerLT(o,Q,n),B===Q&&B!==o)return!1}else if(o.operator==="<="&&!satisfies$1(o.semver,String(Q),n))return!1}if(!Q.operator&&(o||a)&&g!==0)return!1}return!(a&&N&&!o&&g!==0||o&&I&&!a&&g!==0||H||U)},higherGT=(r,e,n)=>{if(!r)return e;const s=compare$1(r.semver,e.semver,n);return s>0?r:s<0||e.operator===">"&&r.operator===">="?e:r},lowerLT=(r,e,n)=>{if(!r)return e;const s=compare$1(r.semver,e.semver,n);return s<0?r:s>0||e.operator==="<"&&r.operator==="<="?e:r};var subset_1=subset$1;const internalRe=reExports,constants=constants$1,SemVer=semver$1,identifiers=identifiers$1,parse=parse_1,valid=valid_1,clean=clean_1,inc=inc_1,diff=diff_1,major=major_1,minor=minor_1,patch=patch_1,prerelease=prerelease_1,compare=compare_1,rcompare=rcompare_1,compareLoose=compareLoose_1,compareBuild=compareBuild_1,sort=sort_1,rsort=rsort_1,gt=gt_1,lt=lt_1,eq=eq_1,neq=neq_1,gte=gte_1,lte=lte_1,cmp=cmp_1,coerce=coerce_1,Comparator=requireComparator(),Range=requireRange(),satisfies=satisfies_1,toComparators=toComparators_1,maxSatisfying=maxSatisfying_1,minSatisfying=minSatisfying_1,minVersion=minVersion_1,validRange=valid$1,outside=outside_1,gtr=gtr_1,ltr=ltr_1,intersects=intersects_1,simplifyRange=simplify,subset=subset_1;var semver={parse,valid,clean,inc,diff,major,minor,patch,prerelease,compare,rcompare,compareLoose,compareBuild,sort,rsort,gt,lt,eq,neq,gte,lte,cmp,coerce,Comparator,Range,satisfies,toComparators,maxSatisfying,minSatisfying,minVersion,validRange,outside,gtr,ltr,intersects,simplifyRange,subset,SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants.SEMVER_SPEC_VERSION,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers};const devices={blue:{id:"blue",productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,blockSize:4*1024,getBlockSize:r=>4*1024},nanoS:{id:"nanoS",productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,blockSize:4*1024,getBlockSize:r=>semver.lt(semver.coerce(r),"2.0.0")?4*1024:2*1024},nanoX:{id:"nanoX",productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,blockSize:4*1024,getBlockSize:r=>4*1024,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}},devicesList=Object.values(devices),ledgerUSBVendorId=11415,identifyUSBProductId=r=>{const e=devicesList.find(a=>a.legacyUsbProductId===r);if(e)return e;const n=r>>8;return devicesList.find(a=>a.productIdMM===n)},bluetoothServices=[],serviceUuidToInfos={};for(let r in devices){const e=devices[r],{bluetoothSpec:n}=e;if(n)for(let s=0;s<n.length;s++){const a=n[s];bluetoothServices.push(a.serviceUuid),serviceUuidToInfos[a.serviceUuid]=serviceUuidToInfos[a.serviceUuid.replace(/-/g,"")]={deviceModel:e,...a}}}const getBluetoothServiceUuids=()=>bluetoothServices,getInfosForServiceUuid=r=>serviceUuidToInfos[r.toLowerCase()];let id=0;const subscribers=[],log=(r,e,n)=>{const s={type:r,id:String(++id),date:new Date};e&&(s.message=e),n&&(s.data=n),dispatch$8(s)},listen=r=>(subscribers.push(r),()=>{const e=subscribers.indexOf(r);e!==-1&&(subscribers[e]=subscribers[subscribers.length-1],subscribers.pop())});function dispatch$8(r){for(let e=0;e<subscribers.length;e++)try{subscribers[e](r)}catch(n){console.error(n)}}typeof window<"u"&&(window.__ledgerLogsListen=listen);const libEs=Object.freeze(Object.defineProperty({__proto__:null,listen,log},Symbol.toStringTag,{value:"Module"})),ledgerDevices$1=[{vendorId:ledgerUSBVendorId}];async function requestLedgerDevice(){return await navigator.usb.requestDevice({filters:ledgerDevices$1})}async function getLedgerDevices$1(){return(await navigator.usb.getDevices()).filter(e=>e.vendorId===ledgerUSBVendorId)}async function getFirstLedgerDevice$1(){const r=await getLedgerDevices$1();return r.length>0?r[0]:requestLedgerDevice()}const isSupported$1=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),configurationValue=1,endpointNumber=3;let TransportWebUSB$1=class extends Transport{constructor(e,n){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.interfaceNumber=void 0,this._disconnectEmitted=!1,this._emitDisconnect=s=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",s))},this.exchange=s=>this.exchangeAtomicImpl(async()=>{const{channel:a,packetSize:o}=this;log("apdu","=> "+s.toString("hex"));const g=default_1(a,o),b=g.makeBlocks(s);for(let I=0;I<b.length;I++)await this.device.transferOut(endpointNumber,b[I]);let B,N;for(;!(B=g.getReducedResult(N));){const I=await this.device.transferIn(endpointNumber,o),U=Buffer.from(I.data.buffer);N=g.reduceResponse(N,U)}return log("apdu","<= "+B.toString("hex")),B}).catch(a=>{throw a&&a.message&&a.message.includes("disconnected")?(this._emitDisconnect(a),new DisconnectedDeviceDuringOperation(a.message)):a}),this.device=e,this.interfaceNumber=n,this.deviceModel=identifyUSBProductId(e.productId)}static async request(){const e=await requestLedgerDevice();return TransportWebUSB$1.open(e)}static async openConnected(){const e=await getLedgerDevices$1();return e.length===0?null:TransportWebUSB$1.open(e[0])}static async open(e){await e.open(),e.configuration===null&&await e.selectConfiguration(configurationValue),await gracefullyResetDevice(e);const n=e.configurations[0].interfaces.find(({alternates:g})=>g.some(b=>b.interfaceClass===255));if(!n)throw new TransportInterfaceNotAvailable("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const s=n.interfaceNumber;try{await e.claimInterface(s)}catch(g){throw await e.close(),new TransportInterfaceNotAvailable(g.message)}const a=new TransportWebUSB$1(e,s),o=g=>{e===g.device&&(navigator.usb.removeEventListener("disconnect",o),a._emitDisconnect(new DisconnectedDevice))};return navigator.usb.addEventListener("disconnect",o),a}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await gracefullyResetDevice(this.device),await this.device.close()}setScrambleKey(){}};TransportWebUSB$1.isSupported=isSupported$1;TransportWebUSB$1.list=getLedgerDevices$1;TransportWebUSB$1.listen=r=>{let e=!1;getFirstLedgerDevice$1().then(s=>{if(!e){const a=identifyUSBProductId(s.productId);r.next({type:"add",descriptor:s,deviceModel:a}),r.complete()}},s=>{window.DOMException&&s instanceof window.DOMException&&s.code===18?r.error(new TransportWebUSBGestureRequired(s.message)):r.error(new TransportOpenUserCancelled(s.message))});function n(){e=!0}return{unsubscribe:n}};async function gracefullyResetDevice(r){try{await r.reset()}catch(e){console.warn(e)}}const TransportWebUSB$2=Object.freeze(Object.defineProperty({__proto__:null,default:TransportWebUSB$1},Symbol.toStringTag,{value:"Module"})),require$$12=getAugmentedNamespace(TransportWebUSB$2),ledgerDevices=[{vendorId:ledgerUSBVendorId}],isSupported=()=>Promise.resolve(!!(global.navigator&&global.navigator.hid)),getHID=()=>{const{hid:r}=navigator;if(!r)throw new TransportError("navigator.hid is not supported","HIDNotSupported");return r};async function requestLedgerDevices(){const r=await getHID().requestDevice({filters:ledgerDevices});return Array.isArray(r)?r:[r]}async function getLedgerDevices(){return(await getHID().getDevices()).filter(e=>e.vendorId===ledgerUSBVendorId)}async function getFirstLedgerDevice(){const r=await getLedgerDevices();return r.length>0?r[0]:(await requestLedgerDevices())[0]}let TransportWebHID$1=class extends Transport{constructor(e){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.inputCallback=void 0,this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(n=>{this.inputCallback=n}),this.onInputReport=n=>{const s=Buffer.from(n.data.buffer);this.inputCallback?(this.inputCallback(s),this.inputCallback=null):this.inputs.push(s)},this._disconnectEmitted=!1,this._emitDisconnect=n=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",n))},this.exchange=n=>this.exchangeAtomicImpl(async()=>{const{channel:s,packetSize:a}=this;log("apdu","=> "+n.toString("hex"));const o=default_1(s,a),g=o.makeBlocks(n);for(let N=0;N<g.length;N++)await this.device.sendReport(0,g[N]);let b,B;for(;!(b=o.getReducedResult(B));){const N=await this.read();B=o.reduceResponse(B,N)}return log("apdu","<= "+b.toString("hex")),b}).catch(s=>{throw s&&s.message&&s.message.includes("write")?(this._emitDisconnect(s),new DisconnectedDeviceDuringOperation(s.message)):s}),this.device=e,this.deviceModel=identifyUSBProductId(e.productId),e.addEventListener("inputreport",this.onInputReport)}static async request(){const[e]=await requestLedgerDevices();return TransportWebHID$1.open(e)}static async openConnected(){const e=await getLedgerDevices();return e.length===0?null:TransportWebHID$1.open(e[0])}static async open(e){await e.open();const n=new TransportWebHID$1(e),s=a=>{e===a.device&&(getHID().removeEventListener("disconnect",s),n._emitDisconnect(new DisconnectedDevice))};return getHID().addEventListener("disconnect",s),n}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}};TransportWebHID$1.isSupported=isSupported;TransportWebHID$1.list=getLedgerDevices;TransportWebHID$1.listen=r=>{let e=!1;getFirstLedgerDevice().then(s=>{if(!s)r.error(new TransportOpenUserCancelled("Access denied to use Ledger device"));else if(!e){const a=identifyUSBProductId(s.productId);r.next({type:"add",descriptor:s,deviceModel:a}),r.complete()}},s=>{r.error(new TransportOpenUserCancelled(s.message))});function n(){e=!0}return{unsubscribe:n}};const TransportWebHID$2=Object.freeze(Object.defineProperty({__proto__:null,default:TransportWebHID$1},Symbol.toStringTag,{value:"Module"})),require$$13=getAugmentedNamespace(TransportWebHID$2);var sendAPDU$1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a])},extendStatics(r,e)};function __extends(r,e){extendStatics(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function isFunction(r){return typeof r=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var e=new Error;""+e.stack}_enable_super_gross_mode_that_will_cause_bad_things=r},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(r){setTimeout(function(){throw r},0)}var empty$1={closed:!0,next:function(r){},error:function(r){if(config.useDeprecatedSynchronousErrorHandling)throw r;hostReportError(r)},complete:function(){}},isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function isObject(r){return r!==null&&typeof r=="object"}var UnsubscriptionErrorImpl=function(){function r(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return r.prototype=Object.create(Error.prototype),r}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function r(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,s=n._parentOrParents,a=n._ctorUnsubscribe,o=n._unsubscribe,g=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof r)s.remove(this);else if(s!==null)for(var b=0;b<s.length;++b){var B=s[b];B.remove(this)}if(isFunction(o)){a&&(this._unsubscribe=void 0);try{o.call(this)}catch(U){e=U instanceof UnsubscriptionError?flattenUnsubscriptionErrors(U.errors):[U]}}if(isArray(g))for(var b=-1,N=g.length;++b<N;){var I=g[b];if(isObject(I))try{I.unsubscribe()}catch(H){e=e||[],H instanceof UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(H.errors)):e.push(H)}}if(e)throw new UnsubscriptionError(e)}},r.prototype.add=function(e){var n=e;if(!e)return r.EMPTY;switch(typeof e){case"function":n=new r(e);case"object":if(n===this||n.closed||typeof n.unsubscribe!="function")return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof r)){var s=n;n=new r,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var a=n._parentOrParents;if(a===null)n._parentOrParents=this;else if(a instanceof r){if(a===this)return n;n._parentOrParents=[a,this]}else if(a.indexOf(this)===-1)a.push(this);else return n;var o=this._subscriptions;return o===null?this._subscriptions=[n]:o.push(n),n},r.prototype.remove=function(e){var n=this._subscriptions;if(n){var s=n.indexOf(e);s!==-1&&n.splice(s,1)}},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();function flattenUnsubscriptionErrors(r){return r.reduce(function(e,n){return e.concat(n instanceof UnsubscriptionError?n.errors:n)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=empty$1;break;case 1:if(!n){o.destination=empty$1;break}if(typeof n=="object"){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,n,s,a);break}return o}return e.prototype[rxSubscriber]=function(){return this},e.create=function(n,s,a){var o=new e(n,s,a);return o.syncErrorThrowable=!1,o},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var n=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this},e}(Subscription),SafeSubscriber=function(r){__extends(e,r);function e(n,s,a,o){var g=r.call(this)||this;g._parentSubscriber=n;var b,B=g;return isFunction(s)?b=s:s&&(b=s.next,a=s.error,o=s.complete,s!==empty$1&&(B=Object.create(s),isFunction(B.unsubscribe)&&g.add(B.unsubscribe.bind(B)),B.unsubscribe=g.unsubscribe.bind(g))),g._context=B,g._next=b,g._error=a,g._complete=o,g}return e.prototype.next=function(n){if(!this.isStopped&&this._next){var s=this._parentSubscriber;!config.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?this.__tryOrUnsub(this._next,n):this.__tryOrSetError(s,this._next,n)&&this.unsubscribe()}},e.prototype.error=function(n){if(!this.isStopped){var s=this._parentSubscriber,a=config.useDeprecatedSynchronousErrorHandling;if(this._error)!a||!s.syncErrorThrowable?(this.__tryOrUnsub(this._error,n),this.unsubscribe()):(this.__tryOrSetError(s,this._error,n),this.unsubscribe());else if(s.syncErrorThrowable)a?(s.syncErrorValue=n,s.syncErrorThrown=!0):hostReportError(n),this.unsubscribe();else{if(this.unsubscribe(),a)throw n;hostReportError(n)}}},e.prototype.complete=function(){var n=this;if(!this.isStopped){var s=this._parentSubscriber;if(this._complete){var a=function(){return n._complete.call(n._context)};!config.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?(this.__tryOrUnsub(a),this.unsubscribe()):(this.__tryOrSetError(s,a),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(n,s){try{n.call(this._context,s)}catch(a){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)}},e.prototype.__tryOrSetError=function(n,s,a){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{s.call(this._context,a)}catch(o){return config.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=o,n.syncErrorThrown=!0,!0):(hostReportError(o),!0)}return!1},e.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},e}(Subscriber);function canReportError(r){for(;r;){var e=r,n=e.closed,s=e.destination,a=e.isStopped;if(n||a)return!1;s&&s instanceof Subscriber?r=s:r=null}return!0}function toSubscriber(r,e,n){if(r){if(r instanceof Subscriber)return r;if(r[rxSubscriber])return r[rxSubscriber]()}return!r&&!e&&!n?new Subscriber(empty$1):new Subscriber(r,e,n)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(r){return r}function pipe(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return pipeFromArray(r)}function pipeFromArray(r){return r.length===0?identity:r.length===1?r[0]:function(n){return r.reduce(function(s,a){return a(s)},n)}}var Observable=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var n=new r;return n.source=this,n.operator=e,n},r.prototype.subscribe=function(e,n,s){var a=this.operator,o=toSubscriber(e,n,s);if(a?o.add(a.call(o,this.source)):o.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),canReportError(e)?e.error(n):console.warn(n)}},r.prototype.forEach=function(e,n){var s=this;return n=getPromiseCtor(n),new n(function(a,o){var g;g=s.subscribe(function(b){try{e(b)}catch(B){o(B),g&&g.unsubscribe()}},o,a)})},r.prototype._subscribe=function(e){var n=this.source;return n&&n.subscribe(e)},r.prototype[observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length===0?this:pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var n=this;return e=getPromiseCtor(e),new e(function(s,a){var o;n.subscribe(function(g){return o=g},function(g){return a(g)},function(){return s(o)})})},r.create=function(e){return new r(e)},r}();function getPromiseCtor(r){if(r||(r=config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var ObjectUnsubscribedErrorImpl=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(r){__extends(e,r);function e(n,s){var a=r.call(this)||this;return a.subject=n,a.subscriber=s,a.closed=!1,a}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var n=this.subject,s=n.observers;if(this.subject=null,!(!s||s.length===0||n.isStopped||n.closed)){var a=s.indexOf(this.subscriber);a!==-1&&s.splice(a,1)}}},e}(Subscription),SubjectSubscriber=function(r){__extends(e,r);function e(n){var s=r.call(this,n)||this;return s.destination=n,s}return e}(Subscriber),Subject=function(r){__extends(e,r);function e(){var n=r.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},e.prototype.lift=function(n){var s=new AnonymousSubject(this,this);return s.operator=n,s},e.prototype.next=function(n){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var s=this.observers,a=s.length,o=s.slice(),g=0;g<a;g++)o[g].next(n)},e.prototype.error=function(n){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=n,this.isStopped=!0;for(var s=this.observers,a=s.length,o=s.slice(),g=0;g<a;g++)o[g].error(n);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var n=this.observers,s=n.length,a=n.slice(),o=0;o<s;o++)a[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(n){if(this.closed)throw new ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(n.error(this.thrownError),Subscription.EMPTY):this.isStopped?(n.complete(),Subscription.EMPTY):(this.observers.push(n),new SubjectSubscription(this,n))},e.prototype.asObservable=function(){var n=new Observable;return n.source=this,n},e.create=function(n,s){return new AnonymousSubject(n,s)},e}(Observable),AnonymousSubject=function(r){__extends(e,r);function e(n,s){var a=r.call(this)||this;return a.destination=n,a.source=s,a}return e.prototype.next=function(n){var s=this.destination;s&&s.next&&s.next(n)},e.prototype.error=function(n){var s=this.destination;s&&s.error&&this.destination.error(n)},e.prototype.complete=function(){var n=this.destination;n&&n.complete&&this.destination.complete()},e.prototype._subscribe=function(n){var s=this.source;return s?this.source.subscribe(n):Subscription.EMPTY},e}(Subject);function refCount(){return function(e){return e.lift(new RefCountOperator(e))}}var RefCountOperator=function(){function r(e){this.connectable=e}return r.prototype.call=function(e,n){var s=this.connectable;s._refCount++;var a=new RefCountSubscriber(e,s),o=n.subscribe(a);return a.closed||(a.connection=s.connect()),o},r}(),RefCountSubscriber=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n)||this;return a.connectable=s,a}return e.prototype._unsubscribe=function(){var n=this.connectable;if(!n){this.connection=null;return}this.connectable=null;var s=n._refCount;if(s<=0){this.connection=null;return}if(n._refCount=s-1,s>1){this.connection=null;return}var a=this.connection,o=n._connection;this.connection=null,o&&(!a||o===a)&&o.unsubscribe()},e}(Subscriber),ConnectableObservable=function(r){__extends(e,r);function e(n,s){var a=r.call(this)||this;return a.source=n,a.subjectFactory=s,a._refCount=0,a._isComplete=!1,a}return e.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},e.prototype.getSubject=function(){var n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var n=this._connection;return n||(this._isComplete=!1,n=this._connection=new Subscription,n.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),n.closed&&(this._connection=null,n=Subscription.EMPTY)),n},e.prototype.refCount=function(){return refCount()(this)},e}(Observable),connectableObservableDescriptor=function(){var r=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}(),ConnectableSubscriber=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n)||this;return a.connectable=s,a}return e.prototype._error=function(n){this._unsubscribe(),r.prototype._error.call(this,n)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var n=this.connectable;if(n){this.connectable=null;var s=n._connection;n._refCount=0,n._subject=null,n._connection=null,s&&s.unsubscribe()}},e}(SubjectSubscriber),GroupedObservable=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this)||this;return o.key=n,o.groupSubject=s,o.refCountSubscription=a,o}return e.prototype._subscribe=function(n){var s=new Subscription,a=this,o=a.refCountSubscription,g=a.groupSubject;return o&&!o.closed&&s.add(new InnerRefCountSubscription(o)),s.add(g.subscribe(n)),s},e}(Observable),InnerRefCountSubscription=function(r){__extends(e,r);function e(n){var s=r.call(this)||this;return s.parent=n,n.count++,s}return e.prototype.unsubscribe=function(){var n=this.parent;!n.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),n.count-=1,n.count===0&&n.attemptedToUnsubscribe&&n.unsubscribe())},e}(Subscription),BehaviorSubject=function(r){__extends(e,r);function e(n){var s=r.call(this)||this;return s._value=n,s}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(n){var s=r.prototype._subscribe.call(this,n);return s&&!s.closed&&n.next(this._value),s},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},e.prototype.next=function(n){r.prototype.next.call(this,this._value=n)},e}(Subject),Action=function(r){__extends(e,r);function e(n,s){return r.call(this)||this}return e.prototype.schedule=function(n,s){return this},e}(Subscription),AsyncAction=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n,s)||this;return a.scheduler=n,a.work=s,a.pending=!1,a}return e.prototype.schedule=function(n,s){if(s===void 0&&(s=0),this.closed)return this;this.state=n;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(o,this.id,s),this},e.prototype.requestAsyncId=function(n,s,a){return a===void 0&&(a=0),setInterval(n.flush.bind(n,this),a)},e.prototype.recycleAsyncId=function(n,s,a){if(a===void 0&&(a=0),a!==null&&this.delay===a&&this.pending===!1)return s;clearInterval(s)},e.prototype.execute=function(n,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(n,s);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,s){var a=!1,o=void 0;try{this.work(n)}catch(g){a=!0,o=!!g&&g||new Error(g)}if(a)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var n=this.id,s=this.scheduler,a=s.actions,o=a.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&a.splice(o,1),n!=null&&(this.id=this.recycleAsyncId(s,n,null)),this.delay=null},e}(Action),QueueAction=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n,s)||this;return a.scheduler=n,a.work=s,a}return e.prototype.schedule=function(n,s){return s===void 0&&(s=0),s>0?r.prototype.schedule.call(this,n,s):(this.delay=s,this.state=n,this.scheduler.flush(this),this)},e.prototype.execute=function(n,s){return s>0||this.closed?r.prototype.execute.call(this,n,s):this._execute(n,s)},e.prototype.requestAsyncId=function(n,s,a){return a===void 0&&(a=0),a!==null&&a>0||a===null&&this.delay>0?r.prototype.requestAsyncId.call(this,n,s,a):n.flush(this)},e}(AsyncAction),Scheduler=function(){function r(e,n){n===void 0&&(n=r.now),this.SchedulerAction=e,this.now=n}return r.prototype.schedule=function(e,n,s){return n===void 0&&(n=0),new this.SchedulerAction(this,e).schedule(s,n)},r.now=function(){return Date.now()},r}(),AsyncScheduler=function(r){__extends(e,r);function e(n,s){s===void 0&&(s=Scheduler.now);var a=r.call(this,n,function(){return e.delegate&&e.delegate!==a?e.delegate.now():s()})||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return e.prototype.schedule=function(n,s,a){return s===void 0&&(s=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,s,a):r.prototype.schedule.call(this,n,s,a)},e.prototype.flush=function(n){var s=this.actions;if(this.active){s.push(n);return}var a;this.active=!0;do if(a=n.execute(n.state,n.delay))break;while(n=s.shift());if(this.active=!1,a){for(;n=s.shift();)n.unsubscribe();throw a}},e}(Scheduler),QueueScheduler=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,EMPTY=new Observable(function(r){return r.complete()});function empty(r){return r?emptyScheduled(r):EMPTY}function emptyScheduled(r){return new Observable(function(e){return r.schedule(function(){return e.complete()})})}function isScheduler(r){return r&&typeof r.schedule=="function"}var subscribeToArray=function(r){return function(e){for(var n=0,s=r.length;n<s&&!e.closed;n++)e.next(r[n]);e.complete()}};function scheduleArray(r,e){return new Observable(function(n){var s=new Subscription,a=0;return s.add(e.schedule(function(){if(a===r.length){n.complete();return}n.next(r[a++]),n.closed||s.add(this.schedule())})),s})}function fromArray(r,e){return e?scheduleArray(r,e):new Observable(subscribeToArray(r))}function of(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=r[r.length-1];return isScheduler(n)?(r.pop(),scheduleArray(r,n)):fromArray(r)}function throwError(r,e){return e?new Observable(function(n){return e.schedule(dispatch$7,0,{error:r,subscriber:n})}):new Observable(function(n){return n.error(r)})}function dispatch$7(r){var e=r.error,n=r.subscriber;n.error(e)}var NotificationKind;NotificationKind||(NotificationKind={});var Notification=function(){function r(e,n,s){this.kind=e,this.value=n,this.error=s,this.hasValue=e==="N"}return r.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},r.prototype.do=function(e,n,s){var a=this.kind;switch(a){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return s&&s()}},r.prototype.accept=function(e,n,s){return e&&typeof e.next=="function"?this.observe(e):this.do(e,n,s)},r.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty()}throw new Error("unexpected notification kind value")},r.createNext=function(e){return typeof e<"u"?new r("N",e):r.undefinedValueNotification},r.createError=function(e){return new r("E",void 0,e)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}(),ObserveOnSubscriber=function(r){__extends(e,r);function e(n,s,a){a===void 0&&(a=0);var o=r.call(this,n)||this;return o.scheduler=s,o.delay=a,o}return e.dispatch=function(n){var s=n.notification,a=n.destination;s.observe(a),this.unsubscribe()},e.prototype.scheduleMessage=function(n){var s=this.destination;s.add(this.scheduler.schedule(e.dispatch,this.delay,new ObserveOnMessage(n,this.destination)))},e.prototype._next=function(n){this.scheduleMessage(Notification.createNext(n))},e.prototype._error=function(n){this.scheduleMessage(Notification.createError(n)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},e}(Subscriber),ObserveOnMessage=function(){function r(e,n){this.notification=e,this.destination=n}return r}(),ReplaySubject=function(r){__extends(e,r);function e(n,s,a){n===void 0&&(n=Number.POSITIVE_INFINITY),s===void 0&&(s=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=a,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=n<1?1:n,o._windowTime=s<1?1:s,s===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return e.prototype.nextInfiniteTimeWindow=function(n){if(!this.isStopped){var s=this._events;s.push(n),s.length>this._bufferSize&&s.shift()}r.prototype.next.call(this,n)},e.prototype.nextTimeWindow=function(n){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),n)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,n)},e.prototype._subscribe=function(n){var s=this._infiniteTimeWindow,a=s?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,g=a.length,b;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?b=Subscription.EMPTY:(this.observers.push(n),b=new SubjectSubscription(this,n)),o&&n.add(n=new ObserveOnSubscriber(n,o)),s)for(var B=0;B<g&&!n.closed;B++)n.next(a[B]);else for(var B=0;B<g&&!n.closed;B++)n.next(a[B].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),b},e.prototype._getNow=function(){return(this.scheduler||queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var n=this._getNow(),s=this._bufferSize,a=this._windowTime,o=this._events,g=o.length,b=0;b<g&&!(n-o[b].time<a);)b++;return g>s&&(b=Math.max(b,g-s)),b>0&&o.splice(0,b),o},e}(Subject),ReplayEvent=function(){function r(e,n){this.time=e,this.value=n}return r}(),AsyncSubject=function(r){__extends(e,r);function e(){var n=r!==null&&r.apply(this,arguments)||this;return n.value=null,n.hasNext=!1,n.hasCompleted=!1,n}return e.prototype._subscribe=function(n){return this.hasError?(n.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(n.next(this.value),n.complete(),Subscription.EMPTY):r.prototype._subscribe.call(this,n)},e.prototype.next=function(n){this.hasCompleted||(this.value=n,this.hasNext=!0)},e.prototype.error=function(n){this.hasCompleted||r.prototype.error.call(this,n)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},e}(Subject),nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(r){return r in activeHandles?(delete activeHandles[r],!0):!1}var Immediate={setImmediate:function(r){var e=nextHandle++;return activeHandles[e]=!0,RESOLVED.then(function(){return findAndClearHandle(e)&&r()}),e},clearImmediate:function(r){findAndClearHandle(r)}},AsapAction=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n,s)||this;return a.scheduler=n,a.work=s,a}return e.prototype.requestAsyncId=function(n,s,a){return a===void 0&&(a=0),a!==null&&a>0?r.prototype.requestAsyncId.call(this,n,s,a):(n.actions.push(this),n.scheduled||(n.scheduled=Immediate.setImmediate(n.flush.bind(n,null))))},e.prototype.recycleAsyncId=function(n,s,a){if(a===void 0&&(a=0),a!==null&&a>0||a===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,n,s,a);n.actions.length===0&&(Immediate.clearImmediate(s),n.scheduled=void 0)},e}(AsyncAction),AsapScheduler=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(n){this.active=!0,this.scheduled=void 0;var s=this.actions,a,o=-1,g=s.length;n=n||s.shift();do if(a=n.execute(n.state,n.delay))break;while(++o<g&&(n=s.shift()));if(this.active=!1,a){for(;++o<g&&(n=s.shift());)n.unsubscribe();throw a}},e}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler,AnimationFrameAction=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n,s)||this;return a.scheduler=n,a.work=s,a}return e.prototype.requestAsyncId=function(n,s,a){return a===void 0&&(a=0),a!==null&&a>0?r.prototype.requestAsyncId.call(this,n,s,a):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(function(){return n.flush(null)})))},e.prototype.recycleAsyncId=function(n,s,a){if(a===void 0&&(a=0),a!==null&&a>0||a===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,n,s,a);n.actions.length===0&&(cancelAnimationFrame(s),n.scheduled=void 0)},e}(AsyncAction),AnimationFrameScheduler=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(n){this.active=!0,this.scheduled=void 0;var s=this.actions,a,o=-1,g=s.length;n=n||s.shift();do if(a=n.execute(n.state,n.delay))break;while(++o<g&&(n=s.shift()));if(this.active=!1,a){for(;++o<g&&(n=s.shift());)n.unsubscribe();throw a}},e}(AsyncScheduler),animationFrameScheduler=new AnimationFrameScheduler(AnimationFrameAction),animationFrame=animationFrameScheduler,VirtualTimeScheduler=function(r){__extends(e,r);function e(n,s){n===void 0&&(n=VirtualAction),s===void 0&&(s=Number.POSITIVE_INFINITY);var a=r.call(this,n,function(){return a.frame})||this;return a.maxFrames=s,a.frame=0,a.index=-1,a}return e.prototype.flush=function(){for(var n=this,s=n.actions,a=n.maxFrames,o,g;(g=s[0])&&g.delay<=a&&(s.shift(),this.frame=g.delay,!(o=g.execute(g.state,g.delay))););if(o){for(;g=s.shift();)g.unsubscribe();throw o}},e.frameTimeFactor=10,e}(AsyncScheduler),VirtualAction=function(r){__extends(e,r);function e(n,s,a){a===void 0&&(a=n.index+=1);var o=r.call(this,n,s)||this;return o.scheduler=n,o.work=s,o.index=a,o.active=!0,o.index=n.index=a,o}return e.prototype.schedule=function(n,s){if(s===void 0&&(s=0),!this.id)return r.prototype.schedule.call(this,n,s);this.active=!1;var a=new e(this.scheduler,this.work);return this.add(a),a.schedule(n,s)},e.prototype.requestAsyncId=function(n,s,a){a===void 0&&(a=0),this.delay=n.frame+a;var o=n.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(n,s,a){},e.prototype._execute=function(n,s){if(this.active===!0)return r.prototype._execute.call(this,n,s)},e.sortActions=function(n,s){return n.delay===s.delay?n.index===s.index?0:n.index>s.index?1:-1:n.delay>s.delay?1:-1},e}(AsyncAction);function noop(){}function isObservable(r){return!!r&&(r instanceof Observable||typeof r.lift=="function"&&typeof r.subscribe=="function")}var ArgumentOutOfRangeErrorImpl=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl,EmptyErrorImpl=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),EmptyError=EmptyErrorImpl,TimeoutErrorImpl=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),TimeoutError=TimeoutErrorImpl;function map(r,e){return function(s){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return s.lift(new MapOperator(r,e))}}var MapOperator=function(){function r(e,n){this.project=e,this.thisArg=n}return r.prototype.call=function(e,n){return n.subscribe(new MapSubscriber(e,this.project,this.thisArg))},r}(),MapSubscriber=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this,n)||this;return o.project=s,o.count=0,o.thisArg=a||o,o}return e.prototype._next=function(n){var s;try{s=this.project.call(this.thisArg,n,this.count++)}catch(a){this.destination.error(a);return}this.destination.next(s)},e}(Subscriber);function bindCallback(r,e,n){if(e)if(isScheduler(e))n=e;else return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return bindCallback(r,n).apply(void 0,s).pipe(map(function(o){return isArray(o)?e.apply(void 0,o):e(o)}))};return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=this,g,b={context:o,subject:g,callbackFunc:r,scheduler:n};return new Observable(function(B){if(n){var I={args:s,subscriber:B,params:b};return n.schedule(dispatch$6,0,I)}else{if(!g){g=new AsyncSubject;var N=function(){for(var U=[],H=0;H<arguments.length;H++)U[H]=arguments[H];g.next(U.length<=1?U[0]:U),g.complete()};try{r.apply(o,s.concat([N]))}catch(U){canReportError(g)?g.error(U):console.warn(U)}}return g.subscribe(B)}})}}function dispatch$6(r){var e=this,n=r.args,s=r.subscriber,a=r.params,o=a.callbackFunc,g=a.context,b=a.scheduler,B=a.subject;if(!B){B=a.subject=new AsyncSubject;var N=function(){for(var I=[],U=0;U<arguments.length;U++)I[U]=arguments[U];var H=I.length<=1?I[0]:I;e.add(b.schedule(dispatchNext$1,0,{value:H,subject:B}))};try{o.apply(g,n.concat([N]))}catch(I){B.error(I)}}this.add(B.subscribe(s))}function dispatchNext$1(r){var e=r.value,n=r.subject;n.next(e),n.complete()}function bindNodeCallback(r,e,n){if(e)if(isScheduler(e))n=e;else return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return bindNodeCallback(r,n).apply(void 0,s).pipe(map(function(o){return isArray(o)?e.apply(void 0,o):e(o)}))};return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o={subject:void 0,args:s,callbackFunc:r,scheduler:n,context:this};return new Observable(function(g){var b=o.context,B=o.subject;if(n)return n.schedule(dispatch$5,0,{params:o,subscriber:g,context:b});if(!B){B=o.subject=new AsyncSubject;var N=function(){for(var I=[],U=0;U<arguments.length;U++)I[U]=arguments[U];var H=I.shift();if(H){B.error(H);return}B.next(I.length<=1?I[0]:I),B.complete()};try{r.apply(b,s.concat([N]))}catch(I){canReportError(B)?B.error(I):console.warn(I)}}return B.subscribe(g)})}}function dispatch$5(r){var e=this,n=r.params,s=r.subscriber,a=r.context,o=n.callbackFunc,g=n.args,b=n.scheduler,B=n.subject;if(!B){B=n.subject=new AsyncSubject;var N=function(){for(var I=[],U=0;U<arguments.length;U++)I[U]=arguments[U];var H=I.shift();if(H)e.add(b.schedule(dispatchError,0,{err:H,subject:B}));else{var Q=I.length<=1?I[0]:I;e.add(b.schedule(dispatchNext,0,{value:Q,subject:B}))}};try{o.apply(a,g.concat([N]))}catch(I){this.add(b.schedule(dispatchError,0,{err:I,subject:B}))}}this.add(B.subscribe(s))}function dispatchNext(r){var e=r.value,n=r.subject;n.next(e),n.complete()}function dispatchError(r){var e=r.err,n=r.subject;n.error(e)}var OuterSubscriber=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(n,s,a,o,g){this.destination.next(s)},e.prototype.notifyError=function(n,s){this.destination.error(n)},e.prototype.notifyComplete=function(n){this.destination.complete()},e}(Subscriber),InnerSubscriber=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this)||this;return o.parent=n,o.outerValue=s,o.outerIndex=a,o.index=0,o}return e.prototype._next=function(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)},e.prototype._error=function(n){this.parent.notifyError(n,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Subscriber),subscribeToPromise=function(r){return function(e){return r.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,hostReportError),e}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(r){return function(e){var n=r[iterator]();do{var s=void 0;try{s=n.next()}catch(a){return e.error(a),e}if(s.done){e.complete();break}if(e.next(s.value),e.closed)break}while(!0);return typeof n.return=="function"&&e.add(function(){n.return&&n.return()}),e}},subscribeToObservable=function(r){return function(e){var n=r[observable]();if(typeof n.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function isPromise(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var subscribeTo=function(r){if(r&&typeof r[observable]=="function")return subscribeToObservable(r);if(isArrayLike(r))return subscribeToArray(r);if(isPromise(r))return subscribeToPromise(r);if(r&&typeof r[iterator]=="function")return subscribeToIterable(r);var e=isObject(r)?"an invalid object":"'"+r+"'",n="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)};function subscribeToResult(r,e,n,s,a){if(a===void 0&&(a=new InnerSubscriber(r,n,s)),!a.closed)return e instanceof Observable?e.subscribe(a):subscribeTo(e)(a)}var NONE={};function combineLatest(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=void 0,s=void 0;return isScheduler(r[r.length-1])&&(s=r.pop()),typeof r[r.length-1]=="function"&&(n=r.pop()),r.length===1&&isArray(r[0])&&(r=r[0]),fromArray(r,s).lift(new CombineLatestOperator(n))}var CombineLatestOperator=function(){function r(e){this.resultSelector=e}return r.prototype.call=function(e,n){return n.subscribe(new CombineLatestSubscriber(e,this.resultSelector))},r}(),CombineLatestSubscriber=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n)||this;return a.resultSelector=s,a.active=0,a.values=[],a.observables=[],a}return e.prototype._next=function(n){this.values.push(NONE),this.observables.push(n)},e.prototype._complete=function(){var n=this.observables,s=n.length;if(s===0)this.destination.complete();else{this.active=s,this.toRespond=s;for(var a=0;a<s;a++){var o=n[a];this.add(subscribeToResult(this,o,void 0,a))}}},e.prototype.notifyComplete=function(n){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(n,s,a){var o=this.values,g=o[a],b=this.toRespond?g===NONE?--this.toRespond:this.toRespond:0;o[a]=s,b===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(n){var s;try{s=this.resultSelector.apply(this,n)}catch(a){this.destination.error(a);return}this.destination.next(s)},e}(OuterSubscriber);function scheduleObservable(r,e){return new Observable(function(n){var s=new Subscription;return s.add(e.schedule(function(){var a=r[observable]();s.add(a.subscribe({next:function(o){s.add(e.schedule(function(){return n.next(o)}))},error:function(o){s.add(e.schedule(function(){return n.error(o)}))},complete:function(){s.add(e.schedule(function(){return n.complete()}))}}))})),s})}function schedulePromise(r,e){return new Observable(function(n){var s=new Subscription;return s.add(e.schedule(function(){return r.then(function(a){s.add(e.schedule(function(){n.next(a),s.add(e.schedule(function(){return n.complete()}))}))},function(a){s.add(e.schedule(function(){return n.error(a)}))})})),s})}function scheduleIterable(r,e){if(!r)throw new Error("Iterable cannot be null");return new Observable(function(n){var s=new Subscription,a;return s.add(function(){a&&typeof a.return=="function"&&a.return()}),s.add(e.schedule(function(){a=r[iterator](),s.add(e.schedule(function(){if(!n.closed){var o,g;try{var b=a.next();o=b.value,g=b.done}catch(B){n.error(B);return}g?n.complete():(n.next(o),this.schedule())}}))})),s})}function isInteropObservable(r){return r&&typeof r[observable]=="function"}function isIterable(r){return r&&typeof r[iterator]=="function"}function scheduled(r,e){if(r!=null){if(isInteropObservable(r))return scheduleObservable(r,e);if(isPromise(r))return schedulePromise(r,e);if(isArrayLike(r))return scheduleArray(r,e);if(isIterable(r)||typeof r=="string")return scheduleIterable(r,e)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}function from(r,e){return e?scheduled(r,e):r instanceof Observable?r:new Observable(subscribeTo(r))}var SimpleInnerSubscriber=function(r){__extends(e,r);function e(n){var s=r.call(this)||this;return s.parent=n,s}return e.prototype._next=function(n){this.parent.notifyNext(n)},e.prototype._error=function(n){this.parent.notifyError(n),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Subscriber),SimpleOuterSubscriber=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(n){this.destination.next(n)},e.prototype.notifyError=function(n){this.destination.error(n)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Subscriber);function innerSubscribe(r,e){if(!e.closed){if(r instanceof Observable)return r.subscribe(e);var n;try{n=subscribeTo(r)(e)}catch(s){e.error(s)}return n}}function mergeMap(r,e,n){return n===void 0&&(n=Number.POSITIVE_INFINITY),typeof e=="function"?function(s){return s.pipe(mergeMap(function(a,o){return from(r(a,o)).pipe(map(function(g,b){return e(a,g,o,b)}))},n))}:(typeof e=="number"&&(n=e),function(s){return s.lift(new MergeMapOperator(r,n))})}var MergeMapOperator=function(){function r(e,n){n===void 0&&(n=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=n}return r.prototype.call=function(e,n){return n.subscribe(new MergeMapSubscriber(e,this.project,this.concurrent))},r}(),MergeMapSubscriber=function(r){__extends(e,r);function e(n,s,a){a===void 0&&(a=Number.POSITIVE_INFINITY);var o=r.call(this,n)||this;return o.project=s,o.concurrent=a,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)},e.prototype._tryNext=function(n){var s,a=this.index++;try{s=this.project(n,a)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(s)},e.prototype._innerSub=function(n){var s=new SimpleInnerSubscriber(this),a=this.destination;a.add(s);var o=innerSubscribe(n,s);o!==s&&a.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(n){this.destination.next(n)},e.prototype.notifyComplete=function(){var n=this.buffer;this.active--,n.length>0?this._next(n.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(SimpleOuterSubscriber);function mergeAll(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),mergeMap(identity,r)}function concatAll(){return mergeAll(1)}function concat(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return concatAll()(of.apply(void 0,r))}function defer(r){return new Observable(function(e){var n;try{n=r()}catch(a){e.error(a);return}var s=n?from(n):empty();return s.subscribe(e)})}function forkJoin(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===1){var n=r[0];if(isArray(n))return forkJoinInternal(n,null);if(isObject(n)&&Object.getPrototypeOf(n)===Object.prototype){var s=Object.keys(n);return forkJoinInternal(s.map(function(o){return n[o]}),s)}}if(typeof r[r.length-1]=="function"){var a=r.pop();return r=r.length===1&&isArray(r[0])?r[0]:r,forkJoinInternal(r,null).pipe(map(function(o){return a.apply(void 0,o)}))}return forkJoinInternal(r,null)}function forkJoinInternal(r,e){return new Observable(function(n){var s=r.length;if(s===0){n.complete();return}for(var a=new Array(s),o=0,g=0,b=function(N){var I=from(r[N]),U=!1;n.add(I.subscribe({next:function(H){U||(U=!0,g++),a[N]=H},error:function(H){return n.error(H)},complete:function(){o++,(o===s||!U)&&(g===s&&n.next(e?e.reduce(function(H,Q,$t){return H[Q]=a[$t],H},{}):a),n.complete())}}))},B=0;B<s;B++)b(B)})}function fromEvent(r,e,n,s){return isFunction(n)&&(s=n,n=void 0),s?fromEvent(r,e,n).pipe(map(function(a){return isArray(a)?s.apply(void 0,a):s(a)})):new Observable(function(a){function o(g){arguments.length>1?a.next(Array.prototype.slice.call(arguments)):a.next(g)}setupSubscription(r,e,o,a,n)})}function setupSubscription(r,e,n,s,a){var o;if(isEventTarget(r)){var g=r;r.addEventListener(e,n,a),o=function(){return g.removeEventListener(e,n,a)}}else if(isJQueryStyleEventEmitter(r)){var b=r;r.on(e,n),o=function(){return b.off(e,n)}}else if(isNodeStyleEventEmitter(r)){var B=r;r.addListener(e,n),o=function(){return B.removeListener(e,n)}}else if(r&&r.length)for(var N=0,I=r.length;N<I;N++)setupSubscription(r[N],e,n,s,a);else throw new TypeError("Invalid event target");s.add(o)}function isNodeStyleEventEmitter(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function isJQueryStyleEventEmitter(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function isEventTarget(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function fromEventPattern(r,e,n){return n?fromEventPattern(r,e).pipe(map(function(s){return isArray(s)?n.apply(void 0,s):n(s)})):new Observable(function(s){var a=function(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];return s.next(g.length===1?g[0]:g)},o;try{o=r(a)}catch(g){s.error(g);return}if(isFunction(e))return function(){return e(a,o)}})}function generate(r,e,n,s,a){var o,g;if(arguments.length==1){var b=r;g=b.initialState,e=b.condition,n=b.iterate,o=b.resultSelector||identity,a=b.scheduler}else s===void 0||isScheduler(s)?(g=r,o=identity,a=s):(g=r,o=s);return new Observable(function(B){var N=g;if(a)return a.schedule(dispatch$4,0,{subscriber:B,iterate:n,condition:e,resultSelector:o,state:N});do{if(e){var I=void 0;try{I=e(N)}catch(H){B.error(H);return}if(!I){B.complete();break}}var U=void 0;try{U=o(N)}catch(H){B.error(H);return}if(B.next(U),B.closed)break;try{N=n(N)}catch(H){B.error(H);return}}while(!0)})}function dispatch$4(r){var e=r.subscriber,n=r.condition;if(!e.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){e.error(o);return}else r.needIterate=!0;if(n){var s=void 0;try{s=n(r.state)}catch(o){e.error(o);return}if(!s){e.complete();return}if(e.closed)return}var a;try{a=r.resultSelector(r.state)}catch(o){e.error(o);return}if(!e.closed&&(e.next(a),!e.closed))return this.schedule(r)}}function iif(r,e,n){return e===void 0&&(e=EMPTY),n===void 0&&(n=EMPTY),defer(function(){return r()?e:n})}function isNumeric(r){return!isArray(r)&&r-parseFloat(r)+1>=0}function interval(r,e){return r===void 0&&(r=0),e===void 0&&(e=async),(!isNumeric(r)||r<0)&&(r=0),(!e||typeof e.schedule!="function")&&(e=async),new Observable(function(n){return n.add(e.schedule(dispatch$3,r,{subscriber:n,counter:0,period:r})),n})}function dispatch$3(r){var e=r.subscriber,n=r.counter,s=r.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:s},s)}function merge(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,a=r[r.length-1];return isScheduler(a)?(s=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(n=r.pop())):typeof a=="number"&&(n=r.pop()),s===null&&r.length===1&&r[0]instanceof Observable?r[0]:mergeAll(n)(fromArray(r,s))}var NEVER=new Observable(noop);function never(){return NEVER}function onErrorResumeNext(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===0)return EMPTY;var n=r[0],s=r.slice(1);return r.length===1&&isArray(n)?onErrorResumeNext.apply(void 0,n):new Observable(function(a){var o=function(){return a.add(onErrorResumeNext.apply(void 0,s).subscribe(a))};return from(n).subscribe({next:function(g){a.next(g)},error:o,complete:o})})}function pairs(r,e){return e?new Observable(function(n){var s=Object.keys(r),a=new Subscription;return a.add(e.schedule(dispatch$2,0,{keys:s,index:0,subscriber:n,subscription:a,obj:r})),a}):new Observable(function(n){for(var s=Object.keys(r),a=0;a<s.length&&!n.closed;a++){var o=s[a];r.hasOwnProperty(o)&&n.next([o,r[o]])}n.complete()})}function dispatch$2(r){var e=r.keys,n=r.index,s=r.subscriber,a=r.subscription,o=r.obj;if(!s.closed)if(n<e.length){var g=e[n];s.next([g,o[g]]),a.add(this.schedule({keys:e,index:n+1,subscriber:s,subscription:a,obj:o}))}else s.complete()}function not(r,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=r,n.thisArg=e,n}function filter(r,e){return function(s){return s.lift(new FilterOperator(r,e))}}var FilterOperator=function(){function r(e,n){this.predicate=e,this.thisArg=n}return r.prototype.call=function(e,n){return n.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},r}(),FilterSubscriber=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this,n)||this;return o.predicate=s,o.thisArg=a,o.count=0,o}return e.prototype._next=function(n){var s;try{s=this.predicate.call(this.thisArg,n,this.count++)}catch(a){this.destination.error(a);return}s&&this.destination.next(n)},e}(Subscriber);function partition(r,e,n){return[filter(e,n)(new Observable(subscribeTo(r))),filter(not(e,n))(new Observable(subscribeTo(r)))]}function race(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===1)if(isArray(r[0]))r=r[0];else return r[0];return fromArray(r,void 0).lift(new RaceOperator)}var RaceOperator=function(){function r(){}return r.prototype.call=function(e,n){return n.subscribe(new RaceSubscriber(e))},r}(),RaceSubscriber=function(r){__extends(e,r);function e(n){var s=r.call(this,n)||this;return s.hasFirst=!1,s.observables=[],s.subscriptions=[],s}return e.prototype._next=function(n){this.observables.push(n)},e.prototype._complete=function(){var n=this.observables,s=n.length;if(s===0)this.destination.complete();else{for(var a=0;a<s&&!this.hasFirst;a++){var o=n[a],g=subscribeToResult(this,o,void 0,a);this.subscriptions&&this.subscriptions.push(g),this.add(g)}this.observables=null}},e.prototype.notifyNext=function(n,s,a){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==a){var g=this.subscriptions[o];g.unsubscribe(),this.remove(g)}this.subscriptions=null}this.destination.next(s)},e}(OuterSubscriber);function range(r,e,n){return r===void 0&&(r=0),new Observable(function(s){e===void 0&&(e=r,r=0);var a=0,o=r;if(n)return n.schedule(dispatch$1,0,{index:a,count:e,start:r,subscriber:s});do{if(a++>=e){s.complete();break}if(s.next(o++),s.closed)break}while(!0)})}function dispatch$1(r){var e=r.start,n=r.index,s=r.count,a=r.subscriber;if(n>=s){a.complete();return}a.next(e),!a.closed&&(r.index=n+1,r.start=e+1,this.schedule(r))}function timer(r,e,n){r===void 0&&(r=0);var s=-1;return isNumeric(e)?s=Number(e)<1&&1||Number(e):isScheduler(e)&&(n=e),isScheduler(n)||(n=async),new Observable(function(a){var o=isNumeric(r)?r:+r-n.now();return n.schedule(dispatch,o,{index:0,period:s,subscriber:a})})}function dispatch(r){var e=r.index,n=r.period,s=r.subscriber;if(s.next(e),!s.closed){if(n===-1)return s.complete();r.index=e+1,this.schedule(r,n)}}function using(r,e){return new Observable(function(n){var s;try{s=r()}catch(b){n.error(b);return}var a;try{a=e(s)}catch(b){n.error(b);return}var o=a?from(a):EMPTY,g=o.subscribe(n);return function(){g.unsubscribe(),s&&s.unsubscribe()}})}function zip(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=r[r.length-1];return typeof n=="function"&&r.pop(),fromArray(r,void 0).lift(new ZipOperator(n))}var ZipOperator=function(){function r(e){this.resultSelector=e}return r.prototype.call=function(e,n){return n.subscribe(new ZipSubscriber(e,this.resultSelector))},r}(),ZipSubscriber=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this,n)||this;return o.resultSelector=s,o.iterators=[],o.active=0,o.resultSelector=typeof s=="function"?s:void 0,o}return e.prototype._next=function(n){var s=this.iterators;isArray(n)?s.push(new StaticArrayIterator(n)):typeof n[iterator]=="function"?s.push(new StaticIterator(n[iterator]())):s.push(new ZipBufferIterator(this.destination,this,n))},e.prototype._complete=function(){var n=this.iterators,s=n.length;if(this.unsubscribe(),s===0){this.destination.complete();return}this.active=s;for(var a=0;a<s;a++){var o=n[a];if(o.stillUnsubscribed){var g=this.destination;g.add(o.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var n=this.iterators,s=n.length,a=this.destination,o=0;o<s;o++){var g=n[o];if(typeof g.hasValue=="function"&&!g.hasValue())return}for(var b=!1,B=[],o=0;o<s;o++){var g=n[o],N=g.next();if(g.hasCompleted()&&(b=!0),N.done){a.complete();return}B.push(N.value)}this.resultSelector?this._tryresultSelector(B):a.next(B),b&&a.complete()},e.prototype._tryresultSelector=function(n){var s;try{s=this.resultSelector.apply(this,n)}catch(a){this.destination.error(a);return}this.destination.next(s)},e}(Subscriber),StaticIterator=function(){function r(e){this.iterator=e,this.nextResult=e.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},r.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},r}(),StaticArrayIterator=function(){function r(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return r.prototype[iterator]=function(){return this},r.prototype.next=function(e){var n=this.index++,s=this.array;return n<this.length?{value:s[n],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),ZipBufferIterator=function(r){__extends(e,r);function e(n,s,a){var o=r.call(this,n)||this;return o.parent=s,o.observable=a,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return e.prototype[iterator]=function(){return this},e.prototype.next=function(){var n=this.buffer;return n.length===0&&this.isComplete?{value:null,done:!0}:{value:n.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(n){this.buffer.push(n),this.parent.checkIterators()},e.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},e}(SimpleOuterSubscriber);const _esm5=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError,AsyncSubject,BehaviorSubject,ConnectableObservable,EMPTY,EmptyError,GroupedObservable,NEVER,Notification,get NotificationKind(){return NotificationKind},ObjectUnsubscribedError,Observable,ReplaySubject,Scheduler,Subject,Subscriber,Subscription,TimeoutError,UnsubscriptionError,VirtualAction,VirtualTimeScheduler,animationFrame,animationFrameScheduler,asap,asapScheduler,async,asyncScheduler,bindCallback,bindNodeCallback,combineLatest,concat,config,defer,empty,forkJoin,from,fromEvent,fromEventPattern,generate,identity,iif,interval,isObservable,merge,never,noop,observable,of,onErrorResumeNext,pairs,partition,pipe,queue,queueScheduler,race,range,scheduled,throwError,timer,using,zip},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(_esm5),require$$2=getAugmentedNamespace(libEs);Object.defineProperty(sendAPDU$1,"__esModule",{value:!0});var sendAPDU_2=sendAPDU$1.sendAPDU=void 0,_rxjs$1=require$$1,_logs$1=require$$2;const TagId$1=5;function chunkBuffer(r,e){const n=[];for(let s=0,a=e(0);s<r.length;s+=a,a=e(s))n.push(r.slice(s,s+a));return n}const sendAPDU=(r,e,n)=>{const s=chunkBuffer(e,a=>n-(a===0?5:3)).map((a,o)=>{const g=Buffer.alloc(o===0?5:3);return g.writeUInt8(TagId$1,0),g.writeUInt16BE(o,1),o===0&&g.writeUInt16BE(e.length,3),Buffer.concat([g,a])});return _rxjs$1.Observable.create(a=>{let o=!1;async function g(){for(const B of s){if(o)return;await r(B)}}return g().then(()=>{o=!0,a.complete()},B=>{o=!0,(0,_logs$1.log)("ble-error","sendAPDU failure "+String(B)),a.error(B)}),()=>{o||((0,_logs$1.log)("ble-verbose","sendAPDU interruption"),o=!0)}})};sendAPDU_2=sendAPDU$1.sendAPDU=sendAPDU;var receiveAPDU$1={};Object.defineProperty(receiveAPDU$1,"__esModule",{value:!0});var receiveAPDU_2=receiveAPDU$1.receiveAPDU=void 0,_errors=require$$0,_rxjs=require$$1,_logs=require$$2;const TagId=5,receiveAPDU=r=>_rxjs.Observable.create(e=>{let n=0,s=0,a=Buffer.alloc(0);const o=r.subscribe({complete:()=>{e.error(new _errors.DisconnectedDevice),o.unsubscribe()},error:g=>{(0,_logs.log)("ble-error","in receiveAPDU "+String(g)),e.error(g),o.unsubscribe()},next:g=>{const b=g.readUInt8(0),B=g.readUInt16BE(1);let N=g.slice(3);if(b!==TagId){e.error(new _errors.TransportError("Invalid tag "+b.toString(16),"InvalidTag"));return}if(n!==B){e.error(new _errors.TransportError("BLE: Invalid sequence number. discontinued chunk. Received "+B+" but expected "+n,"InvalidSequence"));return}if(B===0&&(s=N.readUInt16BE(0),N=N.slice(2)),n++,a=Buffer.concat([a,N]),a.length>s){e.error(new _errors.TransportError("BLE: received too much data. discontinued chunk. Received "+a.length+" but expected "+s,"BLETooMuchData"));return}a.length===s&&(e.next(a),e.complete(),o.unsubscribe())}});return()=>{o.unsubscribe()}});receiveAPDU_2=receiveAPDU$1.receiveAPDU=receiveAPDU;function defaultIfEmpty(r){return r===void 0&&(r=null),function(e){return e.lift(new DefaultIfEmptyOperator(r))}}var DefaultIfEmptyOperator=function(){function r(e){this.defaultValue=e}return r.prototype.call=function(e,n){return n.subscribe(new DefaultIfEmptySubscriber(e,this.defaultValue))},r}(),DefaultIfEmptySubscriber=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n)||this;return a.defaultValue=s,a.isEmpty=!0,a}return e.prototype._next=function(n){this.isEmpty=!1,this.destination.next(n)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Subscriber);function throwIfEmpty(r){return r===void 0&&(r=defaultErrorFactory),function(e){return e.lift(new ThrowIfEmptyOperator(r))}}var ThrowIfEmptyOperator=function(){function r(e){this.errorFactory=e}return r.prototype.call=function(e,n){return n.subscribe(new ThrowIfEmptySubscriber(e,this.errorFactory))},r}(),ThrowIfEmptySubscriber=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n)||this;return a.errorFactory=s,a.hasValue=!1,a}return e.prototype._next=function(n){this.hasValue=!0,this.destination.next(n)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var n=void 0;try{n=this.errorFactory()}catch(s){n=s}this.destination.error(n)},e}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(r){return function(e){return r===0?empty():e.lift(new TakeOperator(r))}}var TakeOperator=function(){function r(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError}return r.prototype.call=function(e,n){return n.subscribe(new TakeSubscriber(e,this.total))},r}(),TakeSubscriber=function(r){__extends(e,r);function e(n,s){var a=r.call(this,n)||this;return a.total=s,a.count=0,a}return e.prototype._next=function(n){var s=this.total,a=++this.count;a<=s&&(this.destination.next(n),a===s&&(this.destination.complete(),this.unsubscribe()))},e}(Subscriber);function first(r,e){var n=arguments.length>=2;return function(s){return s.pipe(r?filter(function(a,o){return r(a,o,s)}):identity,take(1),n?defaultIfEmpty(e):throwIfEmpty(function(){return new EmptyError}))}}function ignoreElements(){return function(e){return e.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function r(){}return r.prototype.call=function(e,n){return n.subscribe(new IgnoreElementsSubscriber(e))},r}(),IgnoreElementsSubscriber=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._next=function(n){},e}(Subscriber);function multicast(r,e){return function(s){var a;if(typeof r=="function"?a=r:a=function(){return r},typeof e=="function")return s.lift(new MulticastOperator(a,e));var o=Object.create(s,connectableObservableDescriptor);return o.source=s,o.subjectFactory=a,o}}var MulticastOperator=function(){function r(e,n){this.subjectFactory=e,this.selector=n}return r.prototype.call=function(e,n){var s=this.selector,a=this.subjectFactory(),o=s(a).subscribe(e);return o.add(n.subscribe(a)),o},r}();function shareSubjectFactory(){return new Subject}function share(){return function(r){return refCount()(multicast(shareSubjectFactory)(r))}}function tap(r,e,n){return function(a){return a.lift(new DoOperator(r,e,n))}}var DoOperator=function(){function r(e,n,s){this.nextOrObserver=e,this.error=n,this.complete=s}return r.prototype.call=function(e,n){return n.subscribe(new TapSubscriber(e,this.nextOrObserver,this.error,this.complete))},r}(),TapSubscriber=function(r){__extends(e,r);function e(n,s,a,o){var g=r.call(this,n)||this;return g._tapNext=noop,g._tapError=noop,g._tapComplete=noop,g._tapError=a||noop,g._tapComplete=o||noop,isFunction(s)?(g._context=g,g._tapNext=s):s&&(g._context=s,g._tapNext=s.next||noop,g._tapError=s.error||noop,g._tapComplete=s.complete||noop),g}return e.prototype._next=function(n){try{this._tapNext.call(this._context,n)}catch(s){this.destination.error(s);return}this.destination.next(n)},e.prototype._error=function(n){try{this._tapError.call(this._context,n)}catch(s){this.destination.error(s);return}this.destination.error(n)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(n){this.destination.error(n);return}return this.destination.complete()},e}(Subscriber);const monitorCharacteristic=r=>Observable.create(e=>{log("ble-verbose","start monitor "+r.uuid);function n(s){const a=s.target;a.value&&e.next(Buffer.from(a.value.buffer))}return r.startNotifications().then(()=>{r.addEventListener("characteristicvaluechanged",n)}),()=>{log("ble-verbose","end monitor "+r.uuid),r.stopNotifications()}}),requiresBluetooth=()=>{const{bluetooth:r}=navigator;if(typeof r>"u")throw new Error("web bluetooth not supported");return r},availability=()=>Observable.create(r=>{const e=requiresBluetooth(),n=a=>{r.next(a.value)};e.addEventListener("availabilitychanged",n);let s=!1;return e.getAvailability().then(a=>{s||r.next(a)}),()=>{s=!0,e.removeEventListener("availabilitychanged",n)}}),transportsCache={},requestDeviceParam=()=>({filters:getBluetoothServiceUuids().map(r=>({services:[r]}))}),retrieveService=async r=>{if(!r.gatt)throw new Error("bluetooth gatt not found");const[e]=await r.gatt.getPrimaryServices();if(!e)throw new Error("bluetooth service not found");const n=getInfosForServiceUuid(e.uuid);if(!n)throw new Error("bluetooth service infos not found");return[e,n]};async function open(r,e){let n;if(typeof r=="string"){if(transportsCache[r])return log("ble-verbose","Transport in cache, using that."),transportsCache[r];n=await requiresBluetooth().requestDevice(requestDeviceParam())}else n=r;n.gatt.connected||(log("ble-verbose","not connected. connecting..."),await n.gatt.connect());const[s,a]=await retrieveService(n),{deviceModel:o,writeUuid:g,notifyUuid:b}=a,[B,N]=await Promise.all([s.getCharacteristic(g),s.getCharacteristic(b)]),I=monitorCharacteristic(N).pipe(tap(Dt=>{log("ble-frame","<= "+Dt.toString("hex"))}),share()),U=I.subscribe(),H=new BluetoothTransport$1(n,B,I,o);if(!n.gatt.connected)throw new DisconnectedDevice;transportsCache[H.id]=H;const Q=Dt=>{console.log("onDisconnect!",Dt),delete transportsCache[H.id],H.notYetDisconnected=!1,U.unsubscribe(),n.removeEventListener("gattserverdisconnected",Q),log("ble-verbose",`BleTransport(${H.id}) disconnected`),H.emit("disconnect",Dt)};n.addEventListener("gattserverdisconnected",Q);let $t=Date.now();try{await H.inferMTU()}finally{Date.now()-$t<1e3&&(e=!1),e&&(await n.gatt.disconnect(),await new Promise(xt=>setTimeout(xt,4e3)))}return e?open(n,!1):H}let BluetoothTransport$1=class extends Transport{static listen(e){log("ble-verbose","listen...");let n;requiresBluetooth().requestDevice(requestDeviceParam()).then(async o=>{n||(e.next({type:"add",descriptor:o}),e.complete())},o=>{e.error(new TransportOpenUserCancelled(o.message))});function a(){n=!0}return{unsubscribe:a}}static async open(e){return open(e,!0)}constructor(e,n,s,a){super(),this.id=void 0,this.device=void 0,this.mtuSize=20,this.writeCharacteristic=void 0,this.notifyObservable=void 0,this.notYetDisconnected=!0,this.deviceModel=void 0,this.exchange=o=>this.exchangeAtomicImpl(async()=>{try{const g=o.toString("hex");log("apdu",`=> ${g}`);const b=await merge(this.notifyObservable.pipe(receiveAPDU_2),sendAPDU_2(this.write,o,this.mtuSize)).toPromise(),B=b.toString("hex");return log("apdu",`<= ${B}`),b}catch(g){throw log("ble-error","exchange got "+String(g)),this.notYetDisconnected&&this.device.gatt.disconnect(),g}}),this.write=async o=>{log("ble-frame","=> "+o.toString("hex")),await this.writeCharacteristic.writeValue(o)},this.id=e.id,this.device=e,this.writeCharacteristic=n,this.notifyObservable=s,this.deviceModel=a,log("ble-verbose",`BleTransport(${String(this.id)}) new instance`)}async inferMTU(){let e=23;if(await this.exchangeAtomicImpl(async()=>{try{e=await merge(this.notifyObservable.pipe(first(n=>n.readUInt8(0)===8),map(n=>n.readUInt8(5))),defer(()=>from(this.write(Buffer.from([8,0,0,0,0])))).pipe(ignoreElements())).toPromise()+3}catch(n){throw log("ble-error","inferMTU got "+String(n)),this.device.gatt.disconnect(),n}}),e>23){const n=e-3;log("ble-verbose",`BleTransport(${String(this.id)}) mtu set to ${String(n)}`),this.mtuSize=n}return this.mtuSize}setScrambleKey(){}async close(){this.exchangeBusyPromise&&await this.exchangeBusyPromise}};BluetoothTransport$1.isSupported=()=>Promise.resolve().then(requiresBluetooth).then(()=>!0,()=>!1);BluetoothTransport$1.observeAvailability=r=>availability.subscribe(r);BluetoothTransport$1.list=()=>Promise.resolve([]);BluetoothTransport$1.disconnect=async r=>{log("ble-verbose",`user disconnect(${r})`);const e=transportsCache[r];e&&e.device.gatt.disconnect()};const TransportWebBLE=Object.freeze(Object.defineProperty({__proto__:null,default:BluetoothTransport$1},Symbol.toStringTag,{value:"Module"})),require$$14=getAugmentedNamespace(TransportWebBLE);var dns={},Dns$3={};const{parseAddress:parseAddress$2}=NftUtils,{AdnlAddress,StorageBagId,BN:BN$1,sha256,bytesToHex:bytesToHex$1,bytesToBase64}=utils$1,{Cell:Cell$2}=boc$1,DNS_CATEGORY_NEXT_RESOLVER$1="dns_next_resolver",DNS_CATEGORY_WALLET$1="wallet",DNS_CATEGORY_SITE$1="site",DNS_CATEGORY_STORAGE$1="storage",categoryToBN$1=async r=>{if(!r)return new BN$1(0);const e=new TextEncoder().encode(r),n=new Uint8Array(await sha256(e));return new BN$1(bytesToHex$1(n),16)},createSmartContractAddressRecord$1=r=>{const e=new Cell$2;return e.bits.writeUint(40915,16),e.bits.writeAddress(r),e.bits.writeUint(0,8),e},createAdnlAddressRecord$1=r=>{const e=new Cell$2;return e.bits.writeUint(44289,16),e.bits.writeBytes(r.bytes),e.bits.writeUint(0,8),e},createStorageBagIdRecord$1=r=>{const e=new Cell$2;return e.bits.writeUint(29811,16),e.bits.writeBytes(r.bytes),e},createNextResolverRecord$1=r=>{const e=new Cell$2;return e.bits.writeUint(47763,16),e.bits.writeAddress(r),e},parseSmartContractAddressImpl=(r,e,n)=>{if(r.bits.array[0]!==e||r.bits.array[1]!==n)throw new Error("Invalid dns record value prefix");return r.bits.array=r.bits.array.slice(2),parseAddress$2(r)},parseSmartContractAddressRecord$1=r=>parseSmartContractAddressImpl(r,159,211),parseNextResolverRecord$1=r=>parseSmartContractAddressImpl(r,186,147),parseAdnlAddressRecord$1=r=>{if(r.bits.array[0]!==173||r.bits.array[1]!==1)throw new Error("Invalid dns record value prefix");const e=r.bits.array.slice(2,2+32);return new AdnlAddress(e)},parseStorageBagIdRecord$1=r=>{if(r.bits.array[0]!==116||r.bits.array[1]!==115)throw new Error("Invalid dns record value prefix");const e=r.bits.array.slice(2,2+32);return new StorageBagId(e)},parseSiteRecord$1=r=>r?r.bits.array[0]===173||r.bits.array[1]===1?parseAdnlAddressRecord$1(r):parseStorageBagIdRecord$1(r):null,dnsResolveImpl=async(r,e,n,s,a)=>{const o=n.length*8,g=new Cell$2;g.bits.writeBytes(n);const b=await categoryToBN$1(s),B=await r.call2(e,"dnsresolve",[["tvm.Slice",bytesToBase64(await g.toBoc(!1))],["num",b.toString()]]);if(B.length!==2)throw new Error("Invalid dnsresolve response");const N=B[0].toNumber();let I=B[1];if(I instanceof Array&&I.length===0&&(I=null),I&&!I.bits)throw new Error("Invalid dnsresolve response");if(N===0)return null;if(N%8!==0)throw new Error("domain split not at a component boundary");if(N>o)throw new Error("invalid response "+N+"/"+o);if(N===o)return s===DNS_CATEGORY_NEXT_RESOLVER$1?I?parseNextResolverRecord$1(I):null:s===DNS_CATEGORY_WALLET$1?I?parseSmartContractAddressRecord$1(I):null:s===DNS_CATEGORY_SITE$1?I?parseSiteRecord$1(I):null:s===DNS_CATEGORY_STORAGE$1?I?parseStorageBagIdRecord$1(I):null:I;if(I){const U=parseNextResolverRecord$1(I);return a?s===DNS_CATEGORY_NEXT_RESOLVER$1?U:null:await dnsResolveImpl(r,U.toString(),n.slice(N/8),s,!1)}else return null},domainToBytes=r=>{if(!r||!r.length)throw new Error("empty domain");if(r===".")return new Uint8Array([0]);r=r.toLowerCase();for(let s=0;s<r.length;s++)if(r.charCodeAt(s)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let s=0;s<r.length;s++){const a=r.substring(s,s+1);for(let o=127;o<=159;o++)if(a===String.fromCharCode(o))throw new Error("bytes in range 127..159 are not allowed in domain names")}const e=r.split(".");e.forEach(s=>{if(!s.length)throw new Error("domain name cannot have an empty component")});let n=e.reverse().join("\0")+"\0";return n.length<126&&(n="\0"+n),new TextEncoder().encode(n)},dnsResolve$3=async(r,e,n,s,a)=>{const o=domainToBytes(n);return dnsResolveImpl(r,e,o,s,a)};var DnsUtils={DNS_CATEGORY_NEXT_RESOLVER:DNS_CATEGORY_NEXT_RESOLVER$1,DNS_CATEGORY_SITE:DNS_CATEGORY_SITE$1,DNS_CATEGORY_WALLET:DNS_CATEGORY_WALLET$1,DNS_CATEGORY_STORAGE:DNS_CATEGORY_STORAGE$1,categoryToBN:categoryToBN$1,domainToBytes,createSmartContractAddressRecord:createSmartContractAddressRecord$1,createAdnlAddressRecord:createAdnlAddressRecord$1,createNextResolverRecord:createNextResolverRecord$1,parseSmartContractAddressRecord:parseSmartContractAddressRecord$1,parseAdnlAddressRecord:parseAdnlAddressRecord$1,parseStorageBagIdRecord:parseStorageBagIdRecord$1,parseSiteRecord:parseSiteRecord$1,parseNextResolverRecord:parseNextResolverRecord$1,createStorageBagIdRecord:createStorageBagIdRecord$1,dnsResolve:dnsResolve$3};const{Address:Address$2,bytesToHex}=utils$1,{DNS_CATEGORY_NEXT_RESOLVER,DNS_CATEGORY_SITE,DNS_CATEGORY_WALLET,DNS_CATEGORY_STORAGE,createSmartContractAddressRecord,createAdnlAddressRecord,createStorageBagIdRecord,createNextResolverRecord,parseSmartContractAddressRecord,parseAdnlAddressRecord,parseStorageBagIdRecord,parseSiteRecord,parseNextResolverRecord,dnsResolve:dnsResolve$2}=DnsUtils;let Dns$2=class{constructor(e){this.provider=e}async getRootDnsAddress(){const n=(await this.provider.getConfigParam(4)).bits.array;if(n.length!==256/8)throw new Error("Invalid ConfigParam 4 length "+n.length);const s=bytesToHex(n);return new Address$2("-1:"+s)}async resolve(e,n,s){const a=await this.getRootDnsAddress();return dnsResolve$2(this.provider,a.toString(),e,n,s)}getWalletAddress(e){return this.resolve(e,DNS_CATEGORY_WALLET)}getSiteAddress(e){return this.resolve(e,DNS_CATEGORY_SITE)}};Dns$2.resolve=dnsResolve$2;Dns$2.createSmartContractAddressRecord=createSmartContractAddressRecord;Dns$2.createAdnlAddressRecord=createAdnlAddressRecord;Dns$2.createStorageBagIdRecord=createStorageBagIdRecord;Dns$2.createNextResolverRecord=createNextResolverRecord;Dns$2.parseNextResolverRecord=parseNextResolverRecord;Dns$2.parseAdnlAddressRecord=parseAdnlAddressRecord;Dns$2.parseStorageBagIdRecord=parseStorageBagIdRecord;Dns$2.parseSiteRecord=parseSiteRecord;Dns$2.parseSmartContractAddressRecord=parseSmartContractAddressRecord;Dns$2.DNS_CATEGORY_NEXT_RESOLVER=DNS_CATEGORY_NEXT_RESOLVER;Dns$2.DNS_CATEGORY_WALLET=DNS_CATEGORY_WALLET;Dns$2.DNS_CATEGORY_SITE=DNS_CATEGORY_SITE;Dns$2.DNS_CATEGORY_STORAGE=DNS_CATEGORY_STORAGE;Dns$3.default=Dns$2;const{Contract:Contract$2}=contract,{Cell:Cell$1}=boc$1,{parseAddress:parseAddress$1}=NftUtils,{dnsResolve:dnsResolve$1}=DnsUtils,{parseOffchainUriCell}=NftUtils;let DnsCollection$2=class extends Contract$2{constructor(e,n){if(n.wc=0,n.code=n.code,super(e,n),!n.collectionContent&&!n.address)throw new Error("required collectionContent cell");this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const e=new Cell$1;return e.refs[0]=this.options.collectionContent,e.refs[1]=Cell$1.oneFromBoc(this.options.dnsItemCodeHex),e}async getCollectionData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_collection_data"),s=n[0].toNumber(),a=n[1];return{collectionContentUri:parseOffchainUriCell(a),collectionContent:a,ownerAddress:null,nextItemIndex:s}}async getNftItemContent(e){return await e.getData()}async getNftItemAddressByIndex(e){const n=await this.getAddress(),s=await this.provider.call2(n.toString(),"get_nft_address_by_index",[["num",e.toString()]]);return parseAddress$1(s)}async resolve(e,n,s){const a=await this.getAddress();return dnsResolve$1(this.provider,a.toString(),e,n,s)}};var DnsCollection_1={DnsCollection:DnsCollection$2};const{Contract:Contract$1}=contract,{Cell}=boc$1,{Address:Address$1,BN}=utils$1,{parseAddress}=NftUtils,{dnsResolve,categoryToBN}=DnsUtils;let DnsItem$2=class extends Contract$1{constructor(e,n){n.wc=0,n.code=n.code,super(e,n),this.methods.getData=this.getData.bind(this),this.methods.getDomain=this.getDomain.bind(this),this.methods.getAuctionInfo=this.getAuctionInfo.bind(this),this.methods.getLastFillUpTime=this.getLastFillUpTime.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const e=new Cell;return e.bits.writeUint(this.options.index,256),e.bits.writeAddress(this.options.collectionAddress),e}async getData(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_nft_data"),s=n[0].toNumber()===-1,a=n[1],o=parseAddress(n[2]),g=s?parseAddress(n[3]):null,b=n[4];return{isInitialized:s,index:a,collectionAddress:o,ownerAddress:g,contentCell:b}}async createTransferBody(e){const n=new Cell;return n.bits.writeUint(1607220500,32),n.bits.writeUint(e.queryId||0,64),n.bits.writeAddress(e.newOwnerAddress),n.bits.writeAddress(e.responseAddress),n.bits.writeBit(!1),n.bits.writeCoins(e.forwardAmount||new BN(0)),n.bits.writeBit(!1),e.forwardPayload&&n.bits.writeBytes(e.forwardPayload),n}createGetStaticDataBody(e){const n=new Cell;return n.bits.writeUint(801842850,32),n.bits.writeUint(e.queryId||0,64),n}async getDomain(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_domain");return new TextDecoder().decode(n.bits.array.buffer)}async getAuctionInfo(){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_auction_info"),s=parseAddress(n[0]),a=n[1],o=n[2].toNumber();return{maxBidAddress:s,maxBidAmount:a,auctionEndTime:o}}async getLastFillUpTime(){const e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_last_fill_up_time")).toNumber()}async resolve(e,n,s){const a=await this.getAddress();return dnsResolve(this.provider,a.toString(),e,n,s)}};DnsItem$2.createChangeContentEntryBody=async r=>{const e=new Cell;return e.bits.writeUint(1320284409,32),e.bits.writeUint(r.queryId||0,64),e.bits.writeUint(await categoryToBN(r.category),256),r.value&&(e.refs[0]=r.value),e};var DnsItem_1={DnsItem:DnsItem$2};const Dns$1=Dns$3.default,{DnsCollection:DnsCollection$1}=DnsCollection_1,{DnsItem:DnsItem$1}=DnsItem_1;dns.default={Dns:Dns$1,DnsCollection:DnsCollection$1,DnsItem:DnsItem$1};const utils=utils$1,Address=utils.Address,boc=boc$1,AppTon=AppTon_1,HttpProvider=providers.default,{Contract}=contract,Wallets=wallet.default,LockupWallets=lockup.default,NFT=nft.default,JETTON=ft.default,{BlockSubscription,InMemoryBlockStorage}=blockSubscription,{SubscriptionContract}=subscription,{Payments,PaymentChannel}=payments,TransportWebUSB=require$$12.default,TransportWebHID=require$$13.default,BluetoothTransport=require$$14.default,{Dns,DnsCollection,DnsItem}=dns.default,version="0.0.60";class TonWeb{constructor(e){this.version=version,this.utils=utils,this.Address=Address,this.boc=boc,this.Contract=Contract,this.BlockSubscription=BlockSubscription,this.InMemoryBlockStorage=InMemoryBlockStorage,this.provider=e||new HttpProvider,this.dns=new Dns(this.provider),this.wallet=new Wallets(this.provider),this.payments=new Payments(this.provider),this.lockupWallet=LockupWallets}async getTransactions(e,n=20,s=void 0,a=void 0,o=void 0){return this.provider.getTransactions(e.toString(),n,s,a,o)}async getBalance(e){return this.provider.getBalance(e.toString())}async sendBoc(e){return this.provider.sendBoc(utils.bytesToBase64(e))}async call(e,n,s=[]){return this.provider.call(e.toString(),n,s)}}TonWeb.version=version;TonWeb.utils=utils;TonWeb.Address=Address;TonWeb.boc=boc;TonWeb.HttpProvider=HttpProvider;TonWeb.Contract=Contract;TonWeb.Wallets=Wallets;TonWeb.LockupWallets=LockupWallets;TonWeb.SubscriptionContract=SubscriptionContract;TonWeb.BlockSubscription=BlockSubscription;TonWeb.InMemoryBlockStorage=InMemoryBlockStorage;TonWeb.ledger={TransportWebUSB,TransportWebHID,BluetoothTransport,AppTon};TonWeb.token={nft:NFT,ft:JETTON,jetton:JETTON};TonWeb.dns=Dns;TonWeb.dns.DnsCollection=DnsCollection;TonWeb.dns.DnsItem=DnsItem;TonWeb.payments=Payments;TonWeb.payments.PaymentChannel=PaymentChannel;var src=TonWeb,ConnectionStatus=(r=>(r[r.DISABLE=0]="DISABLE",r[r.ENABLE=1]="ENABLE",r[r.WAIT=2]="WAIT",r))(ConnectionStatus||{});class WalletConnection{constructor(){We(this,"statusChanged");We(this,"deepLinkChanged");We(this,"saltChanged");We(this,"passwordChanged");We(this,"_connector");We(this,"_status");We(this,"_deepLink");We(this,"_salt");We(this,"_password");this._status=0,this._deepLink="",this._salt="",this._password="",this._connector=new TonConnect$1({manifestUrl:"https://raw.githubusercontent.com/opexu/TON_Password_Saver/main/webapp/src/tonconnect-manifest.json"}),this._connector.onStatusChange(this._onStatusChange.bind(this))}set status(e){this._status=e,this.statusChanged&&this.statusChanged(this._status)}set deepLink(e){this._deepLink=e,this.deepLinkChanged&&this.deepLinkChanged(this._deepLink)}set salt(e){this._salt=e,this.saltChanged&&this.saltChanged(this._salt)}set password(e){this._password=e,this.passwordChanged&&this.passwordChanged(this._password)}_onStatusChange(e){e?this.status=1:this.status=0}async restoreConnection(){this._connector.restoreConnection()}async initConnection(){this.status=2;const e=await this._connector.getWallets(),n=e.find(a=>{isWalletInfoInjected(a)&&a.embedded}),s=e.find(a=>a.name==="Tonkeeper");if(n)this._connector.connect({jsBridgeKey:n.jsBridgeKey});else if(s){const a=this._connector.connect({universalLink:s.universalLink,bridgeUrl:s.bridgeUrl});this.deepLink=a}else console.warn("no available wallets")}async disconnect(){this.status=2,this._connector.disconnect()}async getPassword(){}async savePassword(e,n){if(!this._connector.connected)return;console.log("salt: ",e),console.log("password: ",n);const s=await GeneratePayload(e,n),a={validUntil:Math.round(Date.now()/1e3+60*60*24),messages:[{address:"EQDb7Cez-o_jFCN5MJcFhBEsqWU7tynQJFBIL3uhmjX-J8_d",amount:"10_000_000",payload:s}]};try{const o=await this._connector.sendTransaction(a);console.log("result",o)}catch(o){o instanceof UserRejectsError?console.warn("You rejected the transaction. Please confirm it to send to the blockchain"):console.warn("Unknown error happened",o)}}}async function GeneratePayload(r,e){const a=new TextEncoder().encode(r).byteLength,g=new TextEncoder().encode(e).byteLength,b=src.boc.Cell,B=new b;B.bits.writeUint(2122802415,32),B.bits.writeUint(a*8,8),B.bits.writeUint(g*8,8),B.bits.writeString(r),B.bits.writeString(e);const N=await B.toBoc();return Base64.encode(N)}var SCREEN=(r=>(r[r.MAIN=0]="MAIN",r[r.LOAD=1]="LOAD",r[r.SAVE=2]="SAVE",r[r.WALLET=3]="WALLET",r))(SCREEN||{});const _sfc_main$4=defineComponent({props:{Locale:{type:String,required:!0},LANG:{type:Object,required:!0}},data:()=>({isPinValid:!1,pin:"",approveInProcess:!1}),methods:{onPinInput(){const r=/[0-9]/g;this.isPinValid=this.validate(this.pin,r)&&this.pin.length>4},validate(r,e){return!!r.match(e)},async getTransaction(){if(this.isPinValid&&!this.approveInProcess){console.log("get approve"),this.approveInProcess=!0;try{await new Promise((r,e)=>{setTimeout(()=>{r(!0)},2e3)})}catch(r){console.warn("error",r)}finally{this.approveInProcess=!1}}}}}),_export_sfc=(r,e)=>{const n=r.__vccOpts||r;for(const[s,a]of e)n[s]=a;return n},_hoisted_1$4={class:"w-full h-full flex flex-col"},_hoisted_2$3={autocomplete:"off",enctype:"multipart/form-data",method:"post",class:"space-y-8"},_hoisted_3$3={class:"w-full h-full flex flex-col"},_hoisted_4$1={for:"pin",class:"w-full h-fit"},_hoisted_5$1={class:"w-full h-fit flex flex-row space-x-4"},_hoisted_6$1={class:"w-full h-auto relative"},_hoisted_7$1={key:0,class:"text-red-500"},_hoisted_8$1={class:"w-full h-full flex flex-col"},_hoisted_9$1=["disabled"];function _sfc_render$4(r,e,n,s,a,o){return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("form",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("label",_hoisted_4$1,toDisplayString(r.LANG.PASSWORD_LOADER.PIN_LABEL[r.Locale]),1),createBaseVNode("div",_hoisted_5$1,[withDirectives(createBaseVNode("input",{id:"pin",ref:"pin",type:"text",autocomplete:"new-password",class:"w-full h-fit p-4 border rounded-md bg-inherit focus-visible:outline-none focus-visible:border-blue-600","onUpdate:modelValue":e[0]||(e[0]=g=>r.pin=g),onInput:e[1]||(e[1]=(...g)=>r.onPinInput&&r.onPinInput(...g))},null,544),[[vModelText,r.pin]])]),createBaseVNode("div",_hoisted_6$1,[r.isPinValid?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_7$1,toDisplayString(r.LANG.PASSWORD_LOADER.PIN_HELPER[r.Locale]),1))])]),createBaseVNode("div",_hoisted_8$1,[createBaseVNode("button",{type:"button",class:"w-full h-fit p-4 mt-4 border rounded-md [&:not([disabled])]:active:bg-blue-800 disabled:border-slate-600 disabled:text-slate-600",disabled:!r.isPinValid||r.approveInProcess,onClick:e[2]||(e[2]=(...g)=>r.getTransaction&&r.getTransaction(...g))},toDisplayString(r.LANG.PASSWORD_LOADER.APPROVE_BTN_TEXT[r.Locale]),9,_hoisted_9$1)])])])}const LoadPassword=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),useTONStore=defineStore("TONStore",{state:()=>({screenState:SCREEN.WALLET,connectionStatus:ConnectionStatus.DISABLE,deepLink:""}),actions:{async changeScreen(r){this.screenState=r},async connectWallet(){},async disconnectWallet(){},async getPassword(){},async savePassword(r,e){}},getters:{getScreen:r=>r.screenState,getStatus:r=>r.connectionStatus,getDeepLink:r=>r.deepLink}}),_sfc_main$3=defineComponent({props:{Locale:{type:String,required:!0},LANG:{type:Object,required:!0}},data:()=>({isPasswordShown:!1,isPasswordValid:!1,isPinValid:!1,pin:"",password:"",approveInProcess:!1}),methods:{...mapActions(useTONStore,["savePassword"]),onPinInput(){const r=/[0-9]/g;this.isPinValid=this.validate(this.pin,r)&&this.pin.length>4},onPasswordInput(){console.log("navigator.language: ",navigator.language);const r=/[a-z]/g,e=/[A-Z]/g,n=/[0-9]/g;this.isPasswordValid=this.validate(this.password,r)&&this.validate(this.password,e)&&this.validate(this.password,n)&&this.password.length>4},validate(r,e){return!!r.match(e)},async approveTransaction(){if(!(!this.isPinValid||!this.isPasswordValid)&&!this.approveInProcess){console.log("try approve"),this.approveInProcess=!0;try{this.savePassword(this.pin,this.password)}catch(r){console.warn("error",r)}finally{this.approveInProcess=!1}}}}}),_hoisted_1$3={class:"w-full h-full flex flex-col"},_hoisted_2$2={autocomplete:"off",enctype:"multipart/form-data",method:"post",class:"space-y-8"},_hoisted_3$2={class:"w-full h-full flex flex-col"},_hoisted_4={for:"pin",class:"w-full h-fit"},_hoisted_5={class:"w-full h-fit flex flex-row space-x-4"},_hoisted_6={class:"w-full h-auto relative"},_hoisted_7={key:0,class:"text-red-500"},_hoisted_8={class:"w-full h-full flex flex-col"},_hoisted_9={for:"pass",class:"w-full h-fit"},_hoisted_10={class:"w-full h-fit flex flex-row space-x-4"},_hoisted_11=["type"],_hoisted_12={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 96 960 960",width:"24"},_hoisted_13=createBaseVNode("path",{fill:"white",d:"M480 736q75 0 127.5-52.5T660 556q0-75-52.5-127.5T480 376q-75 0-127.5 52.5T300 556q0 75 52.5 127.5T480 736Zm0-72q-45 0-76.5-31.5T372 556q0-45 31.5-76.5T480 448q45 0 76.5 31.5T588 556q0 45-31.5 76.5T480 664Zm0 192q-146 0-266-81.5T40 556q54-137 174-218.5T480 256q146 0 266 81.5T920 556q-54 137-174 218.5T480 856Zm0-300Zm0 220q113 0 207.5-59.5T832 556q-50-101-144.5-160.5T480 336q-113 0-207.5 59.5T128 556q50 101 144.5 160.5T480 776Z"},null,-1),_hoisted_14=[_hoisted_13],_hoisted_15={key:1,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 96 960 960",width:"24"},_hoisted_16=createBaseVNode("path",{fill:"white",d:"m644 628-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660 556q0 20-4 37.5T644 628Zm128 126-58-56q38-29 67.5-63.5T832 556q-50-101-143.5-160.5T480 336q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920 556q-23 59-60.5 109.5T772 754Zm20 246L624 834q-35 11-70.5 16.5T480 856q-151 0-269-83.5T40 556q21-53 53-98.5t73-81.5L56 264l56-56 736 736-56 56ZM222 432q-29 26-53 57t-41 67q50 101 143.5 160.5T480 776q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300 556q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"},null,-1),_hoisted_17=[_hoisted_16],_hoisted_18={class:"w-full h-auto relative"},_hoisted_19={key:0,class:"text-red-500"},_hoisted_20={class:"w-full h-full flex flex-col"},_hoisted_21=["disabled"];function _sfc_render$3(r,e,n,s,a,o){return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("form",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("label",_hoisted_4,toDisplayString(r.LANG.PASSWORD_SAVER.PIN_LABEL[r.Locale]),1),createBaseVNode("div",_hoisted_5,[withDirectives(createBaseVNode("input",{id:"pin",ref:"pin",type:"text",autocomplete:"new-password",class:"w-full h-fit p-4 border rounded-md bg-inherit focus-visible:outline-none focus-visible:border-blue-600","onUpdate:modelValue":e[0]||(e[0]=g=>r.pin=g),onInput:e[1]||(e[1]=(...g)=>r.onPinInput&&r.onPinInput(...g))},null,544),[[vModelText,r.pin]])]),createBaseVNode("div",_hoisted_6,[r.isPinValid?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_7,toDisplayString(r.LANG.PASSWORD_SAVER.PIN_HELPER[r.Locale]),1))])]),createBaseVNode("div",_hoisted_8,[createBaseVNode("label",_hoisted_9,toDisplayString(r.LANG.PASSWORD_SAVER.PASS_LABEL[r.Locale]),1),createBaseVNode("div",_hoisted_10,[withDirectives(createBaseVNode("input",{id:"pass",ref:"pass",type:r.isPasswordShown?"text":"password",autocomplete:"new-password",class:"w-full h-fit p-4 border rounded-md bg-inherit focus:outline-none focus-visible:border-blue-600","onUpdate:modelValue":e[2]||(e[2]=g=>r.password=g),onInput:e[3]||(e[3]=(...g)=>r.onPasswordInput&&r.onPasswordInput(...g))},null,40,_hoisted_11),[[vModelDynamic,r.password]]),createBaseVNode("button",{type:"button",class:"w-16 min-w-fit h-fit p-4 border rounded-md",onClick:e[4]||(e[4]=g=>r.isPasswordShown=!r.isPasswordShown)},[r.isPasswordShown?(openBlock(),createElementBlock("svg",_hoisted_12,_hoisted_14)):(openBlock(),createElementBlock("svg",_hoisted_15,_hoisted_17))])]),createBaseVNode("div",_hoisted_18,[r.isPasswordValid?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_19,toDisplayString(r.LANG.PASSWORD_SAVER.PASS_HELPER[r.Locale]),1))])]),createBaseVNode("div",_hoisted_20,[createBaseVNode("button",{type:"button",class:"w-full h-fit p-4 mt-4 border rounded-md [&:not([disabled])]:active:bg-blue-800 disabled:border-slate-600 disabled:text-slate-600",disabled:!r.isPinValid||!r.isPasswordValid||r.approveInProcess,onClick:e[5]||(e[5]=(...g)=>r.approveTransaction&&r.approveTransaction(...g))},toDisplayString(r.LANG.PASSWORD_SAVER.APPROVE_BTN_TEXT[r.Locale]),9,_hoisted_21)])])])}const SavePassword=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2=defineComponent({props:{LANG:{type:Object,required:!0},Locale:{type:String,required:!0}},data:()=>({SCREEN}),methods:{...mapState(useTONStore,["getScreen"]),...mapActions(useTONStore,["disconnectWallet"]),loadPasswordClick(){this.$emit("load-pass",SCREEN.LOAD)},savePasswordClick(){this.$emit("save-pass",SCREEN.SAVE)}},components:{LoadPassword,SavePassword}}),_hoisted_1$2={class:"w-full h-full p-4 flex flex-col space-y-4"},_hoisted_2$1={class:"w-full h-full flex flex-row space-x-4"},_hoisted_3$1={class:"w-full h-full flex flex-row"};function _sfc_render$2(r,e,n,s,a,o){const g=resolveComponent("LoadPassword"),b=resolveComponent("SavePassword");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("button",{type:"button",class:"w-16 min-w-fit h-fit p-4 border rounded-md [&:not([disabled])]:active:bg-blue-800 disabled:border-slate-600 disabled:text-slate-600",onClick:e[0]||(e[0]=(...B)=>r.disconnectWallet&&r.disconnectWallet(...B))},"x"),createBaseVNode("button",{class:normalizeClass(["w-full h-fit p-4 border rounded-md",[r.getScreen()===r.SCREEN.LOAD?"bg-blue-800":""]]),onClick:e[1]||(e[1]=(...B)=>r.loadPasswordClick&&r.loadPasswordClick(...B))},toDisplayString(r.LANG.MAIN.GET_BTN_LABEL[r.Locale]),3),createBaseVNode("button",{class:normalizeClass(["w-16 min-w-fit h-fit p-4 border rounded-md",[r.getScreen()===r.SCREEN.SAVE?"bg-blue-800":""]]),onClick:e[2]||(e[2]=(...B)=>r.savePasswordClick&&r.savePasswordClick(...B))},"+",2)]),createBaseVNode("div",_hoisted_3$1,[r.getScreen()===r.SCREEN.LOAD?(openBlock(),createBlock(g,{key:0,Locale:r.Locale,LANG:r.LANG},null,8,["Locale","LANG"])):r.getScreen()===r.SCREEN.SAVE?(openBlock(),createBlock(b,{key:1,Locale:r.Locale,LANG:r.LANG},null,8,["Locale","LANG"])):createCommentVNode("",!0)])])}const Main=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1=defineComponent({props:{Locale:{type:String,required:!0},LANG:{type:Object,required:!0}},data:()=>({ConnectionStatus}),methods:{...mapState(useTONStore,["getStatus","getDeepLink"]),...mapActions(useTONStore,["connectWallet","disconnectWallet"])},computed:{calcDeepLink(){return this.getDeepLink()}}}),_hoisted_1$1={class:"w-full h-full p-4 flex flex-col space-y-4"},_hoisted_2=["disabled"],_hoisted_3=["href"];function _sfc_render$1(r,e,n,s,a,o){return openBlock(),createElementBlock("div",_hoisted_1$1,[r.getStatus()!==r.ConnectionStatus.ENABLE?(openBlock(),createElementBlock("button",{key:0,type:"button",class:"w-full h-fit p-4 border rounded-md [&:not([disabled])]:active:bg-blue-800 disabled:border-slate-600 disabled:text-slate-600",disabled:r.getStatus()===r.ConnectionStatus.WAIT,onClick:e[0]||(e[0]=(...g)=>r.connectWallet&&r.connectWallet(...g))},toDisplayString(r.getStatus()===r.ConnectionStatus.DISABLE?r.LANG.WALLET.CONNECT_BTN_LABEL[r.Locale]:r.LANG.WALLET.WAIT_BTN_LABEL[r.Locale]),9,_hoisted_2)):createCommentVNode("",!0),r.getDeepLink()!==""&&r.getStatus()===r.ConnectionStatus.WAIT?(openBlock(),createElementBlock("a",{key:1,class:"w-full h-fit p-4 border rounded-md text-center active:bg-blue-800",href:r.calcDeepLink},toDisplayString(r.LANG.WALLET.LINK_TO_WALLET[r.Locale]),9,_hoisted_3)):createCommentVNode("",!0)])}const TonConnect=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),LANG={WALLET:{CONNECT_BTN_LABEL:{"ru-RU":"  TonKeeper","en-EN":"Connect TonKeeper Wallet"},WAIT_BTN_LABEL:{"ru-RU":" ...","en-EN":"Wait connection..."},DISCONNECT_BTN_LABEL:{"ru-RU":"  TonKeeper","en-EN":"Disconnect TonKeeper Wallet"},LINK_TO_WALLET:{"ru-RU":"  ","en-EN":"Go to Wallet App"}},MAIN:{GET_BTN_LABEL:{"ru-RU":" ","en-EN":"Get Password"}},PASSWORD_SAVER:{PIN_LABEL:{"ru-RU":"  ,       (    )","en-EN":"Enter any PIN to get that password later ( you need remember it )"},PIN_HELPER:{"ru-RU":": 4  , 1  , 1 ","en-EN":"Minimum: 4 en characters, 1 lowercase letter, 1 number"},PASS_LABEL:{"ru-RU":"  ","en-EN":"Enter any password"},PASS_HELPER:{"ru-RU":": 8  , 1  , 1   , 1 ","en-EN":"Minimum: 8 en characters, 1 uppercase letter, 1 lowercase letter, 1 number"},APPROVE_BTN_TEXT:{"ru-RU":"  TON ","en-EN":"Approve by TON wallet"},APPROVE_OK_MESSAGE:{"ru-RU":"  ","en-EN":"Transaction approved"},APPROVE_WAIT_MESSAGE:{"ru-RU":" ...","en-EN":"Wait transaction..."},APPROVE_ERROR_MESSAGE:{"ru-RU":" ","en-EN":"Transaction Error"}},PASSWORD_LOADER:{PIN_LABEL:{"ru-RU":" ,     ","en-EN":"Enter the PIN that you entered when submitting your password"},PIN_HELPER:{"ru-RU":": 4  , 1  , 1 ","en-EN":"Minimum: 4 en characters, 1 lowercase letter, 1 number"},APPROVE_BTN_TEXT:{"ru-RU":"  TON ","en-EN":"Approve by TON wallet"},APPROVE_OK_MESSAGE:{"ru-RU":"  ","en-EN":"Transaction approved"},APPROVE_WAIT_MESSAGE:{"ru-RU":" ...","en-EN":"Wait transaction..."},APPROVE_ERROR_MESSAGE:{"ru-RU":" ","en-EN":"Transaction Error"}}},_sfc_main=defineComponent({data:()=>({SCREEN,LANG,Locale:"en-EN",ConnectionStatus}),created(){(navigator==null?void 0:navigator.language)==="ru-RU"&&(this.Locale="ru-RU")},methods:{...mapState(useTONStore,["getScreen","getStatus"]),...mapActions(useTONStore,["changeScreen"]),setScreen(r){this.changeScreen(r)}},components:{Main,TonConnect}}),_hoisted_1={class:"w-full h-full flex flex-col"};function _sfc_render(r,e,n,s,a,o){const g=resolveComponent("TonConnect"),b=resolveComponent("Main");return openBlock(),createElementBlock("div",_hoisted_1,[r.getStatus()!==r.ConnectionStatus.ENABLE?(openBlock(),createBlock(g,{key:0,Locale:r.Locale,LANG:r.LANG},null,8,["Locale","LANG"])):createCommentVNode("",!0),r.getStatus()===r.ConnectionStatus.ENABLE?(openBlock(),createBlock(b,{key:1,Locale:r.Locale,LANG:r.LANG,onLoadPass:r.setScreen,onSavePass:r.setScreen},null,8,["Locale","LANG","onLoadPass","onSavePass"])):createCommentVNode("",!0)])}const App=_export_sfc(_sfc_main,[["render",_sfc_render]]),app=createApp(App),pinia=createPinia(),connection=new WalletConnection;pinia.use(r=>{r.store.$onAction(e=>{switch(e.name){case"connectWallet":{connection.initConnection();break}case"disconnectWallet":{connection.disconnect();break}case"getPassword":{connection.getPassword();break}case"savePassword":{connection.savePassword(e.args[0],e.args[1]);break}}}),connection.statusChanged=e=>{r.store.connectionStatus=e},connection.deepLinkChanged=e=>{r.store.deepLink=e},connection.restoreConnection()});app.use(pinia);app.mount("#app")});export default Ke();
